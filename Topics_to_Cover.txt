v.var
m.var
n.var

my_var


###

ideas for test:

Sorting Data Frames
df.florist[order(df.florist$v.color), ]

subsetting matrices

dereferencing lists of vectors using '[[' and '$' combined with '['

dereferencing and counting data
v.na[!is.na(v.na)]
sum(!is.na(v.na))

modify Recursive Function


###

# unfinished slides: Exploring Namespaces

# rework slide: Reading and Writing Data Frames

# improve slide: Time Zones and Class Conversion

# add slide with plotmath mathematical annotations

# add slide with par()

empty plot
plot(x=1:10, y=1:10, xlab="", ylab="", type="n")
add text with annotation
text(5.0, 5.0, expression(beta==11))
text(6.5, 0.28, expression(paste(beta==5)))


# add slide describing plot params

list of Graphical Parameters
https://stat.ethz.ch/R-manual/R-devel/library/graphics/html/par.html



###

add slides:

pca and barplot


###

# set operators
%in% binary operator

sort()
order()

# operators

which()
match()


###

https://www.linkedin.com/groups/R-Project-Statistical-Computing-77616

$R$
\texttt{R}

$Q-Q$
\texttt{$Q-Q$}

FALSE
\texttt{FALSE}

TRUE
\texttt{TRUE}

$RStudio$
\texttt{RStudio}

$CRAN$
\texttt{CRAN}

$Excel$
\texttt{Excel}

p-value


$Shapiro-Wilk$




###

R --vanilla <xyz.rxyz.out

explain function:	data()

data(airquality, package="datasets")
class(airquality)
air_ozone <- airquality$Ozone
med_ozone <- median(air_ozone, na.rm=TRUE)
low_ozone <- (air_ozone < med_ozone)
mean(low_ozone, na.rm=TRUE)

http://adv-r.had.co.nz/Computing-on-the-language.html

http://faculty.nps.edu/sebuttre/home/RIndex.html

http://en.wikibooks.org/wiki/Data_Mining_Algorithms_In_R


###

add:

setting up RStudio projects

Installing Packages from GitHub

:: function
zoo::rollmedian
::: function
zoo:::rollmedian


script files
source() scripts

Startup

Sys.getenv()
R.home()

Sys.setenv(TZ="GMT")
Sys.getenv("TZ")

# set global options
options()
# get global options
getOption()

example:
option_values <- options()  # get all global options
length(option_values)
head(option_values)
tail(option_values)
options("digits")



setting R options
r environment variables

.packages(all=TRUE)  # display installed packages

installed.packages()  # get info on all packages (produces a lot of stuff)

# another way to display installed packages
packinfo <- installed.packages(fields=c("Package", "Version"))
packinfo[,c("Package", "Version")]
packinfo["xts",c("Package", "Version")]

objects()  # display currently loaded objects

search()  # display loaded packages


plotting

no type declaration of variables in R

logical

factor analysis

keywords

vectors

load
invisible

error messages

NA/NaN argument

create library and document with Roxygen

debug

Pry open the covers of R
library(pryr)
https://github.com/hadley/pryr

codetools

http://adv-r.had.co.nz/Expressions.html

Regular expressions in R vs RStudio
http://robinlovelace.net//r/2014/04/14/regex-in-R-RStudio.html



###

read
Wickham Split Apply Combine for Data Analysis

meet with C++ guy to coordinate RCPP

use combination of take-home homeworks and also online tests in class
online tests in class should be say 20min and should test basic syntax skills
create website with online tests
Google create online interactive software tests
http://worldclass.io/
http://www.classmarker.com/
http://www.proprofs.com/quiz-school/

# R exams package
http://www.r-statistics.com/2012/12/generation-of-e-learning-exams-in-r-for-moodle-olat-etc/
http://cran.r-project.org/web/views/ReproducibleResearch.html

# Free Tools for Teachers
http://elearningindustry.com/321-free-tools-for-teachers-free-educational-technology


### caret package for creating predictive models: give examples
http://caret.r-forge.r-project.org/
# confusion matrix
# classification test Sensitivity and specificity
http://en.wikipedia.org/wiki/Sensitivity_and_specificity
http://en.wikipedia.org/wiki/Receiver_operating_characteristic



### incorporate:

# return parsed but unevaluated expressions in a list
parse()
# convert expressions into character strings - inverse of parse()
deparse()
# convert arguments into a vector of strings
deparse(substitute(var))
deparse(substitute(x)) returns [1] "x"
# the use of 'deparse(substitute())' is strongly discouraged
http://stackoverflow.com/questions/5542945/opposite-of-rs-deparsesubstitutevar
as.expression("x") works to get the variable from the variable name

# reverse is:
eval(parse(text=...))
or
eval(substitute(...))



RQuantLib examples from
RQuantLib Integration.pdf


# Data Science with R
C:\Research\R\Tutorials\OnePageR Data Science
http://onepager.togaware.com/

# Shalizi Advanced Data Analysis book
https://www.coursera.org/course/rprog

# Michael Clark (Notre Dame): good tutorials
C:\Research\R\Tutorials\Michael Clark
http://www3.nd.edu/~mclark19/projects.html
http://www3.nd.edu/~mclark19/code.html
https://github.com/mclark--

# Winston Chang? - very good tech insights
http://www.jottr.org/
http://www.jottr.org/?view=magazine

# magrittr examples
http://timelyportfolio.blogspot.com/2014/06/a-whole-new-r-world-with-chains-and.html
http://timelyportfolio.github.io/rCharts_factor_analytics/factors_with_new_R.html
http://martinsbioblogg.wordpress.com/2014/03/27/more-fun-with-and/
http://australianbioinformatics.net/the-pipeline/2014/7/14/r-the-getting-of-wisdom.html#.U8UphPldWYI
https://gist.github.com/anonymous/0c69b019d0b4f6ae5050

# reshape2 package for melting and casting data frames (or arrays)
https://github.com/hadley/reshape
# reshape2 plus ggplot2 tutorials
http://seananderson.ca/2013/10/19/reshape.html
http://martinsbioblogg.wordpress.com/2013/01/27/a-slightly-different-introduction-to-r-part-ii/


### data validation
### tidyr for data scrubbing
http://cran.r-project.org/web/packages/tidyr/vignettes/tidy-data.html
http://blog.rstudio.org/2014/07/22/introducing-tidyr/
https://github.com/hadley/tidyr

# use 'faithful' data set for examples

# R: the good parts
http://blog.datascienceretreat.com/post/69789735503/r-the-good-parts


# Online Homework Delivery Systems
http://sourceforge.net/projects/openwebwork/
http://www.nsta.org/publications/news/story.aspx?id=51970


### R environment

set R_PROFILE variable

setting up .RProfile file
customizations


.Rprofile file shouldn't include any code that affects the results of programs, as this would make them irreproducible for other users.
.Rprofile file shouldn't load packages, change the options of functions, define functions etc. 
Instead, add an initialization script at the top level of every project file
R code should be self-contained and reproducible 


special functions
.First
.Last


.Rprofile file can include code that changes the appearance of R:

# set wide display for multiple monitors
options("width"=160))

# set default CRAN mirror
options(repos=c(CRAN="http://cran.rstudio.com")))

# set prompt
options(prompt="R", digits=4, show.signif.stars=FALSE)

# customize windows graphics defaults
setHook(packageEvent("grDevices", "onLoad"),
        function(...)
            grDevices::windows.options(width = 8, height = 6,
                                       xpos = 0, pointsize = 10,
                                       bitmap.aa.win = "cleartype"))


###


# style guide
I follow Hadley Wickham's style guide, with some small exceptions.
I liked your points about using whitespace to enhance readability and shorten length of lines.

I personally dislike the '<-' assignment operator, but I still use it in R, instead of '='.  The reason is that the two assignment operators are not equivalent in R.
The '<-' and '=' operators differ in scope and precedence ('<-' has higher precedence than '=')

The '=' operator is used for named arguments in function calls.

As a rule of thumb, I use '<-' in R scripts, and I use '=' in function calls.

If I had a choice, I would completely eliminate the '<-' assignment operator.


### Control statements

inside if() statements almost always use '||' and '&&'


use this:
my_var <- if (my_clause) A.expression else B.expression

instead of this:
if (my_clause) {
my_var <- A.expression
} else {
my_var <- B.expression
}


foreach
read:
foreach Nesting Loops.pdf


### regular expressions

# string manipulation

# Convert string into variable
http://cran.r-project.org/doc/FAQ/R-FAQ.html#How-can-I-turn-a-string-into-a-variable_003f
http://www.r-bloggers.com/converting-a-string-to-a-variable-name-on-the-fly-and-vice-versa-in-r/
http://stackoverflow.com/questions/6034655/r-how-to-convert-string-to-variable-name
http://stackoverflow.com/questions/9057006/getting-strings-recognized-as-variable-names-in-r



### data types and classes

### data structures

### vectors

rep()


### matrices

don't allocate empty numeric matrix using
x <- matrix(nrow=500, ncol=100)
it creates logical values

as soon as you assign a numeric value to any of the cells in 'x', 
the matrix will first have to be coerced to numeric when a new value is assigned.

Instead allocate empty matrix using

x <- matrix(NA_real_, nrow=500, ncol=100)  # real matrix
x <- matrix(NA_integer_, nrow=500, ncol=100)


# don't grow matrices, instead of:
rmat <- NULL
for(i in 1:n){
rmat <- rbind(rmat,long.computation(i,.....))
}

use:

rmat <- matrix(0.0, n, k)  # allocate
for(i in 1:n){
rmat[i,] <- long.computation(i,.....)
}

for large n, better to create transpose, column by column, instead of row by row:
tmat <- matrix(0.0, k, n)
for(i in 1:n){
tmat[, i] <- long.computation(i, .....)
}



# subsetting
x[ind, drop=FALSE]
drop=FALSE

Use
subset(x, ...)

# R matrixStats package
demonstrate fast Methods that apply to rows and columns of a matrix


### data frames
Working with data frames
http://en.wikibooks.org/wiki/R_Programming/Working_with_data_frames

sort
order()

which()


### operators


comparison operators
'=='
identical()


set operators
%in% binary operator
(6:10) %in% (1:36)
which(c("a", "b", "c", "d", "e", "a", "b", "c", "d", "e") %in% c("d", "e"))

http://stat.ethz.ch/R-manual/R-devel/library/base/html/match.html

get indexes of the specific elements inside a larger vector - we are asking which elements of (1:36 %in% 1:6) are TRUE:
which(1:36 %in% 6:10)

all(1:6 %in% 0:36)
all(1:60 %in% 0:36)

any(1:6 %in% 0:36)
any(1:60 %in% 0:36)
any(50:60 %in% 0:36)

if(length(union(smallset,bigset) > length(bigset)) print('disjunct sets')


# Combinatorial functions

create combinations of n elements, m at a time
combn(x, m, FUN=NULL, simplify=TRUE, ...)
combn(letters[1:4], 2)

create data frame from all combinations of factors or vectors
expand.grid()
x <- seq(0, 10, length.out=100)
y <- seq(-1, 1, length.out=20)
d1 <- expand.grid(x=x, y=y)
d2 <- expand.grid(x=x, y=y, KEEP.OUT.ATTRS=FALSE)



# plyr

# dplyr 0.2
http://blog.rstudio.org/2014/05/21/dplyr-0-2/


### input/output


# Construct the path to a file from components in a platform-independent way
file.path(dir_name, vec_file_names)

give examples of file manipulation
file.create()
file.exists()
file.rename()

R data formats: RData, Rda, Rds etc
http://stackoverflow.com/questions/21370132/r-data-formats-rdata-rda-rds-etc


# simple example to write lines of text to a file

find out more:
?connections

fileConn <- file("output.txt")
writeLines(c("Hello","World"), fileConn)
close(fileConn)
# unlink("ex.data")

sink("outfile.txt")
cat("hello")
cat("\n")
cat("world")
sink()

cat("Hello",file="outfile.txt",sep="\n")
cat("World",file="outfile.txt",append=TRUE)
file.show("outfile.txt")

txt <- "Hello\nWorld"
writeLines(txt, "outfile.txt")
or
txt <- c("Hello", "World")
writeLines(txt, "outfile.txt")

# end simple example


reading
read.csv()
read.table()

writing
write()
write.csv()

Package ‘xlsx’
read.xls from the gdata package
In RStudio go to Workspace/Import Dataset
runs read.csv() for you
recycling rule

captures all output sent to the standard output and returns a character vector where each element correspond to a line of output.
capture.output() 
it does not capture the output sent to the standard error, e.g. cat("Hello\nworld!\n", file=stderr()) and message("Hello\nworld!\n").
it is very slow
captureOutput() function of R.utils


### Date and Time

date and time conversion
Posix
UTC TZ
http://www.noamross.net/blog/2014/2/10/using-times-and-dates-in-r---presentation-code.html

# package lubridate
http://www.r-statistics.com/2012/03/do-more-with-dates-and-times-in-r-with-lubridate-1-1-0/


### plotting
functions: plot, line, points

package ggplot
http://www.statmethods.net/advgraphs/ggplot2.html


# create ggpvis example:
download daily return data for a dozen assets: stocks, bonds, REITS
create weighted average portfolio of these assets
create ggpvis application to dynamically plot the portfolio, while adjusting its weights
display portfolio performance statistics on the plot


### data management


explain load() function:
loads data and returns name invisibly


# apply functions
create function to:
in apply loop load data from a file 
scrub it
write to file 
use tryCatch()

aRgh
apply always drops dimensions if the function applied returns a scalar
https://github.com/tdsmith/aRrgh/issues/13


###

show option_example.R

ROC curve
Precision Recall Curve (PR Curve)


###
topics to cover:

# regression topics

class lm and sublclasses


# regression sources
James Statistical Learning in R
Rnews_2002-3 Regression Diagnostic.pdf
Faraway Practical Regression and Anova using R.pdf


# regression examples:
http://machinelearningmastery.com/linear-regression-in-r/


# optimization



###

example application:
1. create smooth or random xts time series
2. add jump noise to it
3. apply filtering to remove jump noise by applying: filter function, caTools, TTR, highfrequency package, etc. (compare speed)
http://www.cookbook-r.com/Manipulating_data/Calculating_a_moving_average/
http://stackoverflow.com/questions/743812/calculating-moving-average-in-r
4. tune filter parameters and create ROC curve
5. add jump noise with variable volatility
6. tune filter parameters in-sample: study bias / variance tradeoff, Precision and Recall tradeoff
7. create rCharts and shiny visualizations



### functions

# view source code of function
http://stackoverflow.com/questions/19226816/how-can-i-view-the-source-code-for-a-function
http://stackoverflow.com/questions/3485228/view-source-code-in-r
http://librestats.com/2014/05/01/searching-an-r-functions-source-code/
https://gist.github.com/wrathematics/11378737

Non-visible functions aren't exported

http://stackoverflow.com/questions/5835312/looking-at-internal-methods

for packages not attached to the search path

explain functions:
UseMethod()
NextMethod()


# examples: just shows UseMethod() call
getAnywhere('rollapply')
A single object matching ‘rollapply’ was found
It was found in the following places
  package:zoo
  namespace:zoo
with value

function (data, ...) 
UseMethod("rollapply")
<environment: namespace:zoo>

# similar to SumDots()
# example for homework or test: rewrite MySum() so that it is recursive, instead of calling sum()
MySum <- function(n.var1=2, n.var2=1, ...) { # define function MySum
# default values can be specified in the argument list
n.var1 + 2*n.var2 + sum(...)
# the function returns the last evaluated statement
} # end MySum


# examples: this shows source code
getAnywhere('rollapply.zoo')
getAnywhere('rollmedian.zoo')


the .* functions:
	.C
	.Call
	.Fortran
	.External
	.Internal
	.Primitive
call functions that are compiled

primitive functions

the .* functions:
.Internal
.Primitive
are used to call functions built into the R interpreter


# function debugging

function edit
edit()

debug()
browser()
stopifnot()

Return values
return()
side-effects
copy-on-modify semantics


# function dispatch


do.call()
example: 
instead of:
	Sys.setenv(TODAY="Friday")
do:
	var.name  <- "TODAY"
	var.value <- "Friday"
	args <- list(var.value)
	names(args) <- var.name
	do.call(Sys.setenv, args)


getOption()

UseMethod()
When a function calling UseMethod("fun") is applied to an object with class attribute c("first", "second"), the system searches for a function called fun.first and, if it finds it, applies it to the object. 
If no such function is found a function called fun.second is tried. 
If no class name produces a suitable function, the function fun.default is used, if it exists, or an error results.

good example
http://stackoverflow.com/questions/8430178/arguments-and-classes-for-writing-generic-functions-in-r


### function operators

# functions that have functions as arguments
http://adv-r.had.co.nz/Functionals.html


incoroporate rollmedian() example


A function operator is a function that takes one (or more) functions as input and returns a function as output.
function operators are similar to functionals
function operators extract common patterns of anonymous function use

Map()
Reduce()
Filter()

Map() computes two or more lists (or data frames) in parallel
Map() is a variant of lapply(), where all arguments can vary
Map() is equivalent to mapply with simplify=FALSE


match.fun()
call a function 'func'
call_fun <- function(func, ...) func(...)

# lists of functions
http://adv-r.had.co.nz/Functional-programming.html

lapply(compute_mean, function(f) system.time(f(x)))


### parallel computing 

http://beckmw.wordpress.com/2014/01/21/a-brief-foray-into-parallel-processing-with-r/
http://blog.revolutionanalytics.com/2013/12/tips-on-computing-with-big-data-in-r.html

# foreach package for loops with parallel processing
http://blog.revolutionanalytics.com/2013/08/wonders-of-foreach.html
http://blog.revolutionanalytics.com/2009/05/parallelized-backtesting-with-foreach.html
http://blog.revolutionanalytics.com/2009/07/simple-scalable-parallel-computing-in-r.html
http://blog.revolutionanalytics.com/2009/08/parallel-programming-with-foreach-and-snow.html

http://www.exegetic.biz/blog/2013/11/iterators-in-r/

code from:
http://adv-r.had.co.nz/Functionals.html
library(parallel)
parallel::mclapply()
parallel::mcMap()
unlist(mclapply(1:10, sqrt, mc.cores=4))


# create parallel bootstrap example as in:
http://adv-r.had.co.nz/Functionals.html



### Infix functions
prefix operators

# Defining new binary operators
"%!%" <- function(X, y) { ... }

The function could then be used as X %!% y.



###
FRE6871_Lecture_1

calculate percentage returns for stock index
create and plot histogram of returns
calculate and plot the probability kernel density
apply Shapiro-Wilk test

class

storage mode
typeof
type coercion

dim, length

cbind() and rbind()

Subsetting

http://adv-r.had.co.nz/Subsetting.html

head, tail
first, last


###
FRE6871_Lecture_2

Internal R Help and Documentation



create frame with plots of different probability distributions: uniform, normal, Chi2, t, F
probability distributions
distributions of returns

random
create frame with random number generation
create frame with simple applications of: dnorm, pnorm, qnorm, rnorm
set.seed()
random numbers
random vectors

create frame with moments estimator
sample mean, variance, skewness, kurtosis


Some packages include lots of datasets.
The datasets package
Title Data sets for econometrics
Garch Daily Observations on Exchange Rates of the US Dollar Against Other Currencies
The AER package includes replication datasets for some important textbooks in econometrics.
The EcDat package includes replication archive for the Journal of Applied Econometrics, the Journal of Business and Economic Statistics, etc

Yule 1899 data



### packages

# base packages
base packages are part of R distribution, and are in the source tree in individual package directories under /src/library/
Examples include: base, compiler, stats, and utils.
compiled code are in a 


# loading packages

# installing packages from github
install.packages("devtools")
devtools::install_github("hadley/tidyr")

CRAN Views

Estimate moments using package moments


# package download and unzip source in cwd
untar(download.packages(pkgs="xts",
                        destdir=".",
                        type="source")[,2])



### environments

new.env()
enclosing parent environment
An environment is very similar to a list, with three important exceptions:
Environments have parents. 
There is only one exception: the empty environment does not have a parent.

The parent environment of a function is the environment in which a function was defined

the top-level environment is the global environment (workspace) or the namespace of a package

first-class environments can be manipulated from within the language

parent frame: the latter (returned by parent.frame) refers to the environment of the caller of a function.
parent frame is the calling environment

hidden variables and functions in namespaces use the ".*" syntax

standard "options" list

setting and getting defaults

instead of attach/detach, use with()

evaluation using with()

# view current namespaces
loadedNamespaces()


### functions

Components of a function
function calls
parameter passing rules: use example built-in function to explain

default argument values
Partial name matching
function lazy evaluation
for example paste() save() or seq()
typing function name without parentheses producs code for that function

introduce functions
Biostatistics 140.776
write a simple function
http://adv-r.had.co.nz/Functions.html

Function for calculating moments

# Create functions
http://adv-r.had.co.nz/Functions.html
http://ww2.coastal.edu/kingw/statistics/R-tutorials/functions.html


### scope

create separate slide for Lexical Scoping
Environments are the data structures that power scoping
Lexical vs. Dynamic Scoping
Explain Lexical Scoping on example
If an object is not found in an environment, then R will look at its parent (and so on). 

When a function is evaluated, $R$ looks in the function search path for any variables in scope,
\vskip1ex
The evaluation environment is first, then the functions enclosing environment, which will be the global environment for functions defined in the workspace.
\vskip1ex
When R looks up the value for a symbol the frame is examined and if a matching symbol is found its value will be returned. If not, the enclosing environment is then accessed and the process repeated. 
\vskip1ex

global variables can be referenced inside a function.


###
FRE6871_Lecture_3

# super-assignment operator
permanent assignments are intended within a function, then either the
“superassignment” operator, <<- or the function assign() can be used.
global assignment operator: <<-
assignment operator for enclosing environment <<-


# Control statements

http://en.wikibooks.org/wiki/R_Programming/Control_Structures

Venables:
R has available a conditional construction of the form
> if (expr_1) expr_2 else expr_3
where expr 1 must evaluate to a single logical value

vectorized version of the if/else construct, the ifelse function
	ifelse(condition, a, b)
returns a vector of the length of its longest argument,
with elements a[i] if condition[i] is true, otherwise b[i].


# for loops
for (n.inp in v.inp)

# while loops for simulation
barrier option example


# Vectorization in R
http://www.noamross.net/blog/2014/4/16/1-in-r--why.html
http://stackoverflow.com/questions/15917233/elegant-way-to-vectorize-seq?lq=1
http://stackoverflow.com/questions/13544594/create-a-vector-function-from-a-scalar-function?rq=1

create assignment to vectorize function using ifelse
http://stackoverflow.com/questions/13544594/create-a-vector-function-from-a-scalar-function?rq=1


example of vectorizing grid search
vec.objective.alphaModel <- Vectorize(v.objective.alphaModel)
widths <- 65:75
windows <- 15:25
thresholds <- 0.1*(13:45)
profile.alpha <- outer(widths, windows, vec.objective.alphaModel)
profile.alpha <- outer(windows, thresholds, vec.objective.alphaModel)
max(profile.alpha)
rownames(profile.alpha) <- widths
colnames(profile.alpha) <- windows
rownames(profile.alpha) <- windows
colnames(profile.alpha) <- thresholds
coordinates.matrix(profile.alpha, min)
coordinates.matrix(profile.alpha, max)


# code speed and profiling

command execution time
system.time()

Rprof()
unix.time()
gc()


### Functions

# Recursive functions
# R supports recursive functions. The function below computes Fibonacci numbers recursively.

# Functions in R are “first class objects”
which means that they can be treated much like any other R object. 
Functions can be passed as arguments to other functions
Functions can be nested, so that you can define a function inside of another function
Functions can return functions as their result

Functions as Objects - Functions returning functions
Functions that return another function as its value
functions defined inside other functions

# anonymous functions
(function(x) x + 3)(10)
apply() with anonymous functions
anonymous functions as arguments to functions

formulas as arguments to functions


Explain on examples why defining functions inside other functions is useful in analysis


# Function factories
Closures are useful for making function factories, and are one way to manage mutable state in R.

function environments disappear once the function finishes executing, but when a function returns a function, then its environment is attached to the new function. 

# mutable states
mutable states can be modified using the "superassignment" operator "<<-" or the function assign()

the function assign() assigns a value to a name in an environment
the default is to assign in the enclosing environment


mutable states
http://homepage.stat.uiowa.edu/~luke/R/references.html
mutatr: Mutable objects for R
# Avoid mutable state!!!
http://programmers.stackexchange.com/questions/148108/why-is-global-state-so-evil


# Condition Handling and Recovery
Exception Handling in R
Exception 

      $R$ has a system for handling conditions, that includes the \emph{condition} class and several functions for handling conditions,
      \vskip1ex
      In \emph{RStudio}

Conditions: Errors and Warnings

Warnings are much more common than Errors

Errors are uncommon

Errors occur when: matching arguments, if/else statement not logical or a numeric, recycle rule

Error options
There are a number of options variables that can be used to control how R handles errors and warnings. The are listed in the table below.

‘warn’
Controls the printing of warnings.

‘warning.expression’
Sets an expression that is to be evaluated when a warning occurs. The normal printing of warnings is suppressed if this option is set.

‘error’
Installs an expression that will be evaluated when an error occurs. The normal printing of error messages and warning messages precedes the evaluation of the expression.


warnings can be created using the function warning()
takes a single argument that is a character string

the option "warn" 
The behaviour of a call to warning depends on the value of 


http://homepage.stat.uiowa.edu/~luke/R/exceptions/simplecond.html
http://stackoverflow.com/questions/12193779/how-to-write-trycatch-in-r
http://mazamascience.com/WorkingWithData/?p=912
http://www.stats.uwo.ca/faculty/murdoch/software/debuggingR/
http://www.win-vector.com/blog/2012/10/error-handling-in-r/

function error and warning handling
function exception handling
try()
tryCatch()

# check the class of try object to determine if call was successful
tmp_instr <- try(getInstrument(this_symbol, silent=FALSE))
if (inherits(tmp_instr, "try-error") || !is.instrument(tmp_instr)) 


options(error=recover)
http://www.burns-stat.com/the-options-mechanism-in-r/


http://homepage.stat.uiowa.edu/~luke/R/exceptions/simplecond.html

http://www.win-vector.com/blog/2012/10/error-handling-in-r/

http://www.stats.uwo.ca/faculty/murdoch/software/debuggingR/


# try an Expression Allowing Error Recovery
http://stat.ethz.ch/R-manual/R-devel/library/base/html/try.html


### functionals

functionals extract common patterns of loop use

# explain this syntax for removing zero length list elements
my_list <- list('a', 2, integer(0))
my_list[lapply(my_list, length)>0]


# apply functions

create exercise to convert for loop to apply call

with(PlantGrowth, tapply(weight, group, sem))

from:
http://adv-r.had.co.nz/Functions.html
x <- list(1:3, 4:9, 10:12)
sapply(x, "[", 2)
#> [1]  2  5 11

# equivalent to
sapply(x, function(x) x[2])
#> [1]  2  5 11

http://adv-r.had.co.nz/Functionals.html

sapply() is a thin wrapper around lapply() that transforms a list into a vector in the final step

sapply() silently returns a list if the function returns results of different types or lengths
vapply() will throw an error

sapply() guesses the output type
vapply() takes an additional argument of output type
use sapply() interactively 
use vapply() inside other functions

good examples
http://stackoverflow.com/questions/15733518/efficient-way-to-loop-in-r?rq=1

Wickham Split Apply Combine for Data Analysis

Higher-order functions - apply functions
takes one or more functions as an input - outputs a function
The map function is an example of a higher-order function.
The apply function is the most basic of R's map functions. 
apply takes as arguments an array, a vector of the dimension to map along and a function. 

split and apply example:
http://www.analyticsvidhya.com/blog/2014/05/tricky-interview-questions/
a <- c(1,1,1,1,2,2,2,2,2)
b <- c(10,12,15,12,NA,30,42,38,40)
s <- split(b,a)
lapply(s,mean,na.rm=TRUE)


###
FRE6871_Lecture_4

# Using apply, sapply, lapply in R
http://petewerner.blogspot.com/2012/12/using-apply-sapply-lapply-in-r.html

### time series
Aggregation of time series data over window: mean, median, hi, low, close
package zoo
package xts
package forecast
http://www.statmethods.net/advstats/timeseries.html


### Data scrubbing

NaN represents an undefined value (“not a number”)
producing NaN
managing NaN
NA or NaN
is.na()
is.nan()

Remove NAs option
na.rm = TRUE


###
FRE6871_Lecture_5

# Data Munging

ts.data <- read.csv("data.csv", stringsAsFactors=FALSE)

# package zoo
time()
difftime()
coredata()
lag()
diff()
window()
rollapply()
rollmean()
?rollapply examples


join operations
merge()

cbind merge() two zoo series with different indices
detect missing dates
Apply Various strategies for dealing with NAs: 
remove - na.omit()
linear interpolation, 
last observation carried forward - na.locf()

# create series of dates
daily, monthly, quarterly, yearly series
Class: “yearqtr”, “yearmon”
as.yearmon
yearmon
yearqtr

create function to create EOM, EOQ, EOY dates

remove duplicate dates
http://stackoverflow.com/questions/8865257/r-language-remove-duplicate-rows-from-xts-object

aggregate

get calendar using RQuantLib
calculate business days

allign calendars


# Create frame summarizing Time series: Implementations:

“ts” (base): regular “numeric” time index (e.g., annual, quarterly, monthly),
“its” (its): irregular time index of class “POSIXct”,
“irts” (tseries): irregular time index of class “POSIXct”,
“timeSeries” (timeSeries): irregular time index of class “timeDate”,
“zoo” (zoo): regular or irregular time index of arbitrary class.
“xts” (xts): built on top of “zoo”, with specialized infrastructure for
time indexes of class “Date”, “POSIXct”, “chron”, “timeDate”,
“yearmon”, “yearqtr”, . . .


# duplicate data

unique(mydat) # keep unique rows
library(cwhmisc)
remove.dup.rows(mydat) # similar to unique()
table(duplicated(mydat)) # table duplicated lines
mydat$dups <- duplicated(mydat) # add a logical variable for duplicates


# classes, generic functions and object orientation

class(x)
class(x) <- value
unclass(x)
inherits(x, what, which=FALSE)

method dispatch

Primitive functions

repeat Lexical scoping

Name masking

Functions vs. variables

binding function calls


###
FRE6871_Lecture_6

create frame explaining hypothesis testing

Shapiro-Wilk test
Jarque Bera test

ACF
PACF



Type I and Type II errors, 

# Homework Assignment
# zoo object helper function
create a function that performs the following:
input is zoo object 
output is summary statistics


###
FRE6871_Lecture_7

Time Series models

slides:
introduce differencing: acf and pacf before and after differencing
example of time series with non-zero autocorrelation
### Autocorrelation tests
### Ljung-Box to test for autocorrelations different from zero

introduce AR model
introduce MA model
introduce ARIMA model

Identification of Autoregressive Processes

Is this true?
For purely deterministic processes, the non-zero PACF coefficients are equal to the correlation coefficients of the \emph{AR}(n) process,

Fitting Time Series models
show that DAX can't fit neither AR nor MA
fit DAX into ARIMA
fit diff DAX into ARIMA

fit using ar()
auto.arima()
arima()
Arima()
spec.ar(ts.retsPair,log='no')
spec.pgram(ts.retsPair,log='no')

fitted(arima.pc1), order.by=index(ts.pca))


### regression

Formulas object
Relationships among variables can be specified. 
The ~ operator is basic to formulas in R.
y ~ x means “y is explained by x”.
f.obj <- y ~ x
class(f)

R2 is a statistic that will give some information about the goodness of fit of a model.
Adjusted R2 is a modification of R2 that adjusts for the number of explanatory terms in a model.

correlation and regression
http://ww2.coastal.edu/kingw/statistics/R-tutorials/simplelinear.html

test residuals

### Durbin-Watson test for first order autocorrelations of regression residuals
Durbin-Watson test for first order autocorrelations of regression residuals

Regression Diagnostic: Rnews_2002-3



###################################
###	EXTRA TOPICS		###
###################################



### Fitting Market Returns

Fit EuStockMarkets DAX returns into t-dist by using Method of Moments:
matching sample moments with distribution moments
# Fitting Market Returns - page is NA
http://blog.revolutionanalytics.com/2014/02/quantitative-finance-applications-in-r-4-using-the-generalized-lambda-distribution-to-simulate-market-returns.html


Goodness of fit using the chi-squared statistic
http://en.wikipedia.org/wiki/Goodness_of_fit
use chisq.test()
http://ww2.coastal.edu/kingw/statistics/R-tutorials/prob.html
t.test( )
Wilcoxin test
wilcox.test()
http://ww2.coastal.edu/kingw/statistics/R-tutorials/singlesample.html
http://ww2.coastal.edu/kingw/statistics/R-tutorials/independent-t.html

illustrate multinomial distribution goodness of fit test
http://www.r-tutor.com/elementary-statistics/goodness-fit/multinomial-goodness-fit
http://ww2.coastal.edu/kingw/statistics/R-tutorials/independent-t.html

illustrate Hypothesis Testing using Jarque–Bera test

apply Shapiro-Wilk test

fit EuStockMarkets DAX returns into normal-dist - find p-value
fit EuStockMarkets DAX returns into t-dist - find p-value

create frame with max likelihood
illustrate max likelihood with simulated data

# Optimization

Example from Biostatistics functions
C:\Research\R\Tutorials\Johns Hopkins Biostatistics
Application: Optimization
use example from functions.pdf from Johns Hopkins Biostatistics
for Plotting the Likelihood
No need to carry around long argument lists

create frame with Fisher information


# fit normal distribution
library(MASS)  # library MASS has fitdistr
fitdistr(ts.rets, "normal")  # fit normal distribution
# fit t-distribution into histogram of returns
fitdistr(ts.rets, "t")  # fit t-distribution


# Customizing Startup

http://www.statmethods.net/interface/customizing.html


# Homework Assignment
# create a function that performs the following:
input is a vector with possible NA values
output named vector of length two, with first value being total number of elements of input vector 
with possible NA values
if input is not a vector, then function returns a warning message
output named vector of length two, with first value being total number of elements of input vector 
counts NAs as data values and doesn't tell you

# Homework Assignment
# create a function that performs the following:
reads a matrix from a file
restores rownames (if needed)
you can call functions read.csv() or scan()


# Options Settings
https://stat.ethz.ch/R-manual/R-devel/library/base/html/options.html

### parsing arguments and variables

# Look for an Argument in the Call
hasArg()

# get value of variable from its string
get()
Return the Value of a Named Object
get(make.names("agg_price_window"))
get(paste("agg", "price", "window", sep="_"))
get("agg_price_window")


Replacement function replace() - not sure it's important
http://stackoverflow.com/questions/11563154/what-are-replacement-functions-in-r
http://stackoverflow.com/questions/11811027/replace-function-examples



####

create overview of functions:
is.*
as.*

