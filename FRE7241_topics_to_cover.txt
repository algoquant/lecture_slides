### FRE7241 Algorithmic Portfolio Management
FRE-GY 7241

GA is 
Shu Ye shu.ye@nyu.edu
room RH216

# potential GAs
Gaurav Sharma <gaurav.sharma@nyu.edu>
Xiang Li <xiang.l@nyu.edu>

# former GAs
Jaimin Doshi jbd316@nyu.edu
Luping Liu	ll2525@nyu.edu
Dong Huang dh1716@nyu.edu

# Song Tang C++ courses
FRE-GY 6883 Financial Computing
FRE-GY 7831 Financial Analytics & Big Data

# Asha Matthei teaches FRE7801 Quantitative Trading Strategies at NYU Tandon
https://www.linkedin.com/in/ashapaulmatthei

# contribute to Quantitative Finance Collector by Biao Guo Assistant Professor, School of Finance, Renmin University, China
http://www.mathfinance.cn/

http://getprismatic.com/hedge-funds

# request for sample textbooks
I'm an adjunct at NYU Tandon, where I teach graduate courses in applications of R in Finance, and Algorithmic Portfolio Management Using R.  

# Some students have asked me if I would be willing to supervise their projects

# find out more about the Student Response System - for live in-class polling
http://engineering.nyu.edu/academics/support/fitl/srs

# Below is a link to Google Drive with my lecture files: 
https://drive.google.com/drive/u/0/folders/0Bxzva1I0t63vVGEtaXNIY1JMa00
The .pdf files contain the narration text, formulas, and R code. Most slides have narration and formulas on the left panel, and the corresponding R code on the right panel.
There are two types of .pdf files.  First, there are thematic files, containing slides on certain topics.  For example you can take a look at portfolio_construction.pdf.  Second, there are lecture files, containing slides for specific lectures.  I create .pdf lecture files by selecting slides from thematic files.  I created the .pdf files from .Rnw Sweave files using the knitr package.

I also provide .R files containing the code, so that students can execute the code as they listen to the lecture. The lecture materials also contain .RData files with sample data. 
I welcome your comments.


###############
# Syllabus:

1.	Time series analysis and ARIMA models,
2.	Moment estimation: range OHLC estimators of volatility, skewness, kurtosis, and covariance, 
3.	GARCH models and volatility forecasting, 
4.	Models of stock returns: Pareto distribution, stochastic volatility, Heston model, 
5.	Tail risk measures: value-at-risk, conditional value-at-risk, 
6.	Logarithmic utility and risk-adjusted performance measures: Sharpe, Calmar, and Sortino ratios, 
7.	Capital Asset Pricing Model (CAPM): the market portfolio, the Security Market Line, 
8.	Beta-adjusted performance measures: Treynor ratio, Jensen's alpha, information coefficient, 
9.	Factor models: Principal Component Analysis, cross-sectional regressions, Fama-French model, Barra model, 
10.	Pricing anomalies: size, value, momentum, volatility, 
11.	Forecasting models for price returns, stock beta, and correlation, 
12.	Portfolio optimization: mean-variance efficient portfolios, efficient frontier, Capital Market Line, 
13.	Correlation matrix estimation: Cholesky decomposition, Factor Augmented Regression, 
14.	Constrained portfolio optimization: coefficient shrinkage, 
15.	Static asset allocation strategies: cap-weighted and equal-weighted stock indices, all weather portfolios, 
16.	Portfolio management strategies: risk parity, minimum correlation, minimum variance, maximum Sharpe, maximum CVaR, betting against beta, factor investing, smart beta asset allocation, 
17.	Active portfolio management strategies: tactical asset allocation, portfolio rebalancing, Constant Proportion Portfolio Insurance (CPPI), sector rotation, 
18.	Benchmarking portfolio management skill: performance attribution, random portfolios, random investment choices, 
19.	Dynamic investment and consumption strategies: Merton model, 
20.	Performing rolling aggregations and regressions, bias-variance tradeoff, 
21.	Intertemporal portfolio choice and out-of-sample performance of optimized portfolios, 
22.	Strategy backtesting and optimization: data snooping, cross-validation, model overfitting, parameter regularization, 

### extract R chunks into .R file

# loop to extract R chunks in: C:/Develop/render_scripts.R
# without loop:
library(knitr)
knitr::purl('C:/Develop/R/lecture_slides/data_structures.Rnw', documentation=0)
purl('C:/Develop/R/lecture_slides/dates_time_series.Rnw', documentation=0)
purl('C:/Develop/R/lecture_slides/expressions.Rnw', documentation=0)
purl('C:/Develop/R/lecture_slides/functions.Rnw', documentation=0)
purl('C:/Develop/R/lecture_slides/investment_strategies.Rnw', documentation=0)
purl('C:/Develop/R/lecture_slides/numerical_analysis.Rnw', documentation=0)
purl('C:/Develop/R/lecture_slides/packages.Rnw', documentation=0)
purl('C:/Develop/R/lecture_slides/plotting.Rnw', documentation=0)
purl('C:/Develop/R/lecture_slides/portfolio_construction.Rnw', documentation=0)
purl('C:/Develop/R/lecture_slides/statistics.Rnw', documentation=0)
purl('C:/Develop/R/lecture_slides/R_environment.Rnw', documentation=0)
purl('C:/Develop/R/lecture_slides/risk_models.Rnw', documentation=0)
purl('C:/Develop/R/lecture_slides/time_series_multivariate.Rnw', documentation=0)
purl('C:/Develop/R/lecture_slides/time_series_univariate.Rnw', documentation=0)


##############
### order of topics

R packages

Date and Time Objects
Time Series Objects
Package tseries
Package quantmod

Performing Aggregations Over Time Series
in: investment_strategies.pdf
EWMA strategy heatmaps

simulating geometric Brownian Motion
simulating Ornstein-Uhlenbeck OU process
Regression

plotly
R Markdown documents
shiny apps

Optimization
Principal Component Analysis PCA

time series of investments: time series of returns, chart_Series plot
Cross-validation backtesting
Out-of-sample performance and strategy optimization
Model overfitting
Parameter regularization
Test for data snooping using random data
Optimize strategy that trades on random data to demonstrate that in-sample optimization is misleading
simulate ARIMA and trade it using shiny

parallel computing
parallel backtesting

high frequency data

Fit pairs data into Ornstein-Uhlenbeck OU process
Factor models
Risk-adjusted performance measures

Optimization techniques
Bolker Optimization Methods.pdf
Yollin Optimization.pdf
Boudt DEoptim Large Portfolio Optimization.pdf

In-sample strategy optimization

Bootstrap standard errors of strategy parameters
Strategy backtesting and optimization

Estimating rolling volatility, skewness, kurtosis

Portfolio optimization

downloading fundamental data
downloading data from WRDS

scrubbing high freq data


###############
### to-do list  

+ [ ] adapt from:
Engels Portfolio Optimization.pdf
Demonstrate that efficient frontier is a hyperbola

+ [ ] demonstrate that the efficient frontier is close to a parabola for small standard deviations, and close to a straight line for large standard deviations  
Explain why for small standard deviations, the efficient portfolio returns are proportional to the square root of their standard deviations (for different risk free rates).
Explain why for large standard deviations, the efficient portfolio returns are proportional to their standard deviations (for different risk free rates).
hint: study the efficient portfolio weights and the portfolio leverage.

+ [ ] explain the difference and consequences between using the correlations of simple returns versus correlations of percentage returns

+ [ ] adapt from:
https://rviews.rstudio.com/2017/07/21/visualizing-portfolio-volatility/
https://rviews.rstudio.com/2017/07/18/introduction-to-rolling-volatility/
https://rviews.rstudio.com/2017/07/12/introduction-to-volatility/

+ [ ] add files to NYU Classes:
Storn Differential Evolution.pdf
DEoptim.pdf
DEoptim Introduction.pdf
DEoptim Portfolio Optimization.pdf

+ [ ] adapt from Brian Reich lectures with R code for statistics, optimization, LASSO regression, SVD, PCA, Kalman filter, machine learning
http://www4.stat.ncsu.edu/~reich/BigData/code/

+ [ ] implement Kalman filter in Rcpp
https://github.com/eddelbuettel/rcppkalman
http://dirk.eddelbuettel.com/code/rcpp.kalman.html

+ [ ] apply Kalman filter state space model for calculating trend slope (past returns)
Demonstrate that Kalman filter is equivalent to exponential smoothing.
Demonstrate that Kalman filter achieves a better bias-variance tradeoff than linear regression?
Bruder Momentum Indicators Kalman Filter SVM.pdf  
ZivotYollin2012.pdf
Jingtao Filtering Momentum Strategy.html ?

+ [ ] apply Kalman filter state space model for calculating rolling betas
C:\Research\Academic\Brian Reich\kalman.R
http://bilgin.esme.org/BitsBytes/KalmanFilterforDummies.aspx  
http://intelligenttradingtech.blogspot.com/2010/05/kalman-filter-for-financial-time-series.html  
http://stats.stackexchange.com/questions/8055/how-to-use-dlm-with-kalman-filtering-for-forecasting  
http://stats.stackexchange.com/questions/16841/is-the-kalman-filter-actually-forecasting
http://www.magesblog.com/2015/01/extended-kalman-filter-example-in-r.html  
http://www.bearcave.com/finance/random_r_hacks/kalman_smooth.html
Arnold Kalman Filter Expectation Maximization.pdf  
Tusell Kalman Filtering in R.pdf  
Sorensen Kalman Filter.pdf  
Prado Kinetic Component Analysis Forecasting.pdf  

+ [ ] add to recommended books: Efron book Computer Age Statistical Inference?
https://web.stanford.edu/~hastie/CASI/

+ [ ] replace "look_back" and "win_dow" with "inter_val" ?
\texttt{win\_dow}
\texttt{look\_back}
look_back <- 12
replace "look-back window" with "look-back" in risk_models.Rnw
replace "look-back window" with "look-back interval" in risk_models.Rnw ?

+ [ ] get trial for Techila
https://console.cloud.google.com/launcher/details/techila-public/techila
http://www.techilatechnologies.com/help/techila-distributed-computing-engine/r-techila-distributed-computing-engine.html

+ [ ] explore: 
https://www.portfoliovisualizer.com/
https://www.portfoliovisualizer.com/examples
https://www.portfoliovisualizer.com/rolling-optimization

+ [ ] adapt from package parma Portfolio Optimization: parma Vignette.pdf

+ [ ] demonstrate that investing in the optimal portfolio is a trend-following strategy  

+ [ ] explain difference between cross-sectional momentum and time-series momentum (trend-following)
http://blog.alphaarchitect.com/2017/04/17/does-market-sentiment-help-explain-momentum/
trend-following is trading single asset using many predictors.
momentum is trading several assets by sorting them using many predictors.

+ [ ] distinguish between trend-following and momentum strategies
create simple trend-following and momentum strategies
Lewellen: momentum is cross-sectional ranking, meaning winners outperform losers
Autocorrelation is longitudinal ranking, meaning past performance will continue
Is it possible to have zero autocorrelation, but non-zero momentum?

+ [ ] demonstrate that momentum strategy is able to time the market: the beta changes ahead of market moves
Market timing is the act of moving in and out of the market or switching between asset classes based on using predictive methods such as technical indicators or economic data. 
MarketTiming from PerformanceAnalytics.pdf
CAPM.beta p.30 in PerformanceAnalytics.pdf:
The TimingRatio may help assess whether the manager is a good timer of asset allocation decisions. 
https://www.rdocumentation.org/packages/PerformanceAnalytics/versions/1.4.3541/topics/MarketTiming
http://www.quantsportal.com/introduction-to-market-timing-models/
https://seekingalpha.com/article/3252075-trend-following-doesnt-work-for-stocks
Wermers Market Timing.pdf
Hallerbach Market Timing Strategies.pdf
Henriksson Market Timing.pdf

+ [ ] explain why momentum strategy works, even when trend-following doesn't work
demonstrate that trend-following is very hard to trade, but cross-sectional momentum is easier, because it isolates effect of market beta
create model of several time series, where each time series is random, but differences between them are autocorrelated
There's no autocorrelation of returns, but there's autocorrelation of rank statistics.
study Lewellen: momentum is cross-sectional ranking, meaning winners outperform losers
Autocorrelation is longitudinal ranking, meaning past performance will continue
How is it possible to have zero autocorrelation, but non-zero momentum?

+ [ ] can a momentum strategy based on ranking work even if trend-following doesn't work?

+ [ ] always use expanding look-backs, otherwise model may not have enough data  

+ [ ] create slide with bullet points of backtesting: collect historical data (returns, etc.), aggregate data into performance statistics (Sharpe ratio, etc.), apply trading rule and form portfolio, test portfolio performance out-of-sample
adapt language from Arman Arkilic capstone project.md

+ [ ] create backtesting: at each endpoint rebalance, run models over expanding window, select optimal lamb_da, don't loop over lamb_das 

+ [ ] rework backtesting: in roll_agg() call FUN() and then perform a look_backs loop over the output of FUN(), instead of a look_backs loop over the oh_lc input of FUN(). 
Get rid of the agg_regate() function. 
roll_agg() should perform two loops: 
first, a loop over lamb_das, to run the model function with multiple lamb_da parameters, output is time series of returns, 
second, a look_backs loop over the time series of returns, output is matrix of performance statistics (Sharpe ratios), 
roll_agg() should accept the arguments: x_ts, look_backs, FUN, lamb_das, ...
further improvement: instead of performing sapply() loop over the time series of returns, perform vectorized operation.
roll_agg() should return an time series of performance statistics (Sharpe ratios).

+ [ ] vectorize simu_ewma() with respect to its lamb_da parameter ?

+ [ ] rewrite the Backtesting Framework using exclusively vectorized functions:
introduce improved out-of-sample data notation using period_s
is "periods" needed?
risk_ret_stats() should perform lapply() and return list
split and rename pnl_period()
etf_reg_stats is not defined anywhere in "investment_strategies"
	load it from "time_series_multivariate"

+ [ ] modify slide "Rolling Weighted Aggregations Using Package RcppRoll" in risk_models, and add function filter()

+ [ ] compare speed of filter() with RcppRoll::roll_mean()

+ [ ] demonstrate that a model with more parameters has bigger standard errors than one with fewer parameters, when both models are calibrated on the same data
Is this a manifestation of conservation of entropy: the information in the parameters cannot exceed the information in the data?
Is this a manifestation of the Cramer-Rao bound and Fisher information?
Demonstrate that calibrating a model with more parameters requires more data, to achieve the same parameter standard errors. 
Demonstrate that parameter shrinkage reduces the standard errors, but increases the model bias (bias-variance tradeoff).
DeMiguel Shrinkage Estimators Portfolio Optimization draft.pdf

+ [ ] adapt backtest code from package PMwR
http://enricoschumann.net/R/packages/PMwR/manual/PMwR.html

+ [ ] adapt backtest code from package cv.ts
http://moderntoolmaking.blogspot.com/2011/11/functional-and-parallel-time-series.html
http://moderntoolmaking.blogspot.com/2011/11/time-series-cross-validation-2.html
https://github.com/zachmayer/cv.ts
http://robjhyndman.com/researchtips/tscvexample
# foreach package for parallelized backtesting with foreach
http://blog.revolutionanalytics.com/2009/05/parallelized-backtesting-with-foreach.html
# backtesting with elastic net, LASSO, glmnet and caret
https://quantmacro.wordpress.com/2016/04/26/fitting-elastic-net-model-in-r/

+ [ ] adapt optimization code for models and portfolios from package NMOF
http://enricoschumann.net/NMOF.htm
http://enricoschumann.net/files/NMOFman.pdf
Schumann NMOF Financial Optimisation.pdf
NMOF Financial Optimisation.pdf
NMOF Vectorised Objective Functions.pdf
C:\Users\Jerzy\Documents\R\win-library\3.3\NMOF\book\C-PortfolioOptimization\R
C:\Users\Jerzy\Documents\R\win-library\3.3\NMOF\book\C-EconometricModels\R

+ [ ] analyze package caret to see if it performs loops in R or in C++
https://github.com/topepo/caret

+ [ ] adapt from book R for Data Science

+ [ ] read Jonathan Kinlay articles on linkedin

+ [ ] pkg fImport
yahooBriefing("AAPL")
yahooBriefing

+ [ ] deprecate file: "quantmod examples.R" in C:\Develop\R\scripts
mostly already extracted, except for last example

+ [ ] what is this?
source(file="C:/Develop/R/scripts/vis_portf.R")

+ [ ] topic: simulate Parrondo games

+ [ ] coursera R Data Science Specialization Certificate
https://www.coursera.org/specialization/jhudatascience/1?utm_medium=sem&utm_source=gg&utm_campaign=spn_dss

+ [ ] read: Sornette Power Law Tail Risk.pdf

+ [x] create scatterplot of random portfolios using inverse covariance matrix

+ [x] explain that Capital Market Line represents levered and delevered portfolios  

+ [x] derive minimum variance weights  
http://www.bearcave.com/finance/portfolio_equations/  

+ [x] rename the look-back window for rolling aggregations from win_dow to look_back.

+ [x] replace xts::.subset_xts() with brackets operator []

+ [x] replace function RcppRoll::roll_mean() with filter()

+ [x] move the section "Performing Aggregations Over Time Series" from time_series_multivariate to risk_models



###############
### topics to add

+ [ ] calculate the Kelly formula when the probability of winning is uncertain  
Consider different distributions of the probability of winning.

+ [ ] calculate coefficients of multiple linear regression using function solve()

+ [ ] Ross Bennett:
file:///C:/Research/R/Packages/PortfolioAnalytics%20Bennett/presentation.html
C:\Research\R\Packages\PortfolioAnalytics\R\optimize.portfolio.R
http://blog.streeteye.com/blog/2012/01/portfolio-optimization-and-efficient-frontiers-in-r
http://comisef.wikidot.com/tutorial:tangencyportfolio
http://www.calculatinginvestor.com/2011/06/07/efficient-frontier-1/
http://www.calculatinginvestor.com/2011/06/14/efficient-frontier-part-2/

+ [ ] Guy Yollin package MPO for book "Modern Portfolio Optimization"
C:\Research\R\Packages\mpo\pkg\R
C:\Research\R\Packages\mpo\kirk\MVO\constraints_tutorial.pdf
C:\Research\R\Packages\mpo\kirk\MVO\efront.constrained.r
C:\Research\R\Packages\mpo\kirk\MVO\efrontplot.shiny.R

+ [ ] add package ROI: interface to the Rglpk package and the quadprog package to solve linear and quadratic programming problems  
Solves convex optimization problems: maxmimize portfolio return subject leverage

+ [ ] add package Deoptim: example of portfolio optimization with elastic net shrinkage  
Ardia DEoptim Portfolio Optimization.pdf  
Boudt DEoptim Portfolio Optimization.pdf  
Boudt Asset Allocation Conditional Value-at-Risk Budgets.pdf  
CRAN Task View Empirical Finance
http://cran.r-project.org/web/packages/DEoptim/vignettes/DEoptimPortfolioOptimization.pdf

+ [ ] create estimator of slope (returns), equal to difference of prices over lookback interval, and study the bias-variance tradeoff  
Simulate prices as the sum of deterministic sine function plus stochastic normal noise.
The objective is to estimate the slope of the deterministic sine function.
Create estimator of the slope of prices equal to the difference of prices over lookback interval. 
Demonstrate that the estimator variance increases with shorter lookback interval.
Demonstrate that the estimator bias increases with longer lookback interval.
Calculate the lookback interval with optimal bias-variance tradeoff and best performance.
Demonstrate that the optimal lookback interval increases with higher noise level.

+ [ ] Calculate the lagged correlations between volatility and variance to determine the lead-lag relationship between volatility and variance  
Find which one leads by applying VAR model and Granger causality test.
Demonstrate that volatility lags more for longer lookback intervals.
http://davegiles.blogspot.com/2011/04/testing-for-granger-causality.html  
http://davegiles.blogspot.com/2011/03/when-all-of-children-are-above-average.html
http://davegiles.blogspot.com/2011/10/var-or-vecm-when-testing-for-granger.html
https://quant.stackexchange.com/questions/34460/granger-causality-with-stocks-and-cds
https://quant.stackexchange.com/questions/15948/two-correlated-time-series-driver-and-follower/15950
https://quant.stackexchange.com/questions/14865/detecting-and-measuring-lead-lag-effect
https://en.wikipedia.org/wiki/Granger_causality
Wu Leader Lagged Correlation.pdf
vars Vignette.pdf
VAR Models.pdf
DeMiguel VAR Model Stock Selection Forecasting.pdf
Wu Leader Lagged Correlation
Ni Bayesian VAR Model Estimation.pdf
Barigozzi Nets Lasso Network Estimation for Time Series.pdf

+ [ ] Vector Autoregressive VaR Models
Christian Brownlees VAR autoregressive model with LASSO shrinkage package nets
vars.pdf
https://github.com/ctbrownlees/R-Package-nets

+ [ ] create strategy with EWMA indicator equal to difference of two EWMAs: short lookback interval minus long lookback interval  
Demonstrate that indicator is related to slope of price curve, and plot both.
Calculate correlations between indicators with different EWMA parameters, and create heatmap of correlations over matrix of EWMA parameters, to demonstrate that correlations are very high.
Implement binary trading rule, with the position equal to the absolute value of the lagged EWMA indicator (flips to long when the short EWMA crosses over the long EWMA from below, and flips to short when the short EWMA crosses over the long EWMA from above).
Implement trading rule that trades continuously with position proportional to the EWMA indicator.
Create heatmap of EWMA strategy PnL over matrix of EWMA parameters.
Find optimal parameters in-sample.
Demonstrate that the indicator is autocorrelated, so it may be better to trade on the forecasts of the indicator, instead of the indicator itself.
Demonstrate that the forecasts of the indicator are equal to the indicator differences over a lag period, and are related to the price curvature (second derivative of prices).  Plot the indicator forecasts and the price curvature.
Demonstrate that the indicator forecasts have high variance, so it's better to use more biased forecasts with more lag.
Study the bias-variance tradeoff of the forecasts of the indicator as a function of the lag period.

+ [ ] create simple EWMA strategy: trend-following and mean-reverting
Find optimal parameters in-sample.
Demonstrate that the Sharpe of returns optimized in-sample decrease with the length of time series.

+ [ ] Find optimal in-sample parameters over rolling windows, and demonstrate that optimal parameters have zero autocorrelation to each other.

+ [ ] Create EWMA strategy using average over whole range of parameters, and demonstrate that it outperforms out-of-sample any single EWMA strategy with parameters optimized in-sample.

+ [ ] Demonstrate that trend-following EWMA strategy returns have more positive skew than underlying asset, and mean-reverting strategy returns have more negative skew.
Martin Momentum Skew Returns.pdf
Dao Variance Trend Following Strategies.pdf

+ [ ] demonstrate that the EWMA volatility estimator is an example of shrinkage and bias-variance tradeoff  
Simulate Brownian motion with deterministic, time-dependent volatility, and estimate the volatility using different EWMA lambda parameters.
Calculate the MSE of the volatility estimator, and find the lambda parameter which minimizes the MSE.
Demonstrate that the optimal lambda parameter depends on the signal-to-noise ratio and the rate at which volatility changes.
http://eranraviv.com/shrinkage-in-statistics/

+ [ ] demonstrate bias-variance tradeoff when estimating volatility using EWMA
create study of bias-variance tradeoff using volatility estimation example:  
http://scott.fortmann-roe.com/docs/BiasVariance.html  
create xts of random prices with changing time-dependent deterministic vol parameter,  
estimate volatility use look-back window parameter,  
too short look-back window increases variance,  
too long look-back window increases bias,  
tune filter parameters in-sample: study bias-variance tradeoff,  
create rCharts and shiny visualizations  
plot MSE as function of lambda

+ [ ] demonstrate that for zero correlations, the optimal portfolio coefficients are equal to the t-values (Sharpe ratios) of the assets.

+ [ ] demonstrate that it's always possible to optimize a strategy in-sample, so that it produces profits in almost a straight line, but the profits immediately disappear out-of-sample, as if they were arbitraged away by investors.

+ [ ] simulate Adaptive Asset Allocation strategy: momentum rank + min-variance optimization
Sharpe Adaptive Asset Allocation.pdf
Gestalt Adaptive Asset Allocation.pdf
https://quantstrattrader.wordpress.com/2016/03/01/a-book-review-of-resolve-asset-managements-adaptive-asset-allocation/
ReSolve Asset Management by michael philbrick, adam butler, and rodrigo gordillo
http://www.investresolve.com/
http://www.investresolve.com/robo/research/

+ [ ] simulate momentum strategy based on P/E ratios  
Gray PE Ratio Momentum Stock Forecasting.pdf

+ [ ] simulate momentum strategy Elastic Asset Allocation using package IKTrading
Keller (2014) Elastic Asset Allocation  
https://quantstrattrader.wordpress.com/2015/01/30/comparing-flexible-and-elastic-asset-allocation/  
+ [ ] Flexible Asset Allocation returns algorithm  
Keller Elastic Asset Allocation.pdf  

+ [ ] demonstrate shrinkage and the bias-variance tradeoff applied to multiple regression  
Demonstrate that shrinkage is more powerful when the signal-to-noise is low.
Point out that there is no formula for the optimal amount of shrinkage that should be applied to obtain the lowest MSE, so cross-validation is neeeded to calculate the optimal shrinkage amount. 
http://eranraviv.com/shrinkage-in-statistics/

+ [ ] study intraday seasonality  
Demonstrate intraday volume seasonality in hfreq data.
Calculate intraday seasonality of trading volumes in high frequency data.

+ [ ] adapt from: Harvey Evaluating Trading Strategies.pdf
Harvey Backtesting Data Mining Bonferroni Adjustment SSRN.pdf

+ [ ] simulate binomial volatility pumping harvesting
demonstrate that long-term portfolio returns increase thanks to rebalancing
demonstrate that positive expected logarithmic growth rate can be achieved even when both assets individually have negative expected logarithmic growth rates.
Witte Trading Volatility Pumping Harvesting.pdf

+ [ ] calculate bullish and bearish betas using only positive or negative returns: the difference between bearish minus bullish betas is equal to the convexity
Is this convexity a good indicator?
http://jonathankinlay.com/2017/05/beta-convexity/

+ [ ] principal component analysis PCA adapt from: CFM Principal Component Market Factors.pdf

+ [ ] measures of dispersion: demonstrate that ratio of STDEV over MAD is related to kurtosis  

+ [ ] calculate the standard errors of VaR and CVaR  
demonstrate that the standard error increases with the confidence level, because the number of observations decreases
demonstrate that the standard error decreases as the size of the lookback window increases, because the number of observations increases
show that VaR has a huge standard error and is therefore useless
show that CVaR has a bigger standard error than VaR
CVaR has an even bigger standard error than VaR, and is therefore useless for very large number of risk factors estimated using short span of data. 
Jon Danielsson and Chen Zhou have demonstrated that to accurately estimate CVAR at 5% confidence would require decades of price history, something that simply doesn't exist for many assets.
Danielsson CVAR Estimation Standard Error.pdf
http://www.bloomberg.com/view/articles/2016-05-23/big-banks-risk-does-not-compute
# reproduce these plots
http://www.modelsandrisk.org/VaR-and-ES/

+ [ ] create slides about creating R packages and rcpp packages

+ [ ] create an R package from cpp code and compile it using Rcpp

+ [ ] demonstrate that portfolio optimization is extremely sensitive to small changes in assumptions: plot efficient frontiers for slightly different returns
http://www.pionline.com/article/20031222/PRINT/312220715/markowitz-says-michaud-has-built-a-better-mousetrap
Portfolio optimizers amplify errors in expected returns.

+ [ ] adapt robust portfolio optimization by incorporating estimation errors: 
Lai Robust Portfolio Optimization.pdf
study Lai's NPEB estimator (has great out-of-sample performance)
Ceria Robust Portfolio Optimization.pdf
Portfolio optimization with bootstrap and shrinkage.
Jin Robust Portfolio Optimization.pdf
Ban Robust Portfolio Optimization.pdf
DeMiguel Parameter Uncertainty Multiperiod Portfolio Optimization Transaction Costs.pdf
DeMiguel Shrinkage Portfolio Optimization.pdf
DeMiguel Shrinkage Estimators Portfolio Optimization.pdf
Becker Robust Portfolio Optimization.pdf
Michaud Portfolio Resampling.pdf

+ [ ] constrained portfolio optimization shrinkage  
http://www.finance-r.com/s/efficient_frontier_fPortfolio/complete/  
http://www.finance-r.com/s/simple_portfolio_optimization_tseries/complete/  
http://www.portfolioprobe.com/2011/04/28/a-test-of-ledoit-wolf-versus-a-factor-model  
http://quant.stackexchange.com/questions/10101/portfolio-optimization-shrinkage-of-covariance-matrix-when-data-is-available  
https://systematicinvestor.wordpress.com/2011/11/11/resampling-and-shrinkage-solutions-to-instability-of-mean-variance-efficient-portfolios/  
https://systematicinvestor.wordpress.com/2013/10/29/updates-for-proportional-minimum-variance-and-adaptive-shrinkage-methods/  
http://quant.stackexchange.com/questions/1504/robust-portfolio-optimization-re-balancing-with-transaction-costs  
Golts Constrained Shrinkage Portfolio Optimization.pdf  
Demiguel Shrinkage Estimators Portfolio Optimization.pdf  
Ledoit Wolf Covariance Shrinkage Estimators Portfolio Optimization.pdf 

+ [ ] Michaud Resampled Efficiency Portfolio Optimization (patented)  
Resampled random portfolios performs better out-of-sample.
https://en.wikipedia.org/wiki/Resampled_efficient_frontier
https://newfrontieradvisors.com/Research/Articles/MichaudResampledEfficiency.html  
https://systematicinvestor.wordpress.com/2011/11/11/resampling-and-shrinkage-solutions-to-instability-of-mean-variance-efficient-portfolios/  
Michaud Portfolio Resampling.pdf

+ [ ] demonstrate tha combining the 1/N portfolio with the Markowitz portfolio improves out-of-sample performance  
Adapt from: Tu Rolling Portfolio Optimization.pdf.
The 1/N rule outperforms Markowitz out-of-sample.
The MacKinlay and Pastor strategy also performs well out-of-sample.

+ [ ] adapt from: covmat package for estimating convariance matrices using shrinkage and Random Matrix Theory
https://github.com/rstats-gsoc/gsoc2015/wiki/Covariance-Matrix-Estimators  
https://github.com/arorar/covmat

+ [ ] visualize correlation matrices in R
https://github.com/JamesMarquezDev/Jupyter-Notebooks-Statistic-Walk-Throughs-Using-R/blob/master/correlation_matrices_in_r.ipynb
http://jamesmarquezportfolio.com/correlation_matrices_in_r.html

+ [ ] adapt from Pav code for Cochrane Asset Pricing  
https://github.com/shabbychef/coursera_ap2013  

+ [ ] adapt stochastic time series Feynman-Kac Theorem, Girsanov Theorem from:
Thierfelder Ornstein-Uhlenbeck Process.pdf

+ [ ] adapt from: quantbros  
http://quantbros.com/category/tutorial/

+ [ ] explain Optimism of the Training Error Rate
http://eranraviv.com/optimism-training-error-rate/
https://stats.stackexchange.com/questions/88912/optimism-bias-estimates-of-prediction-error

+ [ ] explain backtest overfitting and the Triple Penance Rule
Prado Portfolio Allocation Trading Meta-Strategies.pdf

+ [ ] explain Fama-MacBeth two-pass regressions to explain cross-sectional returns/values by factors  
Fama-MacBeth two-pass regressions to explain cross-sectional returns/values by factors  
Cochrane Asset Pricing.pdf  
Campbell Market Factors Stock Forecasting.pdf  
Harvey Bootstrap MacBeth Factor Models.pdf  
http://quant.stackexchange.com/questions/16855/how-to-test-the-5-factor-capm-of-fama-french-2014  
http://quant.stackexchange.com/questions/17125/please-give-a-step-by-step-explanation-on-how-to-build-a-factor-model
http://quant.stackexchange.com/questions/8697/r-fast-and-efficient-way-of-running-a-multivariate-regression-across-a-really
factorAnalytics fitTsfm_vignette.pdf

+ [ ] explain Fama-French model, Barra model
http://quant.stackexchange.com/questions/16855/how-to-test-the-5-factor-capm-of-fama-french-2014  
http://quant.stackexchange.com/questions/17125/please-give-a-step-by-step-explanation-on-how-to-build-a-factor-model
http://quant.stackexchange.com/questions/8697/r-fast-and-efficient-way-of-running-a-multivariate-regression-across-a-really
factorAnalytics fitTsfm_vignette.pdf
analyze function fitFfm()  
Perform sorts on the "stock" data frame from factorAnalytics - file Stock.df.RData
stock is used by function fitFfm()

+ [ ] add Cauchy distribution to plotting.Rnw or risk_models.Rnw  
https://rviews.rstudio.com/2017/02/15/some-notes-on-the-cauchy-distribution/

+ [ ] Perform singular value decomposition SVD

+ [ ] estimate correlation matrix for synthetic, colinear time series: study how correlation matrix becomes singular as one column of time series becomes colinear with the others

+ [ ] create slides for categorizing S&P500 constituents using equity sector data.
create cap-weighted sub-portfolios: plot their performance, calculate rolling betas, etc.
Calculate sector correlations and heatmaps.

+ [ ] create slides from homework:
Calculate autocorrelations and partial autocorrelations by hand.

+ [ ] create random OHLC data and pass it through EWMA strategy to test for data snooping

+ [ ] fit calibrate Ornstein-Uhlenbeck OU process
http://r.789695.n4.nabble.com/Ornstein-Uhlenbeck-td2991060.html
https://rpubs.com/snowdj/oualberta
https://renkun.me/blog/2014/04/05/fit-an-ou-process-with-realized-time-series-data.html
multiply returns times lagged prices minus constant
relation of Ornstein-Uhlenbeck OU process to ARIMA

+ [ ] create slides for packages sde and yuima for Ornstein-Uhlenbeck ?
sde.sim()

+ [ ] simulate Ornstein-Uhlenbeck OU process AR(1) model and trade it  
http://quant.stackexchange.com/questions/1260/r-code-for-ornstein-uhlenbeck-process
https://cran.r-project.org/web/packages/Sim.DiffProc/index.html
https://cran.r-project.org/web/packages/yuima/index.html
create scatterplot of returns versus lagged prices
create plot with multiple OU processes
forecast returns and demonstrate that forecasting is easier with stronger mean-reversion  
+ [ ] ARIMA process package urca mean reversion and cointegration - ZORRO code
http://robotwealth.com/exploring-mean-reversion-and-cointegration-with-zorro-and-r-part-1/  
http://robotwealth.com/exploring-mean-reversion-and-cointegration-part-2/  

+ [ ] demonstrate that in backtest, an ensemble of EWMA strategies out-performs any single EWMA strategy out-of-sample
make ensemble weights dependent on correlations, to avoid over-weighting similar strategies
use minimum correlation portfolio model

+ [ ] create rebalancing strategy for portfolio with two assets: stock index plus bond index  
http://www.capitalspectator.com/portfolio-analysis-in-r-a-6040-us-stockbond-portfolio/  
Create portfolio return scatterplot and show that it's negatively skewed, because rebalancing strategy is equivalent to selling put options  
Demonstrate that a strategy using asset rebalancing to maintain constant market value adds risk  
Granger Portfolio Rebalancing Momentum Trend Following.pdf  
Qian Asset Allocation Portfolio Rebalancing Alpha.pdf  
Qian Asset Allocation Portfolio Rebalancing.pdf  

+ [ ] create EWMA mean-reverting strategy with large tail risk: demonstrate that it's like selling far out-of-money options, and that it has very high Sharpe, but that it infrequently blows up

+ [ ] simulate stop loss trading rule, and demonstrate that it only works in trending markets, but loses money in mean-reverting markets

+ [ ] simulate wealth paths for stocks and for lottery tickets, and plot the probability distributions of terminal wealth

+ [ ] simulate a vector of returns from buying lottery tickets, and calculate its mean, standard deviation, skew, and kurtosis
plot the histogram of returns
plot the moments as function of ticket price and payout probability

+ [ ] create Bollinger bands mean-reversion strategy

+ [ ] create interactive dygraphs or plotly by first pre-calculating model output time series and saving to file, and passing the data through plotting function

+ [ ] calculate confidence interval of strategy parameters as function of length of data used for calibration and total number of trades
Show that confidence interval increases with total number of trades, so strategy which trades infrequently requires very long backtest which may exceed available data.
SharpeR Vignette.pdf
Lo Sharpe Ratio Statistics.pdf
http://robotwealth.com/optimal-data-windows-for-training-a-machine-learning-model-for-financial-prediction/

+ [ ] create Rcpp function for range volatility estimator  
http://quant.stackexchange.com/questions/2589/how-to-calculate-historical-intraday-volatility/3264#3264

+ [ ] create slides for Rcpp using Rcpp RFinance_2015.pdf, Rcpp Getting Started.pdf, and RcppExamples.pdf
http://gallery.rcpp.org/articles/first-steps-with-C++11/
http://adv-r.had.co.nz/Rcpp.html

+ [ ] Rcpp: adapt from Farnsworth Econometrics in R.pdf: Calling C functions from R

+ [ ] Rcpp: create simple Rcpp function with logistic map - adapt from LearningRcpp  
https://github.com/rossb34/LearningRcpp

+ [ ] create Rcpp code example from chapter 15.1.2: Matloff book The Art of R Programming
http://adv-r.had.co.nz/Rcpp.html
http://systematicinvestor.github.io/Exponentially-Weighted-Volatility-RCPP

+ [ ] adapt Rcpp C++ code from package fromo by Steven Pav  
https://github.com/shabbychef/fromo

+ [ ] adapt Rcpp C++ code from package roll by Jason Foster  
https://cran.r-project.org/web/packages/roll/index.html  
https://github.com/jjf234/roll

+ [ ] adapt Rcpp C++ code from package RcppRoll by Kevin Ushey  
Install the package RcppRoll as follows:
install.packages("RcppRoll")
https://cran.r-project.org/web/packages/RcppRoll/index.html
https://github.com/kevinushey/RcppRoll

+ [ ] create Rcpp function to perform parallel bootstrap in C++  
http://www4.stat.ncsu.edu/~reich/BigData/code/boot.html
http://www.onthelambda.com/2014/06/27/squeezing-more-speed-from-r-for-nothing-rcpp-style/
https://blog.rstudio.org/2016/01/15/rcppparallel-getting-r-and-c-to-work-some-more-in-parallel/
https://rcppcore.github.io/RcppParallel/
https://github.com/RcppCore/RcppParallel
https://github.com/RcppCore/Rcpp
http://gallery.rcpp.org/articles/rcpp-sgd/

+ [ ] Rcpp examples
http://systematicinvestor.github.io/Exponentially-Weighted-Volatility-RCPP
http://unstarched.net/r-examples/rmgarch/fast-ewma-filtering-of-time-vayring-correlations/

+ [ ] create functions that call ML C++ libraries based on packages RcppShark and RcppMLPACK

+ [x] Perform Principal Component Analysis PCA by hand using optimization
update time_series_multivariate.Rnw

+ [x] simulate Ornstein-Uhlenbeck OU process using Rcpp

+ [x] demonstrate that a combination of momentum and static buy-and-hold strategies produces a better Sharpe ratio than the individual strategies alone

+ [x] create slides for improved version of Performing Overlapping Aggregations in investment_strategies.Rnw

+ [x] create shiny interactive plot of EWMA strategy 

+ [x] demonstrate that returns of trend-following and mean-reverting strategies are negatively correlated
demonstrate that a combination of trend-following and mean-reverting strategies has better Sharpe ratio than the individual strategies

+ [ ] create EWMA and GARCH examples from package GARPFRM  

+ [ ] create option examples from GARPFRM package  
demonstrate that call option returns have more positive skew than underlying asset
C:\Develop\R\fin_engine\vignettes
http://rossb34.github.io/GARPFRM_shiny/
optionSpec()
optionValue()
impliedVolatility()
computeGreeks()


# company identifiers symbols codes

CRSP codes
http://www.crsp.com/products/documentation/entity-keywords-and-usage
CRSP PERMNO, (permanent and unique 5-digit issue identification number assigned by CRSP) of an issue
CRSP PERMCO, (permanent and unique 5-digit company identification number assigned by CRSP) of an issue

SEC EDGAR codes
CIK (Central Index Key) — This is a publicly available number the SEC assigns to each filer. ...
CCC (CIK Confirmation Code) — A filer uses this code, in conjunction with a CIK number, in an EDGAR submission to verify its identity.

###

Sharadar discount
INPAV-100P-HWNT_SF0

###

+ [ ] specify sources of historical point-in-time fundamental data

+ [ ] scrape fundamental data from Yahoo or Google using getFinancials() from package quantmod
compare the fundamental data obtained from different sources
get stock statistics from Yahoo using XML, quantmod, plyr packages
http://allthingsr.blogspot.com/2012/10/pull-yahoo-finance-key-statistics.html
http://stackoverflow.com/questions/3693189/programmatic-api-for-downloading-historical-financial-statements

+ [ ] download from Quandl RAYMOND financial ratios data for a list of companies
Fundamental data on Quandl is all premium.
harmonized database site:quant.stackexchange.com
https://www.quandl.com/data/RAYMOND-Raymond
https://www.quandl.com/data/RAYMOND-Raymond/documentation/documentation
http://quant.stackexchange.com/questions/17315/where-can-i-get-historical-fundamental-data-for-multiple-companies-in-a-single-c
http://quant.stackexchange.com/questions/22339/data-exported-from-capital-iq-factset-bloomberg-compustat

+ [ ] download WRDS fundamental data
https://wrds-web.wharton.upenn.edu/wrds/demo/demoform_compustat.cfm
https://wrds-web.wharton.upenn.edu/wrds/ds/comp/fundafinstat/index.cfm

+ [ ] download from WRDS S&P500 Stock index constituents and prices  

+ [ ] recreate CRSPpanel.txt fundamental financial data for 265 S&P500 stocks  
trellis plots  
nice barchart, dotplot, bwplot, and data munging  

+ [ ] download fundamental financial ratios data using quantmod
# Google query:
r quantmod fundamental data

+ [ ] download U.S. stock fundamental data from simfin, based on reports submitted to EDGAR SEC
https://simfin.com/

+ [ ] create slide for Dow Jones Industrial Average DJIA stock index

# S&P 500 index data
https://github.com/datasets
https://github.com/datasets/s-and-p-500
# List of companies in the S&P 500 index together with associated financials
https://github.com/datasets/s-and-p-500-companies

http://data.okfn.org/data/core/s-and-p-500-companies

https://github.com/alexchinco/CRSP-Data-Summary-Statistics-by-Industry-

+ [ ] adapt from Hugen WRDS Value Strategies.pdf

+ [ ] download data from WRDS onto WRDS cloud  
collect all info in:
C:\Develop\R\scripts\WRDS_data.txt
https://wrds-web.wharton.upenn.edu/wrds/support/Accessing%20and%20Manipulating%20the%20Data/_007R%20Programming/_001Using%20R%20with%20WRDS.cfm
# download WRDS data using package RPostgreSQL
https://iangow.wordpress.com/2011/08/01/wrds-sas-versus-postgresql/
# download WRDS data into R using SAS
https://iangow.wordpress.com/2012/09/03/remote-wrds-sas-from-r/
# download WRDS data using Perl script
https://github.com/iangow/wrds_pg
# Wharton Research Data Services (WRDS) incl CRSP, Compustat, NYSE Trade and Quote
http://wrds-web.wharton.upenn.edu/wrds/
https://wrds-web.wharton.upenn.edu/wrds/about/WRDS%20FAQs.cfm
# WRDS tutorials
https://wrds-web.wharton.upenn.edu/wrds/E-Learning/
http://libguides.library.kent.edu/c.php?g=277981&p=1853494
# TAQMNGR processes raw data from WRDS (Wharton Research Data Service)
http://cran.r-project.org/web/packages/TAQMNGR/
# Java program by bearcave:
http://www.bearcave.com/finance/wrds_data.html
http://stackoverflow.com/questions/34822178/linking-crsp-and-compustat-in-r-via-wrds
download CapitalIQ data  
WRDS access for students
Username	algoport
pass	TandonFre7241

+ [ ] WRDS and R using package DBI
https://wrds-web.wharton.upenn.edu/wrds/support/Accessing%20and%20Manipulating%20the%20Data/_007R%20Programming/_001Using%20R%20with%20WRDS.cfm
https://wrds-web.wharton.upenn.edu/wrds/support/Accessing%20and%20Manipulating%20the%20Data/_001Access%20Methods.cfm

+ [ ] WRDS dataset list
https://wrds-web.wharton.upenn.edu/wrds/tools/variable.cfm
# example SAS queries for TAQ
https://wrds-web.wharton.upenn.edu/wrds/support/Data/_003Sample%20Programs/TAQ/index.cfm

+ [ ] adapt from OTIS Wharton Online Trading & Investment Simulator
https://wrds-otis.wharton.upenn.edu/otis/

+ [ ] adapt from WRDS classroom tools and syllabus topics  
https://wrds-web.wharton.upenn.edu/wrds/classroom/
https://wrds-web.wharton.upenn.edu/wrds/classroom/investments.cfm

+ [x] create shiny for two EWMA strategy, with performance in output

+ [x] add slide for shiny plots

+ [x] create shiny for EWMA model and assign it as homework

+ [x] simulate geometric Brownian motion

+ [ ] slides for package h5 for hdf5 files

+ [ ] slides with script to load and analyze hdf5 file train.h5 with kaggle data

+ [ ] Black-Litterman model
http://www.blacklitterman.org/
https://systematicinvestor.wordpress.com/2011/11/16/black-litterman-model/
https://cran.r-project.org/web/packages/BLCOP/

+ [ ] Neural network trading example package nnet
adapt from: C:/Develop/R/scripts/Torgo_stock_trading.R  
http://www.dcc.fc.up.pt/~ltorgo/DataMiningWithR/code3.html

+ [ ] create XIV VXX ZIV strategies
http://www.wikinvest.com/index/Volatility_Index_(VIX)

+ [ ] Show that any convex combination of efficient frontier portfolios is also an efficient frontier portfolio  
The efficient frontier consists of convex combinations of any two efficient frontier portfolios.  
The variance of a frontier portfolio is equal to the variance of the minimum variance portfolio plus the square of its return minus the return of the minimum variance portfolio.  
Brunnermeier CAPM Model: slide #53 Deriving the Frontier
CAPM Asset Pricing.pdf
Merton Efficient Frontier Portfolio.pdf

+ [ ] Calculate the efficient frontier portfolios as a convex combination of any two efficient portfolios  
Zivot Efficient Portfolios in R  
finish slide The Efficient Frontier and Capital Market Line in portfolio_construction
Select the market portfolio as one portfolio and a portfolio with the maximum expected return as the other portfolio. 
Alternatively, select the minimum variance portfolio as one portfolio and a portfolio with the maximum expected return as the other portfolio. 

+ [ ] adapt bootstrapping efficient frontier from: C:\Research\R\Tutorials\Zivot\Econ 424 files:
bootstrapPortfoliosPowerpoint.pdf
bootstrapPortfolio.R
portfolio_noshorts.R
demonstrate that the standard error of the means is much bigger than that of the standard deviations.
demonstrate that the standard error of the means is of the same order as the means themselves.
demonstrate that the standard error of the standard deviations is one order less than the standard deviations themselves.

+ [ ] create function similar to PerformanceAnalytics function create.Efficient.Frontier()

+ [ ] create portfolio functions:  
Compute global minimum variance portfolio
Compute minimum variance portfolio with target return
Compute tangency portfolio
Compute and plot efficient frontier
Zivot portfolio.r from econ424 - using covariance matrices  
http://faculty.washington.edu/ezivot/econ424/portfolio.r  

+ [ ] add to time_series_multivariate  
show that CAPM holds by construction when the market portfolio is chosen to be the efficient frontier (maximum Sharpe) portfolio.  
CAPM model is another way of saying that the market portfolio is the maximum Sharpe portfolio and lies on the efficient frontier. 
Can Security Market Line (SML) be derived from Capital Market Line (CML)?  
Yes, because if we choose the most efficient portfolio (maximum Sharpe) as the reference (market) portfolio for CAPM, then the idiosyncratic asset returns will have a cumulative sum equal to zero.  
When the market portfolio is chosen to be the maximum Sharpe portfolio, then the sums of idiosyncratic returns are zero, and all assets lie exactly on the Security Market Line (SML). 
When individual asset returns are regressed on the efficient (maximum Sharpe) portfolio returns, then their idiosyncratic residuals are uncorrelated to the efficient portfolio returns, because if they weren't then a more efficient portfolio could be constructed using those residuals.  
But the idiosyncratic returns can be correlated with each other.  
individual asset variance is the sume of beta squared times market variance plus idiosyncratic variance

+ [ ] add to section Portfolio Optimization
two-asset portfolio
portfolio constraints: box and leverage
\subsection{Portfolio Leverage Constraint Optimization}
efficient frontier
portfolio return objectives
https://datashenanigan.wordpress.com/2016/05/24/a-gentle-introduction-to-finance-using-r-efficient-frontier-and-capm-part-1/

+ [ ] fix slide Random Portfolios in portfolio_construction: don't scale by 100 and include risk-free rate  

+ [ ] Kyle Balkissoon overnight effect R/Finance presentation - lame
C:\Research\R\R-Finance 2016\KyleBalkissoon.pdf

+ [ ] Kyle Balkissoon: Portfolio Optimization - only PortfolioAnalytics
http://kkb.io/2016/10/26/portfolio-optimization/

+ [ ] fix lecture slides prepared with older version of package factorAnalytics  

+ [ ] add heatmap to investment_strategies  

+ [ ] demonstrate that an ensemble of VWAP strategies outperforms any single VWAP strategy
an ensemble of VWAP strategies is a combination of VWAP strategies with all possible window parameters.

+ [ ] Jensen alpha examples of how alpha can be generated: either by timing the market and by selecting optimal portfolio ex-post (through hindsight)  
calculate Jensen alpha for SPX (for example) and demonstrate that it's close to zero  
calculate Jensen alpha for timed SPX: buy SPX at lows and sell at highs  
calculate Jensen alpha for ex-post portfolio: optimize portfolio in-sample to obtain highest alpha  

+ [ ] add risk-free rate to PortfolioAnalytics code  

+ [ ] simulate volatility targeting strategy  
https://seekingalpha.com/article/3280795-a-random-beat-down-of-wall-street

+ [ ] add stylized facts of asset return distributions
statistical empirical properties of asset returns
fat tails
time dependent volatility
autocorrelation of volatility
assymetric volatility: higher when prices drop
volume and correlation increase with volatility
Cont Empirical Stylized Facts Asset Returns.pdf
Cont Volatility Clustering Agent–Based Models.pdf

+ [ ] create risk parity strategy
First day of every month, sell all portfolio holdings at market. Same day, buy 50 random stocks from the S&P500 constituents. Weight positions by inverse volatility, i.e. simple vola parity sizing. Always be fully invested.
http://www.followingthetrend.com/2015/06/a-random-ass-kicking-of-wall-street/
# risk parity by Bridgewater Associates
https://www.linkedin.com/pulse/our-thoughts-risk-parity-all-weather-ray-dalio
# review of risk parity
http://unstarched.net/2013/12/17/a-review-of-risk-parity/ 

+ [ ] introduce Hierarchical Risk Parity (HRP), the Gerber Statistic, and the Critical Line Algorithm (CLA)  
http://gallery.rcpp.org/articles/HRP/
https://github.com/RcppCore/rcpp-gallery/blob/gh-pages/src/2016-05-27-HRP.Rmd
http://nextlevelanalytics.github.io/2016/05/30/Gerber_Statistic_and_Hierarchical_Risk_Parity/

+ [ ] Merton model: simulate dynamic investment and consumption strategies  
stochastic control theory 
Merton Dynamic Consumption and Portfolio Choice  
simulate Merton consumption wealth model  
Guasoni Merton Optimal Consumption Utility Shortfall Aversion.pdf  
An Merton Utility Asset Allocation.pdf  
https://en.wikipedia.org/wiki/Intertemporal_portfolio_choice  
https://en.wikipedia.org/wiki/Merton%27s_portfolio_problem  

+ [ ] TTR rolling regression: analyze rollSFM(), and create script with its code, and create example of using rollSFM()
rollSFM()

+ [x] performing rolling aggregations
TTR rolling aggregations:
runSD()
runMedian()
runMAD()
explain, summarize, and benchmark rolling functions over margins:
package stats: runmed()
package zoo: rollmean()
package TTR: runMAD()
package caTools: runmad()

+ [ ] study tenor (maturity) dependence of mean, variance, skewness, and kurtosis
show that skewness and kurtosis decay with time

+ [ ] calculate tail shape of return frequency distribution and demonstrate power law

+ [ ] introduce GARCH models and volatility forecasting  
http://models.cliffordang.com/garch11.R
http://eranraviv.com/multivariate-volatility-forecast-evaluation/
simulate stocks as ARMA + GARCH model
show that it has time dependent volatility
fit stock returns into ARMA + GARCH model
calculate standard errors of GARCH model parameters and demonstrate that GARCH models require large amount of data to calibrate
Brownlees Engle Volatility Forecasting.pdf

+ [ ] add package rugarch  
http://unstarched.net/r-examples/rugarch/a-short-introduction-to-the-rugarch-package/

+ [ ] add package tseries GARCH volatility models  

+ [ ] GARCH volatility models adapt from:
http://quant.stackexchange.com/questions/27755/garch-volatility-modeling-squared-returns-and-convergence?noredirect=1&lq=1
Reider Volatility Stochastic Volatility Models.pdf
Reider GARCH Volatility Models.pdf

+ [ ] show that log of OHLC range is Gaussian and has strong autocorrelation  
Kinlay GARCH Volatility Forecasting.pdf
Alizadeh Range OHLC GARCH Volatility Estimators.pdf
LeBaron Improved OHLC Range Volatility Estimators.pdf

+ [ ] calibrate into simulated GARCH data and show how the standard error of parameter estimates depends on the number of data points

+ [ ] perform backtest of GARCH model, and calibrate it using variance targeting  
use Deoptim
http://unstarched.net/2013/01/07/does-anything-not-beat-the-garch11/
rolling GARCH:
http://stackoverflow.com/questions/25732348/volatility-forecast-with-for-loop-for-garch-family-model
calibrating GARCH model requires a minimum of about 2,000 observations i.e. 10 years of daily data.  
if less than 1,000 observations are available, then better to just pick some reasonable parameter values.  
the intraday seasonality of volatility makes it harder to use intraday data to calibrate GARCH model  
http://www.portfolioprobe.com/2012/07/06/a-practical-introduction-to-garch-modeling/

+ [ ] incorporate very nice GARCH scripts
https://theaverageinvestor.wordpress.com/category/r/
http://www.quintuitive.com/

+ [ ] simulate GARCH model using random returns  
Burns GARCH Modelling.pdf
The persistence of the GARCH(1,1) model depends on the sum of the parameters alpha plus beta. 
The sum of alpha1 and beta1 should be less than 1.  
If the sum is greater than 1, then the volatility is explosive.  
If the sum is equal to 1, then the volatility decays exponentialy after shocks.
The weakness of GARCH model is too fast decay - in practice volatility exhibits long memory. 

+ [ ] calculate PACF and fit GARCH for all the variance estimator methods  

+ [ ] simulate time-varying volatility process
Models of stock returns: Pareto distribution, stochastic volatility, Heston model, 
https://github.com/daleroberts/heston
http://models.cliffordang.com/hestonSV.R

+ [ ] slide Simulating Stochastic Volatility

+ [ ] create Normal mixture model and show that it has fat tails,  
Student t-distribution distribution as model for stocks: power law decay, instead of exponential  
fit returns into Student t-distribution, Cauchy, and Pareto distribution  
explain Method of Moments
explain fitting return time series distribution using expectation-maximization
MASS::fitdistr
Show that the Pareto distribution has infinite variance but has finite MAD.  
show that Normal mixture model is similar to Student's t-distribution  
create distribution with large skew - Poisson  
Shalizi: pareto.R  
http://edge.org/response-detail/25401  
http://datascienceplus.com/modelling-dependence-with-copulas/  
http://stats.stackexchange.com/questions/52609/fitting-t-distribtution-to-financial-data  
# define heteroskedasticity as the variability of the variance
http://www.investopedia.com/terms/h/heteroskedasticity.asp
Heteroskedasticity, in statistics, is when the standard deviations of a variable, monitored over a specific amount of time, are nonconstant. 
Heteroskedasticity often arises in two forms: conditional and unconditional. 
Conditional heteroskedasticity identifies nonconstant volatility when future periods of high and low volatility cannot be identified. 
Unconditional heteroskedasticity is used when futures periods of high and low volatility can be identified.

+ [ ] create GARCH examples from package highfrequency  

+ [ ] High-Frequency Financial Data Analysis
C:\Research\R\Tutorials\Guy Yollin Presentations
HF Tick Data Analysis.pdf
HFDA.pdf

+ [ ] create Risk Measures (VaR and ES) examples from package GARPFRM  

+ [ ] provide examples showing when forecasting and VaR models fail due to human-induced events: CHF currency, corporate events (mergers, takeovers, defaults)

+ [ ] provide example showing when VaR isn't additive (coherent), show that ES is coherent  

+ [ ] generating random OHLC time series  

+ [ ] implement plotting of xts OHLC time series using candleChart()
http://www.quantmod.com/examples/charting/

+ [ ] add example forecasting stock returns using Smarket data from package ISLR James book Statistical Learning in R.pdf

+ [ ] create MUD strategy for SP500 stocks, and show how performance dropped over time  

+ [ ] incorporate simple scripts for Tactical Asset Allocation System by Mebane Faber
http://petewerner.blogspot.com/2012/04/mebane-faber-tactical-asset-allocation.html
https://github.com/petewerner/misc/blob/master/gtaa-script.R

+ [ ] create CAPM examples from GARPFRM package  
C:\Develop\R\fin_engine\vignettes
efficient frontiers
http://rossb34.github.io/GARPFRM_shiny/

+ [ ] bootstrapping time series of prices and OHLC time series in parallel  

The no drift assumption is a good approximation when the dimensionless parameter µvT/s is small

+ [ ] demonstrate that aggregating to longer periods (tenor, time scale) makes the distribution of returns more Gaussian and reduces skew and kurtosis
The distributions of returns are increasingly fat-tailed as data frequency increases (smaller interval sizes) and are hence distinctly unstable.
use function to_period() as follows:
aggregate to longer periods
calculate returns, variance, skew, kurtosis, Sharpe
plot distribution of returns
calculate returns using hfreq prices over non-overlapping periods of varying length (tenor)
calculate at different time agg horizons:
	returns, variance, skew, kurtosis, Sharpe
calculate and study the tenor dependence (term structure) of:
mean, variance, skewness, and kurtosis
show that skewness and kurtosis decay with longer tenor
show that mean returns grow like t, 
variance grows like sqrt(t), 
skewness decays like 1/sqrt(t), 
kurtosis decays like 1/t, 
https://quantivity.wordpress.com/2012/10/23/volume-clock-gaps-and-goog/

+ [ ] demonstrate that using trading time makes the distribution of returns more Gaussian and reduces skew and kurtosis
Easley Volume Clock Trading Paradigm.pdf

+ [ ] create backtesting study of time series data scrubbing using Hampel median filter  
explain Type I and Type II errors
Type I error is rejecting a true null hypothesis
power of test
http://dsp.stackexchange.com/questions/26552/what-is-a-hampel-filter-and-how-does-it-work
https://en.wikipedia.org/wiki/Median_filter
use code from "demo_HighFreq.R" and "hfreq_aggregation.R"
1. create xts of smooth or random prices with changing vol
2. add random jump noise to it
3. filtering define scrubbing function with two params: vol estimation window and noise threshold
apply filtering to remove jump noise by applying: filter function, caTools, TTR, highfrequency package, etc. (compare speed)
http://www.cookbook-r.com/Manipulating_data/Calculating_a_moving_average/
http://stackoverflow.com/questions/743812/calculating-moving-average-in-r
4. optimize filter parameters and create ROC curve
5. add jump noise with variable volatility
6. optimize filter parameters in-sample: study bias-variance tradeoff with regards to window length, Precision and Recall tradeoff
7. create rCharts and shiny visualizations
8. apply best in-sample filter parameters to out-of-sample data
second version:
create a csv file with time series data plus some bad text data 
read csv file and coerce to numeric
format the dates and times
find bad data and scrub it
create zoo and plot it

+ [ ] package ROCR for Visualizing the Performance of Scoring Classifiers

+ [ ] nonlinear time series BDS test
fNonlinear.pdf
tseries.pdf

+ [ ] create plotly portfolo optimization slides
http://moderndata.plot.ly/portfolio-optimization-using-r-and-plotly/

+ [ ] add plotly OHLC chart examples - create account
https://plot.ly/r/
https://plot.ly/javascript/candlestick-charts/
http://moderndata.plot.ly/interactive-r-visualizations-with-d3-ggplot2-rstudio/
http://moderndata.plot.ly/r-python-matlab-dashboards-graphs-with-d3-js-webgl/
http://moderndata.plot.ly/interactive-r-visualizations-with-d3-ggplot2-rstudio/
https://plot.ly/quandl/?code=GOOG/AMEX_LVOL

+ [x] add slide for markdown and knitr documents containing interactive charts
Use blog web pages.

+ [x] explain, summarize, and benchmark rolling functions over endpoints:
rollapply
apply.rolling
period.apply
period.sum

+ [x] show that squared returns are autocorrelated, but squared ranges are not autocorrelated  

+ [x] robust measures of centrality, dispersion, and skewness MAD

+ [x] OHLC variance estimators  

+ [x] explain why range variance estimators have bias and they underestimate variance

+ [x] explain the effect of aggregation frequency and observation (measurement) units on the time scaling of variance  

+ [x] create dygraphs slides for time series

+ [ ] create dygraphs slides for OHLC time series
https://github.com/danielkrizian/rChartsDygraphs
https://github.com/danvk/dygraphs/pull/538
http://dygraphs.com/tests/plotters.html

+ [ ] create plotly slides for OHLC time series
http://moderndata.plot.ly/candlestick-charts-using-plotly-and-quantmod/

+ [ ] convert all lectures from Sweave LaTeX to knitr R Markdown ?  what about two-column layout?
http://jeromyanglim.blogspot.com/2012/06/how-to-convert-sweave-latex-to-knitr-r.html
http://stackoverflow.com/questions/20934148/sweave-to-r-markdown-file-conversion-code-or-converters-available
http://pandoc.org/

+ [ ] create online interactive documents using .Rmd files on RPubs  

+ [x] create package fin_engine, a clone of GARPFRM package  

+ [ ] add utility function for constant relative risk aversion (CRRA)  
https://en.wikipedia.org/wiki/Isoelastic_utility

+ [ ] using hfreq return data, estimate daily data: mean return, variance, skewness and kurtosis
show that daily returns are not autocorrelated, 
show that daily variance is autocorrelated, 
maybe also skewness and kurtosis
fit ARIMA into daily data
fit GARCH model using hfreq data

+ [ ] adapt code from package deSolve DLL models  

+ [ ] Ryan Haffen trelliscope, tessera

+ [ ] create homework based on moving average indicators
Douglas Service: Quantitative Analysis of Dual Moving Average Indicators in Automated Trading Systems
Sample R code from Christian Silva presentation "Moving averages strategies" at R/Finance 2013
http://rpubs.com/silvaac/6165

+ [ ] incorporate ideas from and contribute to Matt Brigida Teaching Resources with R/Shiny
https://github.com/Matt-Brigida

+ [ ] create study of time series forecasting using ARIMA or regression
create synthetic time series using ARIMA
apply various forecasting techniques
introduce confusion matrix and ROC curve
add spurious random predictors, and show that they decrease forecasting performance
discuss Model Variable selection: AIC, AIC, BIC

+ [ ] regression of time series data ARIMA
Lundholm Introduction R Time Series
Regression and time series data
auto.arima() handles order selection and differencing 
(but only checks if errors are stationary).
Model Variable selection
AIC, AIC, BIC

+ [ ] Akaike and Bayesian information criteria AIC BIC

+ [ ] estimate Hurst exponent for an xts time series of prices using variance ratios  
use package pracma 
Demonstrate that if prices follow geometric Brownian motion then the Hurst exponent is equal to 1, 
If prices are mean-reverting then the Hurst exponent is less than 1, 
If prices are trending then the Hurst exponent is greater than 1, 
simulate prices for OU prices and calculate variance ratios for different values of mean-reversion parameter
plot Hurst exponent as function of mean-reversion parameter
# calculate Hurst exponent using variance ratios for non-xts
hurst_exp <- function(da_ta, l_ag=4) {
  len_gth <- length(da_ta)
  var(da_ta[-(1:l_ag)]-da_ta[-((len_gth-l_ag+1):len_gth)])/var(da_ta[-1]-da_ta[-len_gth])/l_ag
}  # end hurst_exp

+ [ ] adapt from testing the Efficient Market Hypothesis
Lo-MacKinlay Variance Ratio Test
https://github.com/StuartGordonReid/emh

+ [ ] adapt from Hurst exponent with Python code
https://robotwealth.com/demystifying-the-hurst-exponent-part-1/
https://robotwealth.com/demystifying-the-hurst-exponent-part-2/
Demonstrate that for short time frames, the Hurst is less than 0.5, so it's better to trade mean-reversion trading strategies. 
Demonstrate that for long time frames, the Hurst is greater than 0.5, so it's better to trade momentum or trend-following trading strategies. 

+ [ ] create slides for mean reversion tests: ADF and Hurst
demonstrate that power of mean reversion tests is weak and it increases with length of time series
apply tests to short samples of time series data and demonstrate that sometimes they are mean reverting  
study Lo and MacKinlay variance ratio test in: 
Kinlaw Variance Ratio Correlation Term Structure.pdf  
packages vrtest and pracma  
https://github.com/cran/pracma/blob/master/R/hurst.R

+ [ ] show that term structure of variance may be caused by autocorrelation
simulate an autocorrelated series and calculate its term structure of variance
plotly or shiny plot the variance ratio as function of autocorrelation
stochastic (unobservable) drift term may cause autocorrelation, even if returns are iid and lognormal
http://www.portfolioprobe.com/2011/11/08/the-mystery-of-volatility-estimates-from-daily-versus-monthly-returns/

+ [ ] expand slide Integrated and Unit-root Processes
explain unit root process
create slide for Augmented Dickey-Fuller ADF test
perform ADF test as function of length "n"
adf.test(cumsum(rnorm(n)))
show that p-val doesn't become big until "n" is big
ADF is weak test (doesn't reject false hypothesis)
compare with ADF test on DAX
create synthetic time series using ARIMA
simulate and plot ARIMA AR(1) processes with different coefficients
show how diverges if unit root
perform ADF test
http://robotwealth.com/exploring-mean-reversion-and-cointegration-with-zorro-and-r-part-1/  
http://robotwealth.com/exploring-mean-reversion-and-cointegration-part-2/  

+ [ ] create slides regression and pairs trading  
# create pairs trading demo:
1. identify cointegrated pairs - heatmap,
2. identify cointegrated portfolios from clustering,
3. test persistence of cointegrated pairs out-of-sample,
4. calculate standard error of cointegration factor, 
5. trade pairs in-sample and out-of-sample,
6. apply ADF test to pairs and portfolios
7. demonstrate that using ensemble of cointegration factors produces higher Sharpe out-of-sample, 
use: ### Cointegration - from R scraps
# Sebastian Fossati - very good time series and cointegration with some R
# Bernhard Pfaff at Invesco: packages urca, vars, evir, FRAPO
# basic pairs trading demo
http://www.rfortraders.com/lecture-4-regression-and-pairs-trading/
http://quanttrader.info/public/testForCoint.html
http://gekkoquant.com/2012/12/17/statistical-arbitrage-testing-for-cointegration-augmented-dicky-fuller/
http://gekkoquant.com/2013/01/21/statistical-arbitrage-trading-a-cointegrated-pair/

+ [ ] trade Hurst model
http://timelyportfolio.blogspot.com/2011/06/exploring-market-with-hurst.html
Qian Rashid Hurst Predictability.pdf

+ [ ] use following data:  
data(package="factorAnalytics")  
C:\Research\R\Packages\factorAnalytics\extdata  
data(package="GARPFRM")  
data(package="mpo")  

+ [ ] QMJ Quality Minus Junk Factor
http://timelyportfolio.blogspot.com/2014/04/all-factors-more-looks.html
qmj package
https://github.com/anttsou/qmj

+ [ ] Supervised Principal Components package superpc  
http://statweb.stanford.edu/~tibs/superpc/
http://statweb.stanford.edu/~tibs/superpc/tutorial

+ [ ] Principal component regression PCR and Supervised Principal Components
http://www.milanor.net/blog/performing-principal-components-regression-pcr-in-r/
write full PCR code, then compare with package roll  
create synthetic data and show that PCR outperforms ordinary regression when noise is high  
show that using all the PCAs is equivalent to ordinary regression
https://en.wikipedia.org/wiki/Principal_component_regression

+ [ ] Principal Component PCA clusters example - adapt
https://plot.ly/r/github-getting-started-for-data-scientists/

+ [ ] Perform k-means clustering by hand and compare to Principal Component Analysis PCA
https://predictivealpha.wordpress.com/tag/random-portfolios/

+ [ ] Higher Moments Factor Models  
Boudt Asset Allocation Utility Higher Moments Factor Models.pdf
Boudt Asset Allocation Higher Moments Factor Models.pdf

+ [ ] Modify Security Market Line?  

+ [ ] Random portfolios  
https://seekingalpha.com/article/3967318-trade-like-chimp-unleash-inner-primate
https://predictivealpha.wordpress.com/tag/random-portfolios/
draw scatterplot of random portfolios, model on:
https://quantstrattrader.wordpress.com/2015/09/10/monte-carlo-in-asset-allocation-tests/  
http://www.portfolioprobe.com/2012/02/27/realized-efficient-frontiers/
Novomestky package: rportfolios  
Random portfolios with constraints: random_portfolios from PortfolioAnalytics  
Stein Random Portfolios Fund Analysis.pdf  
Resampling Methods Bootstrap Cross Validation Random Portfolios  
http://quantbros.com/parallelized-simple-random-constrained-portfolio-generation/
TechilaEfficientFrontier.R
http://www.capitalspectator.com/skewed-by-randomness-testing-arbitrary-rebalancing-dates/  
http://www.capitalspectator.com/using-random-portfolios-to-test-asset-allocation-strategies/  
https://gist.github.com/jpicerno1/fbc2e589023be56dde42  
https://gist.github.com/jpicerno1/af88861bcbbb80687cfb  
http://www.burns-stat.com/documents/tutorials/the-statistical-bootstrap-and-other-resampling-methods-2/  

+ [ ] Add Capital Market Line  
plot efficient frontier plus capital market line
http://zoonek.free.fr/blosxom/R/2012-06-01_Optimization.html  
https://gist.github.com/jpicerno1/565be39ca4226ecd004c  
http://www.capitalspectator.com/efficient-frontier-portfolios-impractical-but-still-useful/  
http://moderndata.plot.ly/portfolio-optimization-using-r-and-plotly/
Portfolio optimization: mean-variance efficient portfolios, efficient frontier, Capital Market Line, in portfolio_construction.Rnw

+ [ ] portfolio optimization with different objective functions - VaR, CVaR,  
Ian Kaplan (UofWash) minimum variance and tangency portfolios, CVaR portfolio optimization, ETF portfolios, Wharton Research Data Service (WRDS) data set and Factor Model Factors  
http://www.bearcave.com/finance/  
using fPortfolio package:  
http://www.bearcave.com/finance/portfolio_equations/  
Shaw Portfolio Optimization CVaR Omega Utility.pdf  
Yollin Optimization.pdf
# uses function portfolio.optim from package tseries
Yollin Portfolio Optimization.pdf

+ [ ] add package tseries portfolio.optim() for calculating mean-variance efficient portfolios  

+ [ ] portfolio optimization using optim  
can mean variance portfolio optimization be converted to min variance optimization ?  
different objective functions,  
constraints

+ [ ] portfolio rebalancing  
C:\Research\R\Packages\PortfolioAnalytics Bennett
C:\Research\R\Packages\PortfolioAnalytics Bennett Random Portfolios Swarm Optimization.pdf
C:\Research\R\Packages\PortfolioAnalytics Bennett\moment_estimation_notes.txt
PortfolioAnalytics Bennett Random Portfolios Swarm Optimization.pdf  
C:\Research\R\Packages\PortfolioAnalytics Bennett  
https://github.com/rossb34/PortfolioAnalyticsPresentation2015  
analyze PortfolioAnalytics function optimize.portfolio.rebalancing()

+ [ ] Zivot bootstrap portfolios - bootstrap mean, sd, weights  
C:\Research\R\Tutorials\Zivot\Econ 424\bootstrapPortfoliosPowerpoint.pdf  
C:\Research\R\Tutorials\Zivot\Econ 424\bootstrapPortfolio.R  

+ [ ] Perform portfolio optimization by hand using matrix algebra, SVD, Cholesky
Pav Markowitz Portfolio Distribution.pdf
http://www.win-vector.com/blog/2010/01/easy-portfolio-allocation/

+ [ ] calculate confidence interval of Sharpe ratio using bootstrap
Demonstrate that the Sharpe ratio confidence intervals are so wide, that it's hard to distinguish between assets with large Sharpe ratios from those with small Sharpe ratios.
Demonstrate that a very long time series is needed in order determine if the Sharpe ratios of two assets are different from each other.
So ranking assets on their trailing Sharpe ratios makes little sense ?
Use SharpeR package by Steven Pav, and also bootstrap. 
Sharpe ratio as Hotelling's t-squared distribution.  
https://github.com/shabbychef  
Pav Sharpe Ratio Notes Hotelling Statistic.pdf  
SharpeR Vignette.pdf  

+ [ ] MarkowitzR package by Steven Pav  
Pav Strategy Overfit.pdf  
Pav Portfolio Optimization.pdf  
Pav Markowitz Portfolio Signal Noise Ratio.pdf  
Pav Markowitz Portfolio Optimization Distribution.pdf  
MarkowitzR Vignette.pdf  
MarkowitzR AsymptoticMarkowitz.pdf  
finding optimal portfolio in-sample is the same as finding optimal strategy in-sample - both are over-fit and require shrinkage  
Britten-Jones Sampling Error Mean-Variance Efficient Portfolio Weights.pdf  

+ [ ] adapt from C:\Research\R\Packages\PortfolioAnalytics\demo\demo_efficient_frontier

+ [x] mean-variance portfolio optimization using quadratic programming package quadprog
http://www.wdiam.com/2012/06/10/mean-variance-portfolio-optimization-with-r-and-quadratic-programming/
http://blog.ryanwalker.us/2014/01/solving-quadratic-progams-with-rs.html
http://blog.streeteye.com/blog/2012/01/portfolio-optimization-and-efficient-frontiers-in-r
https://quant.stackexchange.com/questions/31743/dmat-argument-in-solve-qp-r-function-cov-or-2cov

+ [ ] Guy Yollin functions effFrontier() and maxSharpe() call the function portfolio.optim() from package tseries  
http://blog.streeteye.com/blog/2012/01/portfolio-optimization-and-efficient-frontiers-in-r/  
C:\Research\R\Tutorials\Guy Yollin Presentations  
Levy Alpha Sharpe Portfolio Optimization.pdf  

+ [ ] introduce the Critical Line Algorithm (CLA)  
http://rnfc.org/2015/06/05/Markowitz/
function CCLA()  
Bailey Prado Critical Line Algorithm Portfolio Selection  

+ [ ] introduce the Gerber Statistic  
http://nextlevelanalytics.github.io/2016/05/26/Gerber/

+ [ ] Portfolio Optimization using the Gerber Statistic  
Gerber Statistic Portfolio Optimization.pdf

+ [ ] adapt description of Ultra High-Frequency Data(UHFD) and exchanges from: Brownlees High Frequency Data Management.pdf

+ [ ] using hfreq prices, calculate beta
calculate separate betas using intraday returns and using overnight returns
calculate separate betas using open-to-close returns and using close-to-open overnight returns
test CAPM
Bollerslev High Frequency Market Factors CAPM Model.pdf

+ [ ] add slides to section High Frequency and Intraday Time Series Data in risk_models.Rnw
use HighFreq package slides from 2015 presentations RFinance_2015.Rnw and EARL_Boston_2015.Rnw
Running volatility estimation using OHLC data - compare to closing vol
estimate variance of volatility estimator
Volume-Weighted Average Price Indicator
Running regression estimation using OHLC data - compare to closing regression

+ [ ] develop range OHLC estimators for skewness and kurtosis

+ [ ] introduce seasonal and trend decomposition  
https://anomaly.io/seasonal-trend-decomposition-in-r

+ [ ] study Hawkes process as model for asset returns with decaying skewness and kurtosis  

+ [ ] Kelly criterion
KellyRatio.R
create charts of random time series of wealth with different expected pv and growth rates
create charts of random time series of ruin
create terminal wealth charts
as function of betting fraction
as function of probability
as function of odds

+ [ ] Kelly in R:
simulate binary betting strategy using "for" loops and/or "apply"
then also simulate using vector functions
which betting fraction maximizes expected terminal wealth? - step-wise
which betting fraction maximizes expected growth rate? - Kelly
calculate SR of binary betting strategy
which betting fraction maximizes SR?

+ [ ] Kelly in R:
calculate utility as function of betting fraction, from empirical time series of returns, 
compare with Kelly from variance alone
include skew and kurtosis

+ [ ] Kelly for negative betting fraction (shorting)
Kelly for betting fraction greater than 1 (leverage)

+ [ ] Kelly proofs:
find optimal betting fraction, assuming you know the future number of wins and losses
find max expected log of wins and losses
extend Kelly formula to higher moments

+ [ ] Shlok Datye: Kelly Criterion and Optimal-f
http://shlok.is/thesis
Shlok Kelly Optimal-f Criteria.pdf
# Kelly Criterion and Optimal-f
https://alphaism.wordpress.com/2012/04/13/testing-kelly-criterion-and-optimal-f-in-r/
Vince Kelly Optimal-f Criteria.pdf

+ [x] change start_points in time_series_univariate: make it consistent with HighFreq::roll_apply(): win_dow is the size of the lookback window, equal to the number of data points used for applying the aggregation function (including the current point)  
start_points <-  end_points[c(rep_len(1, win_dow-1), 1:(len_gth-win_dow+1))]
instead of:
start_points <-  end_points[c(rep_len(1, win_dow), 1:(len_gth-win_dow))] + 1

+ [x] review Optimal Mean Reversion Trading: mostly math from his papers  
Redemption Code:	F3P8XXBB7SKVXFZNX6KP
https://bookshelf.vitalsource.com/#/books/9789814725934/cfi/6/2!/4/2/2@0:66.1

+ [x] convert all code from nrow() and ncol() to NROW() and NCOL()  

+ [x] update ETF list and etf_data.Rdata

+ [x] hw/test: eapply over hypothesis tests 

+ [x] create package rutils: Utility Functions for Financial Data Management and Modeling

+ [x] downloading S&P500 stock price data with R
https://grollchristian.wordpress.com/2013/08/07/sp500-stock-price-data/

+ [x] Stock index constituents and meta-data  
https://www.quandl.com/blog/useful-lists

+ [x] download data for all S&P500 stocks from Quandl
Quandl API Key:	pUJi9Mv3V9CD3Js5s7Rx
https://www.quandl.com/blog/quandl-launches-intraday-data-2

+ [x] update HighFreq package

+ [ ] demonstrate that positive correlation doesn't translate into similar long-term returns
develop the contrived hypothetical example in: Kinlaw Variance Ratio Correlation Term Structure.pdf  
demonstrate that the term structure of correlation decreases with tenor  
show that correlation depends on time scale, and decreases with shorter time scale  
on short time scales correlation is very small  
on intermediate time scales correlation is greater  
on long time scales correlation is lower  
study Lo and MacKinlay variance ratio test in: 

# lame
http://stackoverflow.com/questions/25340257/how-to-import-fundamentals-for-stocks-by-using-quandl-package
# GICS Sectors data spreadsheet download
http://stackoverflow.com/questions/11339993/getting-stocks-by-industry-via-yahoo-finance
http://www.reddit.com/r/investing/comments/1f6kjt/anyone_know_where_i_can_find_a_data_set_of/
https://www.quantopian.com/posts/creating-an-algorithm-that-uses-fundamental-data
https://www.quantopian.com/posts/using-the-fetcher-with-quandl

# Stock market historical data
http://opendata.stackexchange.com/questions/4116/stock-market-historical-data

# download hfreq data from Quandl
# get Quandl trial license and download VIX S&P futures data ? use WRDS instead

# create lecture slides for:
https://ropensci.org/
https://plot.ly



###############
### homework topics existing best

## data munging

# Summary: Create a data frame of value ETFs.

# Summary: Perform aggregations on a data frame of panel 
# data using the split-apply-combine procedure. 


## high frequency data

# Summary: Calculate the total yearly trading volumes 
# of SPY, and plot it with custom axis.

# Summary: Perform interval aggregations on an OHLC time 
# series, to obtain an OHLC series with lower periodicity, 
# similar to function to.period() from package xts, or 
# function to_period() from package rutils.

## backtesting models

# Optimize the weights and find the maximum Sharpe 
# for a portfolio with and without the VWAP strategy. 

# Summary: Perform a rolling portfolio optimization 
# over annual intervals, calculate optimized portfolio 

# Summary: calculate a matrix of the best performing ETFs
# in each year.  Create a scatterplot of alphas for the
# years 2008 and 2009.

# Summary: Identify bad data in a time series using 
# a Hampel median filter.  Optimize the filter parameters 

# Summary: Simulate multiple EWMA strategies with 


###############
### homework and test ideas

+ [ ] calculate the probability of obtaining 80 heads in 100 tosses for a biased coin with 60% heads and 40% tails  
Use binomial function, and also use approximation using normal function.

+ [ ] Brownian bridge puzzle: given deck of 52 cards, every time you randomly choose a red card you're account increases by $1, but if you choose black card you're account decreases by -$1
At any point you can choose to continue playing, or to stop and keep your net wins.
The optimal strategy is to stop playing if the current net wins are greater than the expected value of wins from continuing to play.
Calculate the expected value of the optimal strategy, assuming you start with zero in your account.
This puzzle is a free boundary problem related to Brownian bridges:
http://puzzles.nigelcoldwell.co.uk/fourteen.htm
https://math.stackexchange.com/questions/380571/a-boundary-crossing-result-for-discrete-brownian-bridge
https://math.stackexchange.com/questions/638846/running-maximum-for-geometric-brownian-motion
https://math.stackexchange.com/questions/515162/brownian-bridge-distribution-sup-a-leq-u-leq-b-fracw0u-sqrtu1
Law of the iterated logarithm
https://en.wikipedia.org/wiki/Law_of_the_iterated_logarithm
# Solution code using recursive function in R:
stra_tegy <- function(cash, positive, negative) {
  # cat(paste("args=", cash, positive, negative, "\n"))
  pro_b <- positive/(positive + negative)
  if (positive==0)
    max(cash, 0)
  else if (negative==0)
    max(cash + positive, 0)
  else
    max(cash, 
        pro_b*stra_tegy(cash+1, positive-1, negative) + 
          (1-pro_b)*stra_tegy(cash-1, positive, negative-1))
}  #end stra_tegy
stra_tegy(0, 3, 3)
stra_tegy(0, 5, 5)
# Solution code using loops in R:
n_pos <- 26
stra_tegy <- outer(n_pos:0, n_pos:0, function(positive, negative) 
  (negative - positive))
stra_tegy[, n_pos+1] <- 0
stra_tegy[n_pos+1, ] <- n_pos:0
prob_s <- outer(n_pos:0, n_pos:0, function(positive, negative) 
  positive/(positive + negative))
prob_s[, n_pos+1] <- 0
for (i in n_pos:1) {
  for (j in n_pos:1) 
    stra_tegy[i, j] <- max(stra_tegy[i, j], 
                           prob_s[i, j]*stra_tegy[i+1, j] + (1-prob_s[i, j])*stra_tegy[i, j+1])
  for (j in n_pos:1) 
    stra_tegy[j, i] <- max(stra_tegy[j, i], 
                           prob_s[j, i]*stra_tegy[j+1, i] + (1-prob_s[j, i])*stra_tegy[j, i+1])
}  # end for
stra_tegy[1, 1]

+ [ ] calculate the frequency distribtution of the maximum value of a Brownian bridge process
http://risklatte.com/Articles/QuantitativeFinance/QF176.php
Brownian bridge process can describe the price of a risk-free bond as it approaches maturity.
https://quant.stackexchange.com/questions/10960/usage-of-brownian-bridge
https://quant.stackexchange.com/questions/31036/brownian-bridge-density-and-risk-neutral-density-for-derivative-pricing
https://quant.stackexchange.com/questions/10960/usage-of-brownian-bridge

+ [ ] create plot of Market portfolio weights as a function of the risk free rate  
Create plot of the returns and standard deviation of the Market portfolio as a function of the risk free rate.
Demonstrate that the Market portfolio depends on the risk free rate: higher risk free rate forces higher standard deviation.
Demonstrate that for larger risk-free rates, the market portfolio is more highly levered, with a smaller weight for bonds  

+ [ ] update: create plot with multiple Capital Market Lines (CML) and Market Portfolios

+ [ ] calculate and plot the efficient frontier using the quadprog package
http://blog.streeteye.com/blog/2012/01/portfolio-optimization-and-efficient-frontiers-in-r

+ [ ] create shiny app for efficient frontier, with inputs for risk_free, correlation, and individual asset returns  

+ [ ] create estimator of price curvature (second derivative), and repeat all the tasks for the estimator of slope (returns)
Demonstrate that the noise level has an even greater effect.

+ [ ] demonstrate that long-term returns are dominated by the tails of the return distribution:
calculate wealth of S&P 500 Index if investor avoids the 10 worst trading days, or misses best trading days.

+ [ ] select random sub-portfolios from S&P index
demonstrate that most of them underperform index, and calculate percentage that underperform index
demonstrate that underperformance increases with time

+ [ ] calculate the number of years of data needed to select the best manager, with 95% confidence, as function of excess Sharpe ratio
adapt from select_manager.R and select_manager.Rmd
plot with plotly

+ [ ] provide trading strategy code with data snooping, and ask students to fix it

+ [ ] add transaction costs to simu_ewma()

+ [ ] create random OHLC data and pass it through EWMA strategy to test for data snooping

+ [ ] perform backtest of strategy which rebalances at every point (without endpoints), using only vectorized functions

+ [ ] perform backtest of strategy which chooses best and worst performing ETFs based on their Sharpe ratios 
scale weights so that strategy volatility is constant

+ [x] calculate backtest performance as function of meta-parameters: look-back interval
optimize meta-parameters

+ [x] create functional which performs backtest 
arguments: time series of past_rets and fwd_rets, 
output: time series of backtest returns

+ [x] create functional which performs look-back and look-forward aggregations using single lapply() loop
arguments: agg_fun=sum, re_turns, end_points?, look_back, re_balance,
output: time series of past_rets and fwd_rets

+ [x] calculate time series of model returns using parallel parLapply()

+ [ ] calculate correlation matrix of returns from ensemble of EWMA strategies

+ [ ] create data frame with latest fundamental data for S&P500 companies from usfundamentals data

+ [ ] create time series of fundamental data for MSFT from usfundamentals data

+ [ ] create time series of S&P500 stock fundamental data since 2011, using data files from Linelane
C:\Develop\data\usfundamentals

+ [ ] create R Markdown document containing dygraphs and plotly plots

+ [ ] perform non-overlapping aggregations using roll_agg(): volume, volatility, regress - already assigned ?

+ [x] download U.S. stock fundamental data from Linelane, based on reports submitted to EDGAR SEC
http://usfundamentals.com/
https://www.reddit.com/user/usfundamentals
C:\Develop\data\usfundamentals
https://www.reddit.com/r/investing/comments/4qxjr6/ive_processed_1tb_of_secs_data_to_extract/

+ [ ] load BRK-B, BF-B, and a few other stocks into existing environment object, without reloading stocks already the environment
provide students with existing environment object

+ [ ] calculate cap-weighted sub-portfolios for industry, size, and quality sub-portfolios for the S&P500 stocks
calculate monthly performance tables and rank the industries
determine if the rankings are persistent (autocorrelated) or not

+ [ ] create cap-weighted, price-weighted, and equal-market-value-weighted portfolios
rebalance weekly the equal-market-value-weighted portfolio
calculate the PnL from the rebalancings

+ [ ] rebalance monthly two-asset portfolio to maintain: equal market value weights, equal risk weights  
make sure to rebalance on the last workday of every month  

+ [ ] subtract two lagged columns of OHLC time series by using as.vector()
jump_s[which_periods] <- as.vector(oh_lc[which_periods, 1]) - as.vector(oh_lc[which_periods-1, 4])

+ [ ] recreate function remove_jumps() to remove overnight close-to-open jumps from OHLC  

+ [ ] find the minimum volatility portfolio, loop over volatility and find maximum return portfolios (that's efficient frontier), and plot the efficient frontier  

+ [ ] what is CAPM alpha of VWAP strategy?
where is VWAP strategy on CAPM scatterplot?
draw the Efficient Frontier
Is it possible to combine SPY with VWAP strategy to achieve higher Sharpe than either of them alone?

+ [x] create functional which performs overlapping aggregations using lapply()
roll the function simu_ewma() over overlapping windows, and collect statistics
find optimal parameters and apply them out-of-sample

+ [x] create shiny for simu_ewma() trading an Ornstein-Uhlenbeck process

+ [x] trade an Ornstein-Uhlenbeck process using simu_ewma()

+ [x] loop over correlations in two-asset portfolio, find maximum Sharpe, and plot efficient frontiers in different colors  

+ [x] calculate number of trades in EWMA strategy as function of lambda decay parameter, and create shiny

+ [x] create function for trading strategy with two EWMA, and plot prices with two EWMA plus shading

+ [x] create shiny for two EWMA strategy, with two sliders and also input for window size

+ [ ] calculate volatility, skew, and kurtosis over non-overlapping intervals
create scatterplot of skew or kurtosis as function of volatility
show that in periods of high volatility the kurtosis is lower

+ [ ] MUD statistical arbitrage trading strategy: sell the quantile of stocks that are up the most, and buy the quantile that are down the most  

+ [x] Perform aggregations over OHLC to reproduce function to_period() from package rutils  

+ [ ] calculate the standard errors of all the different TTR variance estimators using parallel bootstrap
meth_ods <- c("close", "garman.klass", "rogers.satchell", "gk.yz", "yang.zhang")
boot_strap <- sapply(1:100, function(x) {
# create random OHLC
  oh_lc <- HighFreq::random_ohlc()
# calculate variance estimates
  sapply(meth_ods, function(meth_od) {
    sqrt((6.5*60)*mean(na.omit(TTR::volatility(oh_lc, N=1, calc=meth_od))^2))
  })  # end sapply
})  # end sapply

+ [x] calculate volatility estimates using all the different "calc" methods in function volatility() from package TTR  

+ [x] calculate daily close-to-open volatility and open-to-close volatility

+ [ ] recursively rbind() a list of objects, such as xts time series - reproduce do_call_rbind()

+ [x] convert the date and time to different time zones  

+ [x] perform sorts on the data frame in CRSPpanel.txt

+ [x] create a vector of dates that are the last workdays of every month  

+ [ ] calculate standard deviation, skewness, and kurtosis of SPY returns in each year using sapply loop  
plot histograms of returns in each year in panels

+ [ ] calculate SPY moments in each month, in each year, 

+ [ ] benchmark runmed with runquantile and runMedian
benchmark TTR::runMAD() with caTools::runmad()

+ [ ] calculate standard errors of variance estimators using bootstrap - parallel version

+ [ ] reproduce function melt() from package reshape2
http://stackoverflow.com/questions/3777174/plotting-two-variables-as-lines-using-ggplot2-on-the-same-graph
http://www.wekaleamstudios.co.uk/posts/melt/

+ [ ] calculate rolling/sliding volatility
regress against volume
regress levels and changes in levels at different horizons
extract stats into vector
perform sapply over window size and agg horizons
select different market regimes

+ [ ] explain Sharpe ratio as a t-statistic
simulate Sharpe ratios
create distribution of Sharpe ratios

+ [ ] create function that performs hypothesis testing in a loop over parameters
create wrapper function for hypothesis testing functions

+ [x] calculate data frame of hypothesis test statistics for returns data
sapply over sym_bols and extract:
Shapiro-Wilk Test of Normality
Jarque-Bera Test of Normality
sort by most/least normal
save to comma-delimited CSV file

+ [ ] calculate data frame of perf stats for price data and
create data frame
save to comma-delimited CSV file
use table.Stats()
sd, MAD, skew, kurt, alpha, beta, max drawdown, 

+ [ ] expand code from slide:
Downloading Time Series Data Using Package quantmod

+ [ ] extract "Adjusted" and "Volume" columns
etf_series_ad <- do.call(merge, 
                  eapply(env_data, Ad)[sym_bols])

plot with quantmod
chartSeries(blah, theme=chartTheme("white"))
chart_Series(blah, name="SPY")


+ [ ] Reading and Writing data frame or xts Series With Date-time Index from txt and csv files


+ [ ] idea for homework:
modify get.hist.quote to download from any URL
add extra argument for URL, with default:
http://ichart.yahoo.com/table.csv


+ [ ] idea for homework:
provide list of tickers
tickers for Asset Allocation exercises
sym_bols <- c("VTI", "VEU", "IEF", "VNQ", "DBC", "XLY", "XLP", "XLE", "XLF", "XLV", "XLI", "XLB", "XLK", "XLU", "IWB", "IWD", "IWF", "IWM", "IWN", "IWO", "IWP", "IWR", "IWS", "IWV", "IWW", "IWZ")

? download descriptive data ticker (name, industry, sector, etc.)
? format data frame of descriptive data: columns and rows

read etf database file called "etf_list.csv" into data frame called "etf_list", using "read.csv"
subset etf_list to include only those ETF's in sym_bols, using "%in%" operator

create a data directory on your computer, and save all files to that directory 
remember the location of that data directory for future use
? save description data to CSV file


? using description data frame

download 10yrs of data for list of sym_bols, and call it "zoo_series"
Use get.hist.quote() and lapply() loop,
For each sym_bol download fields "AdjClose" and "Volume",
the zoo_series data lapply returned is a list - each list element is a zoo object,
assign names() attribute to zoo_series, equal to sym_bols vector - result should be named list,

flatten zoo_series into a single zoo object, using do.call() and merge(),
assign new names() to zoo_series, in the format "XLI.Close", "XLI.Volume", etc.
Use sapply() and paste(),



###############
### save data for future load

save(env_data, sym_bols, etf_series_ad, etf_rets, etf_list, ret_stats, etf_perf_stats, file='etf_data.Rdata')

save(
maxSR_DEOpt, maxSR_DEOpt_xts, maxSR_ROI, maxSRN_DEOpt, maxSRN_DEOpt_xts,
maxSTARR_DEOpt, maxSTARR_DEOpt_xts, maxSTARR_RP, minES_ROI, minES_ROI_xts,
plot_portf, portf_init, portf_maxSR, portf_maxSRN, portf_maxSTARR,
portf_minES, portf_names, risk_ret_points,
weights_1h, weights_2h,
period_stats, pnl_xts,
file="C:/Develop/data/portf_optim.Rdata")

###############
# end save data for future load



###

# Dupoyet High Frequency Self Organizing Critical Markets

# LeBaron Stock Momentum Volume.pdf
LeBaron Improved Range Volatility Estimators.pdf

# ETF Sector Rotation Strategy
http://www.etfscreen.com/sectorstrategy.php
http://systematicinvestor.wordpress.com/2011/12/06/multi-asset-backtest-rotational-trading-strategies/

# Ekholm Decomposition of Hussman Strategic Growth (HSGFX) - uses Fama/French factors
https://gist.github.com/timelyportfolio/9b962f7c391c492bfe35
# function
https://gist.githubusercontent.com/timelyportfolio/e5728c8c7fb45dbdb6e0/raw/e124379f19225fcdee18f30cb848da6fc6cae764/ekholm.R
http://timelyportfolio.blogspot.com/2014/10/selectionshare-timingshare-masterfully.html

# use of systematic investor part 1.r
http://timelyportfolio.blogspot.com/2012/02/simplified-example-of-systematic.html
https://gist.github.com/timelyportfolio/1793607


# Yahoo explains its data
https://help.yahoo.com/kb/finance/historical-prices-sln2311.html


########################
### emails announcements

Marto Capital is looking for an intern to help in developing risk parity and alpha strategies.  The strategies can invest in interest rate futures, bonds, currencies, and commodities, and they depend on macroeconomic data such as inflation, GDP growth rates, etc.
The job requires knowledge of econometrics, financial markets, and R programming.

Please contact Michael Marco, Director of Research, at:
michael.marco@martocapital.com

##

Please change your default settings in Linkedin so that you receive alerts for new postings.

##

I recommend that you first take FRE6871 R in Finance, which also will contain very valuable material that can be applied to investing.  

Dear Students,
Welcome to FRE7241 Algorithmic Portfolio Management.  Please see attached the syllabus. 
I'm glad to see that so many students have registered for this course.  In this course you'll learn how to apply the R programming language to quantitative portfolio management, like volatility forecasting, the Capital Asset Pricing Model (CAPM), portfolio optimization, and active portfolio management strategies.  You'll also learn how to apply machine learning techniques, like model parameter regularization (shrinkage), strategy backtesting (cross-validation), and the bias-variance tradeoff. 
But I must warn you that many students find this course to be difficult.  The R language is considered to be very challenging, so this course requires strong programming skills and experience.  Students should therefore have extensive programming experience with the R language and other languages such as C++ or Python.  

The course FRE6871 R in Finance is designed as an introduction to R, and to important applications to finance, like building credit scoring models using logistic regression, and pricing options using Monte Carlo simulation.  FRE7241 Algorithmic Portfolio Management is designed as a followup course for teaching applications of R to portfolio management.  I recommend taking these courses either sequentially (first FRE6871 and then FRE7241) or concurrently.

Students with less programming experience are encouraged to first take FRE6871 R in Finance.  Students should also have knowledge of basic statistics (random variables, estimators, hypothesis testing, regression, etc.)

It may be helpful for you to prepare by taking some free online courses: 
http://tryr.codeschool.com/
https://www.datacamp.com/courses/free-introduction-to-r
https://www.datacamp.com/courses/intermediate-r
https://www.datacamp.com/introduction-to-statistics
https://www.datacamp.com/courses/statistical-inference-and-data-analysis

I've uploaded the syllabus and other course materials to NYU Classes.

You may download the previous lecture slides from here:
https://drive.google.com/drive/u/1/folders/0Bxzva1I0t63vVGEtaXNIY1JMa00

Regards,  Jerzy Pawlowski
NYU Tandon, Finance and Risk Engineering

Dear Students,
Below is the link to the survey results for the FRE7241 course.  13 students answered so far, and the feedback is pretty positive.  But one area that still needs improvement are test instructions.

https://www.surveymonkey.com/results/SM-P76ZVKKJ/

### TA

Can you please send a message to all students via NYU Classes announcing that you will be the TA?
Also please ask students for the most convenient time for office hours, and then announce to them when you'll be holding office hours.
Please read the first lecture slides with instructions for grading and submission of assignments.


### Google drive

Dear Students,
I've uploaded many lecture slides to Google drive:
https://drive.google.com/folderview?id=0Bxzva1I0t63vVGEtaXNIY1JMa00&usp=sharing

I encourage you to study them, and I welcome your questions via NYU Classes forums or in class.


### grading

Dear Students,
As stated in the FRE6871 syllabus: 
"The final course letter grade will be derived from the cumulative scores obtained for all the homeworks and tests."
However, there is no fixed formula for assigning a letter grade from the cumulative score.  Over half of students received letter grades of "A" or "A-", which I think is very generous.

### tests

Dear Students,
Please upload your test file to NYU Classes by 7:00 PM.

Dear Students,
Here are some suggestions that may help you on the tests.

Don't leave assignments unanswered because you won't get partial credit.  At least try to copy some lecture code that makes sense for the assignment.
First, search the lecture code for keywords and function names mentioned in the instructions.
Second, copy lecture code that makes sense for the assignment.
Third, modify that lecture code as best you can.
Fourth, ask for hints from me.

Dear Students,
There will be an in-class test this Tuesday, October 4th.
The test will start at 6:30 PM, and will last 60min until 7:30 PM.
I will upload the test file at 6:30 PM to NYU Classes.
The lecture will start at 6:00 PM, as usual.  
You must bring your laptops and be able to log into WiFi.

The test will be based on lecture notes, so please study the topics below.

In Part I you will be asked to perform the following:
Apply the function filter_prices() from test #3 over overlapping 12-month intervals in the past. 
Define end points at the end of each month using function endpoints() from package xts.
Calculate a time series of trailing 12-month optimal thresholds, and the associated true positive and false positive rates, using function sapply() and an anonymous function.
Calculate the trailing 12-month volatility, defined as the standard deviation of daily returns, using functions sapply() sd(), index(), xts(), and diff_xts() from package rutils.
Plot in multiple panels using the functions chart_Series() and add_TA().
Plot scatterplots using function plot(). 

In Part II you will be asked to perform the following:
Create a function which calculates the volume-weighted average price (VWAP) of an OHLC time series.
The function should return an xts series with a single column containing the VWAP of the adjusted close prices.
You can use functions Ad(), Vo() and roll_sum() (defined in the lecture slides).
You can also use functions paste0(), strsplit(), and colnames(), to change the column name.
You cannot use for() or sapply() loops of any kind.
Calculate the same VWAP using function VWAP() from package TTR. 
Find which elements are significantly different between the two results (absolute difference is greater than 0.01).
Benchmark the speed of of the two functions using function microbenchmark() from package microbenchmark.
Find the crossing points of VWAP with prices, and create plots with background shading, using functions chart_Series() and add_TA().


benchmark it to function VWAP()
# from package TTR, and create plots.


Performing hypothesis tests and extracting test statistics.
Plotting scatterplots of test statistics. 
Performing apply() and sapply() loops over vectors. 
Plotting xts series using chart_Series() from package quantmod. 
Passing arguments to functions through the dots "..." argument of sapply(). 
Sorting data frames on columns.
Saving data frames to comma-delimited CSV files.
Calculating Median Absolute Deviation over a rolling window.
Lagging and advancing time series.
Identifying bad data in a time series using a Hampel median filter.  
http://www.mathworks.com/help/signal/ref/hampel.html
http://dsp.stackexchange.com/questions/26552/what-is-a-hampel-filter-and-how-does-it-work
Identifying type I and type II errors in hypothesis tests. 
Plotting Receiver Operating Characteristic (ROC) curves. 
http://www.joyofdata.de/blog/illustrated-guide-to-roc-and-auc/
Optimizing filter parameters in-sample, and backtesting their performance out-of-sample. 


Formatting dates into months and years. 
Using anonymous functions with apply(). 
Performing apply() and eapply() loops over matrices, data frames, xts series, and environments. 
Extracting objects from environments using get(). 
Flattening lists using do.call() and rbind() or merge().
Calculating equally spaced end points over OHLC time series. 
Performing interval aggregations over OHLC time series.
Plotting with custom "x" axis using plot() and axis(). 

Coercing integers and strings to "POSIXct" date-time objects. 
Converting dates into days of the week. 
Using functions from package lubridate, 
Converting the date and time to different time zones.

Calculating downside deviations, and Sortino and Calmar ratios. 
Defining objective functions for portfolio optimization. 
Performing portfolio optimizations using optim(). 
Plotting scatterplots of random portfolios. 

Searching in strings for sub-strings using grep() and glob2rx(). 
Extracting columns from OHLC data. 
Extracting data from output of function table.Drawdowns(). 
Assigning objects to environments using assign(). 
Invisibly returning values using invisible(). 
Creating functions that produce side effects. 
Subsetting data frames using logical operators. 
Subsetting xts series to specified dates and endpoints. 
Extracting the time index from xts series. 
Converting dates into days of the week. 
Calculating percentage returns from prices. 
Coercing integers and strings to "POSIXct" date-time objects. 

You will need to use the following functions:
coredata(), unname(), shapiro.test(), jarque.bera.test(), sapply(), na.omit(), t(), plot(), text(), order(), write.csv(), TTR::runMedian(), TTR::runMAD(), rutils::lag_xts()

seq(), as.Date(), Sys.Date(), weekdays(), as.POSIXct(), Sys.timezone(), format(), Sys.setenv()

You will need to use the following functions:
format(), as.POSIXct(), names(), unique(), index(), coredata(), get(), sapply(), eapply(), is.xts(), xts(), unlist(), dim(), rbind(), merge(), do.call(), plot(), axis(), to_period() from package rutils, the %in% operator, and anonymous functions


You will need to use the following functions:
apply(), sapply(), SortinoRatio(), CalmarRatio(), optim(), xts(), chart_Series(), seq(), runif().

Ad(), Vo(), assign(), table.Drawdowns(), invisible(), grep(), and glob2rx()
grep(), glob2rx(), Cl(), 
sum(), is.na(), read.csv(), write.csv(), endpoints(), weekdays(), index(), tail(), log(), diff(), which(), which.max(), which.min().


###

Dear Students,
Please create your personal account on Stack Exchange:
http://stackexchange.com/

Please add Stack Overflow as one of your communities on Stack Exchange.


###

Dear Students,
Please install the following R packages: lubridate, microbenchmark, devtools, xts, ggplot2, dygraphs, plotly, PerformanceAnalytics, PortfolioAnalytics, and RQuantLib.
You can install them from the "Tools" menu in RStudio, or using the R command:
install.packages(c("lubridate", "microbenchmark", "devtools", "xts", "ggplot2", "dygraphs", "plotly", "PerformanceAnalytics", "PortfolioAnalytics", "RQuantLib"))

Also install the packages TTR, quantmod, rutils, and HighFreq as follows:
devtools::install_github(repo="joshuaulrich/TTR")
devtools::install_github(repo="joshuaulrich/quantmod")
devtools::install_github(repo="algoquant/rutils")
devtools::install_github(repo="algoquant/HighFreq")

Also install Rtools for Windows:
https://cran.r-project.org/bin/windows/Rtools/Rtools33.exe

Or Mac/OSX users install Xcode:
https://developer.apple.com/xcode/

Also install the package factorAnalytics as follows:
install.packages("factorAnalytics", type="source", repos="http://r-forge.r-project.org")

Also install the packages RcppRoll as follows:
install.packages("RcppRoll")

Installing package rgl on a Mac OSX may require installing XQuartz first.
Here are the links:
http://stackoverflow.com/questions/33634871/installing-rgl-package-in-r-mac-osx-el-captian-fixed
http://stackoverflow.com/questions/32747616/installing-accessing-rgl-package-in-mac-yosemite
or:
http://stackoverflow.com/questions/9878693/error-in-loading-rgl-package-with-mac-os-x

Please install the following packages:
dplyr
tidyr
latticeExtra
directlabels

install.packages(c("PortfolioAnalytics", "factorAnalytics", "PortfolioAttribution", "FinancialInstrument", "quantstrat", "blotter"), type="source", repos="http://r-forge.r-project.org")

install.packages("xtsExtra", repos='http://r-forge.r-project.org')

install.packages(c("lmtest", "lubridate", "quantmod", "TTR", "PerformanceAnalytics", "Quandl", "ROI", "ROI.plugin.quadprog", "ROI.plugin.glpk", "DEoptim", "NMOF"))


install.packages(c("dplyr", "ggvis", "shiny", "knitr", "rmarkdown", "nycflights13", "babynames", "forecast", "devtools"))

Regards,  Jerzy Pawlowski
NYU Tandon, Finance and Risk Engineering



########################

Resources:

# ECON 424/AMATH 462:  Introduction to Computational Finance and Financial Econometrics
http://faculty.washington.edu/ezivot/econ424/econ424.htm
http://faculty.washington.edu/ezivot/econ424/424syllabus.htm
http://faculty.washington.edu/ezivot/econ424/424notes.htm
http://faculty.washington.edu/ezivot/econ424/R_hints.htm

# Jeff Ryan
quantmod Workshop.pdf

# quantmod and quantstrat
C:\Research\R\Tutorials\Guy Yollin Presentations
Efficient Indexes Factor Models.pdf
quantmod.pdf

# Vinod good cointegration
C:\Research\R\Tutorials\Vinod\Econometrics\exercises3.pdf

# Tsai Skewness Kurtosis Asset Allocation.pdf

# project ReturnAnalytics (packages  PortfolioAnalytics and PerformanceAnalytics)
C:\Research\R\Packages\PerformanceAnalytics\doc

Meucci Dynamic Allocation Strategies

# Alexios Ghalanos packages rugarch parma
http://unstarched.net/

Bailey Prado Portfolio Optimization Algorithm
Didenko Random Forest Ensemble Learning Portfolio Views
Fossati time series with some R:	C:\Research\R\Tutorials\Fossati\e509

# R examples in:
C:\Research\R\Packages\Quantstrat
http://r-forge.r-project.org/projects/returnanalytics/
http://blog.fosstrading.com/2014/03/intro-to-portfolioanalytics.html

# Steiner Alpha Misleading Performance Measure

# Why do we need a Risk Model
http://systematicinvestor.wordpress.com/2012/02/26/portfolio-optimization-why-do-we-need-a-risk-model/

# R Examples for the second edition
http://www.pfaffikus.de/springerex2.html


