### FRE7241 Algorithmic Portfolio Management
FRE-GY 7241

TA is 
Shu Ye sy1720@nyu.edu
room RH216

# potential TAs
Gaurav Sharma <gaurav.sharma@nyu.edu>
Xiang Li <xiang.l@nyu.edu>

# previous TAs
Jaimin Doshi jbd316@nyu.edu
Luping Liu	ll2525@nyu.edu
Dong Huang dh1716@nyu.edu

# Asha Matthei teaches FRE7801 Quantitative Trading Strategies at NYU Tandon
https://www.linkedin.com/in/ashapaulmatthei

# contribute to Quantitative Finance Collector by Biao Guo Assistant Professor, School of Finance, Renmin University, China
http://www.mathfinance.cn/

http://getprismatic.com/hedge-funds

# request for sample textbooks
I'm an adjunct at NYU Tandon, where I teach graduate courses in applications of R in Finance, and Algorithmic Portfolio Management Using R.  

# Some students have asked me if I would be willing to supervise their projects

# find out more about the Student Response System - for live in-class polling
http://engineering.nyu.edu/academics/support/fitl/srs

# below is a link to my lecture materials. 
https://drive.google.com/open?id=0Bxzva1I0t63vVGEtaXNIY1JMa00



###############
# Syllabus:

1.	Time series analysis and ARIMA models,
2.	Moment estimation: range OHLC estimators of volatility, skewness, kurtosis, and covariance, 
3.	GARCH models and volatility forecasting, 
4.	Models of stock returns: Pareto distribution, stochastic volatility, Heston model, 
5.	Tail risk measures: value-at-risk, conditional value-at-risk, 
6.	Logarithmic utility and risk-adjusted performance measures: Sharpe, Calmar, and Sortino ratios, 
7.	Capital Asset Pricing Model (CAPM): the market portfolio, the Security Market Line, 
8.	Beta-adjusted performance measures: Treynor ratio, Jensen's alpha, information coefficient, 
9.	Factor models: Principal Component Analysis, cross-sectional regressions, Fama-French model, Barra model, 
10.	Pricing anomalies: size, value, momentum, volatility, 
11.	Forecasting models for price returns, stock beta, and correlation, 
12.	Portfolio optimization: mean-variance efficient portfolios, efficient frontier, Capital Market Line, 
13.	Correlation matrix estimation: Cholesky decomposition, Factor Augmented Regression, 
14.	Constrained portfolio optimization: coefficient shrinkage, 
15.	Static asset allocation strategies: cap-weighted and equal-weighted stock indices, all weather portfolios, 
16.	Portfolio management strategies: risk parity, minimum correlation, minimum variance, maximum Sharpe, maximum CVaR, betting against beta, factor investing, smart beta asset allocation, 
17.	Active portfolio management strategies: tactical asset allocation, portfolio rebalancing, Constant Proportion Portfolio Insurance (CPPI), sector rotation, 
18.	Benchmarking portfolio management skill: performance attribution, random portfolios, random investment choices, 
19.	Dynamic investment and consumption strategies: Merton model, 
20.	Performing rolling aggregations and regressions, bias-variance tradeoff, 
21.	Intertemporal portfolio choice and out-of-sample performance of optimized portfolios, 
22.	Strategy backtesting and optimization: data snooping, cross-validation, model overfitting, parameter regularization, 

### extract R chunks into .R file

# loop to extract R chunks in: C:/Develop/render_scripts.R
# without loop:
library(knitr)
knitr::purl('C:/Develop/R/lecture_slides/data_structures.Rnw', documentation=0)
purl('C:/Develop/R/lecture_slides/dates_time_series.Rnw', documentation=0)
purl('C:/Develop/R/lecture_slides/expressions.Rnw', documentation=0)
purl('C:/Develop/R/lecture_slides/functions.Rnw', documentation=0)
purl('C:/Develop/R/lecture_slides/investment_strategies.Rnw', documentation=0)
purl('C:/Develop/R/lecture_slides/numerical_analysis.Rnw', documentation=0)
purl('C:/Develop/R/lecture_slides/packages.Rnw', documentation=0)
purl('C:/Develop/R/lecture_slides/plotting.Rnw', documentation=0)
purl('C:/Develop/R/lecture_slides/portfolio_construction.Rnw', documentation=0)
purl('C:/Develop/R/lecture_slides/statistics.Rnw', documentation=0)
purl('C:/Develop/R/lecture_slides/R_environment.Rnw', documentation=0)
purl('C:/Develop/R/lecture_slides/risk_models.Rnw', documentation=0)
purl('C:/Develop/R/lecture_slides/time_series_multivariate.Rnw', documentation=0)
purl('C:/Develop/R/lecture_slides/time_series_univariate.Rnw', documentation=0)


###############
### to-do list

+ [ ] adapt from book R for Data Science

+ [ ] read Jonathan Kinlay articles on linkedin

+ [ ] pkg fImport
yahooBriefing("AAPL")
yahooBriefing

+ [ ] deprecate file: "quantmod examples.R" in C:\Develop\R\scripts
mostly already extracted, except for last example

+ [ ] what is this?
source(file="C:/Develop/R/scripts/vis_portf.R")

+ [ ] topic: simulate Parrondo games

+ [ ] coursera R Data Science Specialization Certificate
https://www.coursera.org/specialization/jhudatascience/1?utm_medium=sem&utm_source=gg&utm_campaign=spn_dss

+ [ ] read:
Sornette Power Law Tail Risk.pdf


###############
### topics to add

+ [ ] Neural network trading example package nnet
adapt from: C:/Develop/R/scripts/Torgo_stock_trading.R  
http://www.dcc.fc.up.pt/~ltorgo/DataMiningWithR/code3.html

+ [ ] create Rcpp function for range volatility estimator  
http://quant.stackexchange.com/questions/2589/how-to-calculate-historical-intraday-volatility/3264#3264

+ [ ] Show that any convex combination of efficient frontier portfolios is also an efficient frontier portfolio  
The efficient frontier consists of convex combinations of any two efficient frontier portfolios.  
The variance of a frontier portfolio is equal to the variance of the minimum variance portfolio plus the square of its return minus the return of the minimum variance portfolio.  
Brunnermeier CAPM Model: slide #53 Deriving the Frontier

+ [ ] Calculate the efficient frontier portfolios as a convex combination of any two efficient portfolios  
Zivot Efficient Portfolios in R  
finish slide The Efficient Frontier and Capital Market Line in portfolio_construction
Select the market portfolio as one portfolio and a portfolio with the maximum expected return as the other portfolio. 
Alternatively, select the minimum variance portfolio as one portfolio and a portfolio with the maximum expected return as the other portfolio. 

+ [ ] create function similar to PerformanceAnalytics function create.Efficient.Frontier

+ [ ] create portfolio functions:  
Compute global minimum variance portfolio
Compute minimum variance portfolio with target return
Compute tangency portfolio
Compute and plot efficient frontier
Zivot portfolio.r from econ424 - using covariance matrices  
http://faculty.washington.edu/ezivot/econ424/portfolio.r  

+ [ ] add to time_series_multivariate  
show that CAPM holds by construction when the market portfolio is chosen to be the efficient frontier (maximum Sharpe) portfolio.  
CAPM model is another way of saying that the market portfolio is the maximum Sharpe portfolio and lies on the efficient frontier. 
Can Security Market Line (SML) be derived from Capital Market Line (CML)?  
Yes, because if we choose the most efficient portfolio (maximum Sharpe) as the reference (market) portfolio for CAPM, then the idiosyncratic asset returns will have a cumulative sum equal to zero.  
When the market portfolio is chosen to be the maximum Sharpe portfolio, then the sums of idiosyncratic returns are zero, and all assets lie exactly on the Security Market Line (SML). 
When individual asset returns are regressed on the efficient (maximum Sharpe) portfolio returns, then their idiosyncratic residuals are uncorrelated to the efficient portfolio returns, because if they weren't then a more efficient portfolio could be constructed using those residuals.  
But the idiosyncratic returns can be correlated with each other.  
individual asset variance is the sume of beta squared times market variance plus idiosyncratic variance

+ [ ] add to section Portfolio Optimization
two-asset portfolio
portfolio constraints: box and leverage
\subsection{Portfolio Leverage Constraint Optimization}
random portfolios
efficient frontier
portfolio return objectives
https://datashenanigan.wordpress.com/2016/05/24/a-gentle-introduction-to-finance-using-r-efficient-frontier-and-capm-part-1/

+ [ ] Kyle Balkissoon overnight effect R/Finance presentation - lame
C:\Research\R\R-Finance 2016\KyleBalkissoon.pdf

+ [ ] Kyle Balkissoon: Portfolio Optimization - only PortfolioAnalytics
http://kkb.io/2016/10/26/portfolio-optimization/

+ [ ] add package ROI: interface to the Rglpk package and the quadprog package to solve linear and quadratic programming problems  
Solves convex optimization problems: maxmimize portfolio return subject leverage

+ [ ] add package Deoptim  
Ardia DEoptim Portfolio Optimization.pdf  
Boudt DEoptim Portfolio Optimization.pdf  
Boudt Asset Allocation Conditional Value-at-Risk Budgets.pdf  
CRAN Task View Empirical Finance
http://cran.r-project.org/web/packages/DEoptim/vignettes/DEoptimPortfolioOptimization.pdf

+ [ ] fix slide Random Portfolios in portfolio_construction: don't scale by 100 and include risk-free rate  

+ [ ] fix lecture slides prepared with older version of package factorAnalytics  

+ [ ] add heatmap to investment_strategies  

+ [ ] add simulating geometric Brownian motion, and OU process

+ [ ] demonstrate that an ensemble of VWAP strategies outperforms any single VWAP strategy
an ensemble of VWAP strategies is a combination of VWAP strategies with all possible window parameters.

+ [ ] Jensen alpha examples of how alpha can be generated: either by timing the market and by selecting optimal portfolio ex-post (through hindsight)  
calculate Jensen alpha for SPX (for example) and demonstrate that it's close to zero  
calculate Jensen alpha for timed SPX: buy SPX at lows and sell at highs  
calculate Jensen alpha for ex-post portfolio: optimize portfolio in-sample to obtain highest alpha  

+ [ ] add risk-free rate to PortfolioAnalytics code  

+ [ ] simulate volatility targeting strategy  

+ [ ] add stylized facts of asset return distributions
statistical empirical properties of asset returns
fat tails
time dependent volatility
autocorrelation of volatility
assymetric volatility: higher when prices drop
volume and correlation increase with volatility
Cont Empirical Stylized Facts Asset Returns.pdf
Cont Volatility Clustering Agent–Based Models.pdf

- [ ] create risk parity strategy
First day of every month, sell all portfolio holdings at market. Same day, buy 50 random stocks from the S&P 500 constituents. Weight positions by inverse volatility, i.e. simple vola parity sizing. Always be fully invested.
http://www.followingthetrend.com/2015/06/a-random-ass-kicking-of-wall-street/

+ [ ] Merton model: simulate dynamic investment and consumption strategies  
stochastic control theory 
Merton Dynamic Consumption and Portfolio Choice  
simulate Merton consumption wealth model  
Guasoni Merton Optimal Consumption Utility Shortfall Aversion.pdf  
An Merton Utility Asset Allocation.pdf  
https://en.wikipedia.org/wiki/Intertemporal_portfolio_choice  
https://en.wikipedia.org/wiki/Merton%27s_portfolio_problem  

+ [ ] TTR rolling regression: analyze rollSFM(), and create script with its code, and create example of using rollSFM()
rollSFM()

+ [x] performing rolling aggregations
TTR rolling aggregations:
runSD()
runMedian()
runMAD()
explain, summarize, and benchmark rolling functions over margins:
package stats: runmed()
package zoo: rollmean()
package TTR: runMAD()
package caTools: runmad()

- [ ] study tenor (maturity) dependence of mean, variance, skewness, and kurtosis
show that skewness and kurtosis decay with time

- [ ] calculate tail shape of return frequency distribution and demonstrate power law

+ [ ] add package rugarch  
http://unstarched.net/r-examples/rugarch/a-short-introduction-to-the-rugarch-package/

+ [ ] add package tseries GARCH volatility models  

+ [ ] add package tseries portfolio.optim() for calculating mean-variance efficient portfolios  

+ [ ] show that log of OHLC range is Gaussian and has strong autocorrelation  
Kinlay GARCH Volatility Forecasting.pdf
Alizadeh Range OHLC GARCH Volatility Estimators.pdf
LeBaron Improved OHLC Range Volatility Estimators.pdf

+ [ ] calibrate into simulated GARCH data and show how the standard error of parameter estimates depends on the number of data points

+ [ ] perform backtest of GARCH model, and calibrate it using variance targeting  
use Deoptim
http://unstarched.net/2013/01/07/does-anything-not-beat-the-garch11/
rolling GARCH:
http://stackoverflow.com/questions/25732348/volatility-forecast-with-for-loop-for-garch-family-model
calibrating GARCH model requires a minimum of about 2,000 observations i.e. 10 years of daily data.  
if less than 1,000 observations are available, then better to just pick some reasonable parameter values.  
the intraday seasonality of volatility makes it harder to use intraday data to calibrate GARCH model  
http://www.portfolioprobe.com/2012/07/06/a-practical-introduction-to-garch-modeling/

+ [ ] incorporate very nice GARCH scripts
https://theaverageinvestor.wordpress.com/category/r/
http://www.quintuitive.com/

+ [ ] demonstrate intraday volume seasonality in hfreq data

+ [ ] simulate GARCH model using random returns  
Burns GARCH Modelling.pdf
The persistence of the GARCH(1,1) model depends on the sum of the parameters alpha plus beta. 
The sum of alpha1 and beta1 should be less than 1.  
If the sum is greater than 1, then the volatility is explosive.  
If the sum is equal to 1, then the volatility decays exponentialy after shocks.
The weakness of GARCH model is too fast decay - in practice volatility exhibits long memory. 

+ [ ] calculate PACF and fit GARCH for all the variance estimator methods  

+ [ ] create EWMA and GARCH examples from package GARPFRM  

+ [ ] demonstrate bias-variance tradeoff when estimating volatility using EWMA
create study of bias-variance tradeoff using volatility estimation example:  
http://scott.fortmann-roe.com/docs/BiasVariance.html  
create xts of random prices with changing time-dependent deterministic vol parameter,  
estimate volatility use look-back window parameter,  
too short look-back window increases variance,  
too long look-back window increases bias,  
tune filter parameters in-sample: study bias-variance tradeoff,  
create rCharts and shiny visualizations  
plot MSE as function of lambda

+ [ ] simulate time-varying volatility process
Models of stock returns: Pareto distribution, stochastic volatility, Heston model, 

+ [ ] slide Simulating Stochastic Volatility

+ [ ] create Normal mixture model and show that it has fat tails,  
Student t-distribution distribution as model for stocks: power law decay, instead of exponential  
fit returns into Student t-distribution, Cauchy, and Pareto distribution  
explain Method of Moments
explain fitting return time series distribution using expectation-maximization
MASS::fitdistr
Show that the Pareto distribution has infinite variance but has finite MAD.  
show that Normal mixture model is similar to Student's t-distribution  
create distribution with large skew - Poisson  
Shalizi: pareto.R  
http://edge.org/response-detail/25401  
http://datascienceplus.com/modelling-dependence-with-copulas/  
http://stats.stackexchange.com/questions/52609/fitting-t-distribtution-to-financial-data  

+ [ ] create GARCH examples from package highfrequency  

+ [ ] High-Frequency Financial Data Analysis
C:\Research\R\Tutorials\Guy Yollin Presentations
HF Tick Data Analysis.pdf
HFDA.pdf

+ [ ] create Risk Measures (VaR and ES) examples from package GARPFRM  

+ [ ] provide example showing when VAR isn't additive (coherent), show that ES is coherent  

+ [ ] generating random OHLC time series  

+ [ ] implement plotting of xts OHLC time series using candleChart()
http://www.quantmod.com/examples/charting/

+ [ ] add example forecasting stock returns using Smarket data from package ISLR James book Statistical Learning in R.pdf

+ [ ] create MUD strategy for SP500 stocks, and show how performance dropped over time  

+ [ ] create rebalancing strategy for portfolio with two assets: stock index plus bond index  
http://www.capitalspectator.com/portfolio-analysis-in-r-a-6040-us-stockbond-portfolio/  
create portfolio return scatterplot and show that it's negatively skewed, because rebalancing strategy is equivalent to selling put options  
demonstrate that a strategy using asset rebalancing to maintain constant market value adds risk  
Granger Portfolio Rebalancing Momentum Trend Following.pdf  
Qian Asset Allocation Portfolio Rebalancing Alpha.pdf  
Qian Asset Allocation Portfolio Rebalancing.pdf  

+ [ ] incorporate simple scripts for Tactical Asset Allocation System by Mebane Faber
http://petewerner.blogspot.com/2012/04/mebane-faber-tactical-asset-allocation.html
https://github.com/petewerner/misc/blob/master/gtaa-script.R

+ [ ] create CAPM examples from GARPFRM package  
C:\Develop\R\fin_engine\vignettes
efficient frontiers
http://rossb34.github.io/GARPFRM_shiny/

+ [ ] bootstrapping time series of prices and OHLC time series in parallel  

The no drift assumption is a good approximation when the dimensionless parameter µvT/s is small

+ [ ] demonstrate that aggregating to longer periods (tenor, time scale) makes the distribution of returns more Gaussian and reduces skew and kurtosis
The distributions of returns are increasingly fat-tailed as data frequency increases (smaller interval sizes) and are hence distinctly unstable.
use function to_period() as follows:
aggregate to longer periods
calculate returns, variance, skew, kurtosis, Sharpe
plot distribution of returns
calculate returns using hfreq prices over non-overlapping periods of varying length (tenor)
calculate at different time agg horizons:
	returns, variance, skew, kurtosis, Sharpe
calculate and study the tenor dependence (term structure) of:
mean, variance, skewness, and kurtosis
show that skewness and kurtosis decay with longer tenor
show that mean returns grow like t, 
variance grows like sqrt(t), 
skewness decays like 1/sqrt(t), 
kurtosis decays like 1/t, 
https://quantivity.wordpress.com/2012/10/23/volume-clock-gaps-and-goog/

+ [ ] demonstrate that using trading time makes the distribution of returns more Gaussian and reduces skew and kurtosis
Easley Volume Clock Trading Paradigm.pdf

+ [ ] create backtesting study of time series data scrubbing using Hampel median filter  
explain Type I and Type II errors
Type I error is rejecting a true null hypothesis
power of test
http://dsp.stackexchange.com/questions/26552/what-is-a-hampel-filter-and-how-does-it-work
https://en.wikipedia.org/wiki/Median_filter
use code from "demo_HighFreq.R" and "hfreq_aggregation.R"
1. create xts of smooth or random prices with changing vol
2. add random jump noise to it
3. filtering define scrubbing function with two params: vol estimation window and noise threshold
apply filtering to remove jump noise by applying: filter function, caTools, TTR, highfrequency package, etc. (compare speed)
http://www.cookbook-r.com/Manipulating_data/Calculating_a_moving_average/
http://stackoverflow.com/questions/743812/calculating-moving-average-in-r
4. optimize filter parameters and create ROC curve
5. add jump noise with variable volatility
6. optimize filter parameters in-sample: study bias-variance tradeoff with regards to window length, Precision and Recall tradeoff
7. create rCharts and shiny visualizations
8. apply best in-sample filter parameters to out-of-sample data
second version:
create a csv file with time series data plus some bad text data 
read csv file and coerce to numeric
format the dates and times
find bad data and scrub it
create zoo and plot it

+ [ ] package ROCR for Visualizing the Performance of Scoring Classifiers

+ [ ] nonlinear time series BDS test
fNonlinear.pdf
tseries.pdf

+ [ ] create plotly portfolo optimization slides
http://moderndata.plot.ly/portfolio-optimization-using-r-and-plotly/

+ [ ] add plotly OHLC chart examples - create account
https://plot.ly/r/
https://plot.ly/javascript/candlestick-charts/
http://moderndata.plot.ly/interactive-r-visualizations-with-d3-ggplot2-rstudio/
http://moderndata.plot.ly/r-python-matlab-dashboards-graphs-with-d3-js-webgl/
http://moderndata.plot.ly/interactive-r-visualizations-with-d3-ggplot2-rstudio/
https://plot.ly/quandl/?code=GOOG/AMEX_LVOL

+ [x] explain, summarize, and benchmark rolling functions over endpoints:
rollapply
apply.rolling
period.apply
period.sum

+ [x] show that squared returns are autocorrelated, but squared ranges are not autocorrelated  

+ [x] robust measures of centrality, dispersion, and skewness MAD

+ [x] OHLC variance estimators  

+ [x] explain why range variance estimators have bias and they underestimate variance

+ [x] explain the effect of aggregation frequency and observation (measurement) units on the time scaling of variance  

+ [x] create dygraphs slides for time series

+ [ ] create dygraphs slides for OHLC time series
https://github.com/danielkrizian/rChartsDygraphs
https://github.com/danvk/dygraphs/pull/538
http://dygraphs.com/tests/plotters.html

+ [ ] create plotly slides for OHLC time series
http://moderndata.plot.ly/candlestick-charts-using-plotly-and-quantmod/

+ [ ] convert all lectures from Sweave LaTeX to knitr R Markdown ?  what about two-column layout?
http://jeromyanglim.blogspot.com/2012/06/how-to-convert-sweave-latex-to-knitr-r.html
http://stackoverflow.com/questions/20934148/sweave-to-r-markdown-file-conversion-code-or-converters-available
http://pandoc.org/

+ [ ] create online interactive documents using .Rmd files on RPubs  

+ [x] create package fin_engine, a clone of GARPFRM package  

+ [ ] download data from WRDS  
https://wrds-web.wharton.upenn.edu/wrds/support/Accessing%20and%20Manipulating%20the%20Data/_007R%20Programming/_001Using%20R%20with%20WRDS.cfm
# download WRDS data using package RPostgreSQL
https://iangow.wordpress.com/2011/08/01/wrds-sas-versus-postgresql/
# download WRDS data into R using SAS
https://iangow.wordpress.com/2012/09/03/remote-wrds-sas-from-r/
# download WRDS data using Perl script
https://github.com/iangow/wrds_pg
# Wharton Research Data Services (WRDS) incl CRSP, COMPUSTAT, NYSE Trade and Quote
http://wrds-web.wharton.upenn.edu/wrds/
https://wrds-web.wharton.upenn.edu/wrds/about/WRDS%20FAQs.cfm
# WRDS tutorials
https://wrds-web.wharton.upenn.edu/wrds/E-Learning/
http://libguides.library.kent.edu/c.php?g=277981&p=1853494
# TAQMNGR processes raw data from WRDS (Wharton Research Data Service)
http://cran.r-project.org/web/packages/TAQMNGR/
# Java program by bearcave:
http://www.bearcave.com/finance/wrds_data.html
http://stackoverflow.com/questions/34822178/linking-crsp-and-compustat-in-r-via-wrds
download CapitalIQ data  
WRDS access for students
Username	algoport
pass	TandonFre7241

+ [ ] WRDS and R using package DBI
https://wrds-web.wharton.upenn.edu/wrds/support/Accessing%20and%20Manipulating%20the%20Data/_007R%20Programming/_001Using%20R%20with%20WRDS.cfm
https://wrds-web.wharton.upenn.edu/wrds/support/Accessing%20and%20Manipulating%20the%20Data/_001Access%20Methods.cfm

+ [ ] WRDS dataset list
https://wrds-web.wharton.upenn.edu/wrds/tools/variable.cfm
# example SAS queries for TAQ
https://wrds-web.wharton.upenn.edu/wrds/support/Data/_003Sample%20Programs/TAQ/index.cfm

+ [ ] DirkHugen WRDS Value Strategies.pdf

+ [ ] OTIS Wharton Online Trading & Investment Simulator
https://wrds-otis.wharton.upenn.edu/otis/

+ [ ] adapt from WRDS classroom tools and syllabus topics  
https://wrds-web.wharton.upenn.edu/wrds/classroom/
https://wrds-web.wharton.upenn.edu/wrds/classroom/investments.cfm

+ [ ] add utility function for constant relative risk aversion (CRRA)  
https://en.wikipedia.org/wiki/Isoelastic_utility

+ [ ] introduce GARCH models and volatility forecasting  
simulate stocks as ARMA + GARCH model
show that it has time dependent volatility
fit stock returns into ARMA + GARCH model

+ [ ] using hfreq return data, estimate daily data: mean return, variance, skewness and kurtosis
show that daily returns are not autocorrelated, 
show that daily variance is autocorrelated, 
maybe also skewness and kurtosis
fit ARIMA into daily data
fit GARCH model using hfreq data

+ [ ] Adapt code from package roll by Jason Foster  
https://cran.r-project.org/web/packages/roll/index.html  

+ [ ] Adapt code from package deSolve DLL models  

+ [ ] Ryan Haffen trelliscope, tessera

+ [ ] create homework based on moving average indicators
Douglas Service: Quantitative Analysis of Dual Moving Average Indicators in Automated Trading Systems
Sample R code from Christian Silva presentation "Moving averages strategies" at R/Finance 2013
http://rpubs.com/silvaac/6165

+ [ ] incorporate ideas from and contribute to Matt Brigida Teaching Resources with R/Shiny
https://github.com/Matt-Brigida

+ [ ] show that CVAR has a bigger standard error than VAR
Danielsson CVAR Estimation Standard Error
http://www.bloomberg.com/view/articles/2016-05-23/big-banks-risk-does-not-compute

+ [ ] distinguish between trend-following and momentum strategies
create simple trend-following and momentum strategies
Lewellen: momentum is cross-sectional ranking, meaning winners outperform losers
Autocorrelation is longitudinal ranking, meaning past performance will continue
Is it possible to have zero autocorrelation, but non-zero momentum?

+ [ ] create study of time series forecasting using ARIMA or regression
create synthetic time series using ARIMA
apply various forecasting techniques
introduce confusion matrix and ROC curve
add spurious random predictors, and show that they decrease forecasting performance
discuss Model Variable selection: AIC, AIC, BIC

+ [ ] regression of time series data ARIMA
Lundholm Introduction R Time Series
Regression and time series data
auto.arima() handles order selection and differencing 
(but only checks if errors are stationary).
Model Variable selection
AIC, AIC, BIC

+ [ ] expand slide Integrated and Unit-root Processes
explain unit root process
create slide for Augmented Dickey-Fuller ADF test
perform ADF test as function of length "n"
adf.test(cumsum(rnorm(n)))
show that p-val doesn't become big until "n" is big
ADF is weak test (doesn't reject false hypothesis)
compare with ADF test on DAX
create synthetic time series using ARIMA
simulate and plot ARIMA AR(1) processes with different coefficients
show how diverges if unit root
perform ADF test

+ [ ] create slides for mean reversion tests: ADF and Hurst
demonstrate that power of mean reversion tests is weak and it increases with length of time series
apply tests to short samples of time series data and demonstrate that sometimes they are mean reverting  
study Lo and MacKinlay variance ratio test in: 
Kinlaw Variance Ratio Correlation Term Structure.pdf  
packages vrtest and pracma  
https://github.com/cran/pracma/blob/master/R/hurst.R

+ [ ] show that term structure of variance may be caused by autocorrelation
simulate an autocorrelated series and calculate its term structure of variance
plotly or shiny plot the variance ratio as function of autocorrelation
stochastic (unobservable) drift term may cause autocorrelation, even if returns are iid and lognormal
http://www.portfolioprobe.com/2011/11/08/the-mystery-of-volatility-estimates-from-daily-versus-monthly-returns/

+ [ ] simulate Ornstein-Uhlenbeck process AR(1) model and trade it  
forecast returns and demonstrate that forecasting is easier with stronger mean-reversion  
http://robotwealth.com/exploring-mean-reversion-and-cointegration-with-zorro-and-r-part-1/  
http://robotwealth.com/exploring-mean-reversion-and-cointegration-part-2/  

+ [ ] create slides regression and pairs trading  
# create pairs trading demo:
1. identify cointegrated pairs - heatmap,
2. identify cointegrated portfolios from clustering,
3. test persistence of cointegrated pairs out-of-sample,
4. trade pairs in-sample and out-of-sample,
5. apply ADF test to pairs and portfolios
use: ### Cointegration - from R scraps
# Sebastian Fossati - very good time series and cointegration with some R
# Bernhard Pfaff at Invesco: packages urca, vars, evir, FRAPO
# basic pairs trading demo
http://www.rfortraders.com/lecture-4-regression-and-pairs-trading/
http://quanttrader.info/public/testForCoint.html
http://gekkoquant.com/2012/12/17/statistical-arbitrage-testing-for-cointegration-augmented-dicky-fuller/
http://gekkoquant.com/2013/01/21/statistical-arbitrage-trading-a-cointegrated-pair/

+ [ ] trade Hurst model
http://timelyportfolio.blogspot.com/2011/06/exploring-market-with-hurst.html
Qian Rashid Hurst Predictability.pdf

+ [ ] Perform cross-sectional regressions, Fama-French model, Barra model
Fama-MacBeth two-pass regressions to explain cross-sectional returns/values by factors  
Campbell Market Factors Stock Forecasting.pdf  
http://quant.stackexchange.com/questions/16855/how-to-test-the-5-factor-capm-of-fama-french-2014  
http://quant.stackexchange.com/questions/17125/please-give-a-step-by-step-explanation-on-how-to-build-a-factor-model
http://quant.stackexchange.com/questions/8697/r-fast-and-efficient-way-of-running-a-multivariate-regression-across-a-really
factorAnalytics fitTsfm_vignette.pdf
analyze function fitFfm()  
Perform sorts on the "stock" data frame from factorAnalytics - file Stock.df.RData
stock is used by function fitFfm()

+ [ ] use following data:  
data(package="factorAnalytics")  
C:\Research\R\Packages\factorAnalytics\extdata  
data(package="GARPFRM")  
data(package="mpo")  

+ [ ] QMJ Quality Minus Junk Factor
http://timelyportfolio.blogspot.com/2014/04/all-factors-more-looks.html
qmj package
https://github.com/anttsou/qmj

+ [ ] Supervised Principal Components package superpc  
http://statweb.stanford.edu/~tibs/superpc/
http://statweb.stanford.edu/~tibs/superpc/tutorial

+ [ ] Principal component regression PCR and Supervised Principal Components
write full PCR code, then compare with package roll  
create synthetic data and show that PCR outperforms ordinary regression when noise is high  
show that using all the PCAs is equivalent to ordinary regression
https://en.wikipedia.org/wiki/Principal_component_regression

+ [ ] PCA clusters example - adapt
https://plot.ly/r/github-getting-started-for-data-scientists/

+ [ ] Perform PCA by hand using optimization

+ [ ] Higher Moments Factor Models  
Boudt Asset Allocation Utility Higher Moments Factor Models.pdf
Boudt Asset Allocation Higher Moments Factor Models.pdf

+ [ ] Modify Security Market Line?  

+ [ ] Random portfolios  
draw scatterplot of random portfolios, model on:
https://quantstrattrader.wordpress.com/2015/09/10/monte-carlo-in-asset-allocation-tests/  
http://www.portfolioprobe.com/2012/02/27/realized-efficient-frontiers/
Novomestky package: rportfolios  
Random portfolios with constraints: random_portfolios from PortfolioAnalytics  
Stein Random Portfolios Fund Analysis.pdf  
Resampling Methods Bootstrap Cross Validation Random Portfolios  
http://www.capitalspectator.com/skewed-by-randomness-testing-arbitrary-rebalancing-dates/  
http://www.capitalspectator.com/using-random-portfolios-to-test-asset-allocation-strategies/  
https://gist.github.com/jpicerno1/fbc2e589023be56dde42  
https://gist.github.com/jpicerno1/af88861bcbbb80687cfb  
http://www.burns-stat.com/documents/tutorials/the-statistical-bootstrap-and-other-resampling-methods-2/  

+ [ ] Add Capital Market Line  
plot efficient frontier plus capital market line
http://zoonek.free.fr/blosxom/R/2012-06-01_Optimization.html  
https://gist.github.com/jpicerno1/565be39ca4226ecd004c  
http://www.capitalspectator.com/efficient-frontier-portfolios-impractical-but-still-useful/  
http://moderndata.plot.ly/portfolio-optimization-using-r-and-plotly/
Portfolio optimization: mean-variance efficient portfolios, efficient frontier, Capital Market Line, in portfolio_construction.Rnw

+ [ ] portfolio optimization with different objective functions - VaR, CVaR,  
Ian Kaplan (UofWash) minimum variance and tangency portfolios, CVaR portfolio optimization, ETF portfolios, Wharton Research Data Service (WRDS) data set and Factor Model Factors  
http://www.bearcave.com/finance/  
using fPortfolio package:  
http://www.bearcave.com/finance/portfolio_equations/  
Shaw Portfolio Optimization CVaR Omega Utility.pdf  
Yollin Optimization.pdf

+ [ ] portfolio rebalancing  
C:\Research\R\Packages\PortfolioAnalytics Bennett
C:\Research\R\Packages\PortfolioAnalytics Bennett Random Portfolios Swarm Optimization.pdf
C:\Research\R\Packages\PortfolioAnalytics Bennett\moment_estimation_notes.txt
PortfolioAnalytics Bennett Random Portfolios Swarm Optimization.pdf  
C:\Research\R\Packages\PortfolioAnalytics Bennett  
https://github.com/rossb34/PortfolioAnalyticsPresentation2015  
analyze PortfolioAnalytics function optimize.portfolio.rebalancing()

+ [ ] Zivot bootstrap portfolios - bootstrap mean, sd, weights  
C:\Research\R\Tutorials\Zivot\Econ 424\bootstrapPortfoliosPowerpoint.pdf  
C:\Research\R\Tutorials\Zivot\Econ 424\bootstrapPortfolio.R  

+ [ ] portfolio optimization using optim  
can mean variance portfolio optimization be converted to min variance optimization ?  
library(quadprog)  
solve.QP  
different objective functions,  
constraints

+ [ ] Guy Yollin’s "effFrontier" and "maxSharpe" functions use the core function of "portfolio.optim" in the "tseries" R package  
http://blog.streeteye.com/blog/2012/01/portfolio-optimization-and-efficient-frontiers-in-r/  
C:\Research\R\Tutorials\Guy Yollin Presentations  
Levy Alpha Sharpe Portfolio Optimization.pdf  

+ [ ] introduce the Critical Line Algorithm (CLA)  
http://rnfc.org/2015/06/05/Markowitz/
function CCLA()  
Bailey Prado Critical Line Algorithm Portfolio Selection  

+ [ ] introduce the Gerber Statistic  
http://nextlevelanalytics.github.io/2016/05/26/Gerber/

+ [ ] Portfolio Optimization using the Gerber Statistic  
Gerber Statistic Portfolio Optimization.pdf

+ [ ] introduce Hierarchical Risk Parity (HRP), the Gerber Statistic, and the Critical Line Algorithm (CLA)  
http://gallery.rcpp.org/articles/HRP/
https://github.com/RcppCore/rcpp-gallery/blob/gh-pages/src/2016-05-27-HRP.Rmd
http://nextlevelanalytics.github.io/2016/05/30/Gerber_Statistic_and_Hierarchical_Risk_Parity/

+ [ ] using hfreq prices, calculate beta
calculate separate betas using intraday returns and using overnight returns
calculate separate betas using open-to-close returns and using close-to-open overnight returns
test CAPM
Bollerslev High Frequency Market Factors CAPM Model.pdf

+ [ ] recreate CRSPpanel.txt fundamental financial data for 265 S&P 500 stocks  
trellis plots  
nice barchart, dotplot, bwplot, and data munging  

+ [ ] download fundamental financial ratios data using quantmod
# Google query:
r quantmod fundamental data

+ [ ] add slides to section High Frequency and Intraday Time Series Data in risk_models.Rnw
use HighFreq package slides from 2015 presentations RFinance_2015.Rnw and EARL_Boston_2015.Rnw
Running volatility estimation using OHLC data - compare to closing vol
estimate variance of volatility estimator
Volume-Weighted Average Price Indicator
Running regression estimation using OHLC data - compare to closing regression

+ [ ] develop range OHLC estimators for skewness and kurtosis

+ [ ] introduce seasonal and trend decomposition  
https://anomaly.io/seasonal-trend-decomposition-in-r

+ [ ] study Hawkes process as model for asset returns with decaying skewness and kurtosis  

+ [ ] Kelly criterion
KellyRatio.R
create charts of random time series of wealth with different expected pv and growth rates
create charts of random time series of ruin
create terminal wealth charts
as function of betting fraction
as function of probability
as function of odds

+ [ ] Kelly in R:
simulate binary betting strategy using "for" loops and/or "apply"
then also simulate using vector functions
which betting fraction maximizes expected terminal wealth? - step-wise
which betting fraction maximizes expected growth rate? - Kelly
calculate SR of binary betting strategy
which betting fraction maximizes SR?

+ [ ] Kelly in R:
calculate utility as function of betting fraction, from empirical time series of returns, 
compare with Kelly from variance alone
include skew and kurtosis

+ [ ] Kelly for negative betting fraction (shorting)
Kelly for betting fraction greater than 1 (leverage)

+ [ ] Kelly proofs:
find optimal betting fraction, assuming you know the future number of wins and losses
find max expected log of wins and losses
extend Kelly formula to higher moments

+ [ ] Shlok Datye: Kelly Criterion and Optimal-f
http://shlok.is/thesis
Shlok Kelly Optimal-f Criteria.pdf
# Kelly Criterion and Optimal-f
https://alphaism.wordpress.com/2012/04/13/testing-kelly-criterion-and-optimal-f-in-r/
Vince Kelly Optimal-f Criteria.pdf

+ [x] change start_points in time_series_univariate: make it consistent with HighFreq::roll_apply(): win_dow is the size of the lookback window, equal to the number of data points used for applying the aggregation function (including the current point)  
start_points <-  end_points[c(rep_len(1, win_dow-1), 1:(len_gth-win_dow+1))]
instead of:
start_points <-  end_points[c(rep_len(1, win_dow), 1:(len_gth-win_dow))] + 1

+ [x] review Optimal Mean Reversion Trading: mostly math from his papers  
Redemption Code:	F3P8XXBB7SKVXFZNX6KP
https://bookshelf.vitalsource.com/#/books/9789814725934/cfi/6/2!/4/2/2@0:66.1

+ [x] convert all code from nrow() and ncol() to NROW() and NCOL()  

+ [x] Download from Quandl financial ratios for a list of companies
Fundamental data on Quandl is all premium.

+ [x] update ETF list and etf_data.Rdata

+ [x] hw/test: eapply over hypothesis tests 

+ [x] create package rutils: Utility Functions for Financial Data Management and Modeling

+ [x] Downloading S&P500 stock price data with R
https://grollchristian.wordpress.com/2013/08/07/sp500-stock-price-data/

+ [x] Stock index constituents and meta-data  
http://www.joelgehman.com/2010/10/sp-500-historical-constituents/
https://www.quandl.com/blog/useful-lists

+ [x] download data for all S&P500 stocks from Quandl
Quandl import stock fundamentals in R
Quandl API Key:	pUJi9Mv3V9CD3Js5s7Rx
https://www.quandl.com/blog/quandl-launches-intraday-data-2

+ [x] update HighFreq package

+ [ ] demonstrate that positive correlation doesn't translate into similar long-term returns
develop the contrived hypothetical example in: Kinlaw Variance Ratio Correlation Term Structure.pdf  
demonstrate that the term structure of correlation decreases with tenor  
show that correlation depends on time scale, and decreases with shorter time scale  
on short time scales correlation is very small  
on intermediate time scales correlation is greater  
on long time scales correlation is lower  
study Lo and MacKinlay variance ratio test in: 

# rewrite the Backtesting Framework using exclusively vectorized functions:
is "periods" needed?
risk_ret_stats() should perform lapply() and return list
split and rename pnl_period()
etf_reg_stats is not defined anywhere in "investment_strategies"
	load it from "time_series_multivariate"

# introduce improved out-of-sample data notation using period_s

# lame
http://stackoverflow.com/questions/25340257/how-to-import-fundamentals-for-stocks-by-using-quandl-package
# GICS Sectors data spreadsheet download
http://stackoverflow.com/questions/11339993/getting-stocks-by-industry-via-yahoo-finance
http://www.reddit.com/r/investing/comments/1f6kjt/anyone_know_where_i_can_find_a_data_set_of/
https://www.quantopian.com/posts/creating-an-algorithm-that-uses-fundamental-data
https://www.quantopian.com/posts/using-the-fetcher-with-quandl

# Stock market historical data
http://opendata.stackexchange.com/questions/4116/stock-market-historical-data

# download hfreq data from Quandl
# get Quandl trial license and download VIX S&P futures data ? use WRDS instead

# create lecture slides for:
https://ropensci.org/
https://plot.ly


+ [ ] add Cauchy distribution to plotting.Rnw ?  
risk_models  


###############
### homework and test ideas

+ [ ] find the minimum volatility portfolio, loop over volatility and find maximum return portfolios (that's efficient frontier), and plot the efficient frontier  

+ [ ] what is CAPM alpha of VWAP strategy?
where is VWAP strategy on CAPM scatterplot?
draw the Efficient Frontier
Is it possible to combine SPY with VWAP strategy to achieve higher Sharpe than either of them alone?

+ [x] loop over correlations in two-asset portfolio, find maximum Sharpe, and plot efficient frontiers in different colors  

+ [ ] calculate volatility, skew, and kurtosis over non-overlapping intervals
create scatterplot of skew or kurtosis as function of volatility
show that in periods of high volatility the kurtosis is lower

+ [ ] MUD statistical arbitrage trading strategy: sell the quantile of stocks that are up the most, and buy the quantile that are down the most  

+ [x] Perform aggregations over OHLC to reproduce function to_period() from package rutils  

+ [ ] estimate Hurst exponent for an xts time series of prices using variance ratios  
Demonstrate that if prices follow geometric Brownian motion then the Hurst exponent is equal to 1, 
If prices are mean-reverting then the Hurst exponent is less than 1, 
If prices are trending then the Hurst exponent is greater than 1, 
simulate prices for OU prices and calculate variance ratios for different values of mean-reversion parameter
plot Hurst exponent as function of mean-reversion parameter
# calculate Hurst exponent using variance ratios for non-xts
hurst_exp <- function(da_ta, l_ag=4) {
  len_gth <- length(da_ta)
  var(da_ta[-(1:l_ag)]-da_ta[-((len_gth-l_ag+1):len_gth)])/var(da_ta[-1]-da_ta[-len_gth])/l_ag
}  # end hurst_exp

+ [ ] calculate the standard errors of all the different TTR variance estimators using parallel bootstrap
boot_strap <- sapply(1:100, function(x) {
# create random OHLC
  oh_lc <- HighFreq::random_ohlc()
# calculate variance estimates
  sapply(meth_ods, function(meth_od) {
    sqrt((6.5*60)*mean(na.omit(TTR::volatility(oh_lc, N=1, calc=meth_od))^2))
  })  # end sapply
})  # end sapply

+ [x] calculate volatility estimates using all the different "calc" methods in function volatility() from package TTR  

+ [x] calculate daily close-to-open volatility and open-to-close volatility

+ [ ] recursively rbind() a list of objects, such as xts time series - reproduce do_call_rbind()

+ [x] convert the date and time to different time zones  

+ [x] perform sorts on the data frame in CRSPpanel.txt

+ [x] create a vector of dates that are the last workdays of every month  

+ [ ] calculate standard deviation, skewness, and kurtosis of SPY returns in each year using sapply loop  
plot histograms of returns in each year in panels

+ [ ] calculate SPY moments in each month, in each year, 

+ [ ] benchmark runmed with runquantile and runMedian
benchmark TTR::runMAD() with caTools::runmad()

+ [ ] rebalance monthly two-asset portfolio to maintain: equal market value weights, equal risk weights  
make sure to rebalance on the last workday of every month  

+ [ ] calculate standard errors of variance estimators using bootstrap - parallel version

+ [ ] reproduce function melt() from package reshape2
http://stackoverflow.com/questions/3777174/plotting-two-variables-as-lines-using-ggplot2-on-the-same-graph
http://www.wekaleamstudios.co.uk/posts/melt/

+ [ ] calculate rolling/sliding volatility
regress against volume
regress levels and changes in levels at different horizons
extract stats into vector
perform sapply over window size and agg horizons
select different market regimes

+ [ ] explain Sharpe ratio as a t-statistic
simulate Sharpe ratios
create distribution of Sharpe ratios

+ [ ] create function that performs hypothesis testing in a loop over parameters
create wrapper function for hypothesis testing functions

+ [x] calculate data frame of hypothesis test statistics for returns data
sapply over sym_bols and extract:
Shapiro-Wilk Test of Normality
Jarque-Bera Test of Normality
sort by most/least normal
save to comma-delimited CSV file

+ [ ] calculate data frame of perf stats for price data and
create data frame
save to comma-delimited CSV file
use table.Stats()
sd, MAD, skew, kurt, alpha, beta, max drawdown, 

+ [ ] expand code from slide:
Downloading Time Series Data Using Package quantmod

+ [ ] extract "Adjusted" and "Volume" columns
etf_series_ad <- do.call(merge, 
                  eapply(env_data, Ad)[sym_bols])

plot with quantmod
chartSeries(blah, theme=chartTheme("white"))
chart_Series(blah, name="SPY")


+ [ ] Reading and Writing data frame or xts Series With Date-time Index from txt and csv files


+ [ ] idea for homework:
modify get.hist.quote to download from any URL
add extra argument for URL, with default:
http://ichart.yahoo.com/table.csv


+ [ ] idea for homework:
provide list of tickers
tickers for Asset Allocation exercises
sym_bols <- c("VTI", "VEU", "IEF", "VNQ", "DBC", "XLY", "XLP", "XLE", "XLF", "XLV", "XLI", "XLB", "XLK", "XLU", "IWB", "IWD", "IWF", "IWM", "IWN", "IWO", "IWP", "IWR", "IWS", "IWV", "IWW", "IWZ")

? download descriptive data ticker (name, industry, sector, etc.)
? format data frame of descriptive data: columns and rows

read etf database file called "etf_list.csv" into data frame called "etf_list", using "read.csv"
subset etf_list to include only those ETF's in sym_bols, using "%in%" operator

create a data directory on your computer, and save all files to that directory 
remember the location of that data directory for future use
? save description data to CSV file


? using description data frame

download 10yrs of data for list of sym_bols, and call it "zoo_series"
Use get.hist.quote() and lapply() loop,
For each sym_bol download fields "AdjClose" and "Volume",
the zoo_series data lapply returned is a list - each list element is a zoo object,
assign names() attribute to zoo_series, equal to sym_bols vector - result should be named list,

flatten zoo_series into a single zoo object, using do.call() and merge(),
assign new names() to zoo_series, in the format "XLI.Close", "XLI.Volume", etc.
Use sapply() and paste(),



###############
### save data for future load

save(env_data, sym_bols, etf_series_ad, etf_rets, etf_list, ret_stats, etf_perf_stats, file='etf_data.Rdata')

save(
maxSR_DEOpt, maxSR_DEOpt_xts, maxSR_ROI, maxSRN_DEOpt, maxSRN_DEOpt_xts,
maxSTARR_DEOpt, maxSTARR_DEOpt_xts, maxSTARR_RP, minES_ROI, minES_ROI_xts,
plot_portf, portf_init, portf_maxSR, portf_maxSRN, portf_maxSTARR,
portf_minES, portf_names, risk_ret_points,
weights_1h, weights_2h,
period_stats, pnl_xts,
file="C:/Develop/data/portf_optim.Rdata")

###############
# end save data for future load



###

# Dupoyet High Frequency Self Organizing Critical Markets

# LeBaron Stock Momentum Volume.pdf
LeBaron Improved Range Volatility Estimators.pdf

# ETF Sector Rotation Strategy
http://www.etfscreen.com/sectorstrategy.php
http://systematicinvestor.wordpress.com/2011/12/06/multi-asset-backtest-rotational-trading-strategies/

# Ekholm Decomposition of Hussman Strategic Growth (HSGFX) - uses Fama/French factors
https://gist.github.com/timelyportfolio/9b962f7c391c492bfe35
# function
https://gist.githubusercontent.com/timelyportfolio/e5728c8c7fb45dbdb6e0/raw/e124379f19225fcdee18f30cb848da6fc6cae764/ekholm.R
http://timelyportfolio.blogspot.com/2014/10/selectionshare-timingshare-masterfully.html

# use of systematic investor part 1.r
http://timelyportfolio.blogspot.com/2012/02/simplified-example-of-systematic.html
https://gist.github.com/timelyportfolio/1793607


# Yahoo explains its data
https://help.yahoo.com/kb/finance/historical-prices-sln2311.html




########################
### emails

Dear Students,
Welcome to FRE7241 Algorithmic Portfolio Management.  I'm glad to see that so many students have registered for this course.  
But I must warn you that many students find this course to be difficult.  The R language is considered to be very challenging, so this course requires strong programming skills and experience.  Students should therefore have extensive programming experience with the R language and other languages such as C++ or Python.

Students with less programming experience are encouraged to first take FRE6871 R in Finance.  
Students should also have knowledge of basic statistics (random variables, estimators, hypothesis testing, regression, etc.)

It may be helpful for you to prepare by taking some free online courses: 
http://tryr.codeschool.com/
https://www.datacamp.com/courses/free-introduction-to-r
https://www.datacamp.com/courses/intermediate-r
https://www.datacamp.com/introduction-to-statistics
https://www.datacamp.com/courses/statistical-inference-and-data-analysis

I've uploaded the syllabus and other course materials to NYU Classes.

You may download the previous lecture slides from here:
https://drive.google.com/drive/u/1/folders/0Bxzva1I0t63vVGEtaXNIY1JMa00

Regards,  Jerzy Pawlowski
NYU Tandon, Finance and Risk Engineering

Dear Students,
Below is the link to the survey results for the FRE7241 course.  13 students answered so far, and the feedback is pretty positive.  But one area that still needs improvement are test instructions.

https://www.surveymonkey.com/results/SM-P76ZVKKJ/


### TA

Can you please send a message to all students via NYU Classes announcing that you will be the TA?
Also please ask students for the most convenient time for office hours, and then announce to them when you'll be holding office hours.
Please read the first lecture slides with instructions for grading and submission of assignments.


### Google drive

Dear Students,
I've uploaded many lecture slides to Google drive:
https://drive.google.com/folderview?id=0Bxzva1I0t63vVGEtaXNIY1JMa00&usp=sharing

I encourage you to study them, and I welcome your questions via NYU Classes forums or in class.


### grading

Dear Students,
As stated in the FRE6871 syllabus: 
"The final course letter grade will be derived from the cumulative scores obtained for all the homeworks and tests."
However, there is no fixed formula for assigning a letter grade from the cumulative score.  Over half of students received letter grades of "A" or "A-", which I think is very generous.

### tests

Dear Students,
Here are some suggestions that may help you on the tests.

Don't leave assignments unanswered because you won't get partial credit.  At least try to copy some lecture code that makes sense for the assignment.
First, search the lecture code for keywords and function names mentioned in the instructions.
Second, copy lecture code that makes sense for the assignment.
Third, modify that lecture code as best you can.
Fourth, ask for hints from me.

Dear Students,
There will be an in-class test this Tuesday, October 4th.
The test will start at 6:30 PM, and will last 60min until 7:30 PM.
I will upload the test file at 6:30 PM to NYU Classes.
The lecture will start at 6:00 PM, as usual.  
You must bring your laptops and be able to log into WiFi.

The test will be based on lecture notes, so please study the topics below.

In Part I you will be asked to perform the following:
Apply the function filter_prices() from test #3 over overlapping 12-month intervals in the past. 
Define end points at the end of each month using function endpoints() from package xts.
Calculate a time series of trailing 12-month optimal thresholds, and the associated true positive and false positive rates, using function sapply() and an anonymous function.
Calculate the trailing 12-month volatility, defined as the standard deviation of daily returns, using functions sapply() sd(), index(), xts(), and diff_xts() from package rutils.
Plot in multiple panels using the functions chart_Series() and add_TA().
Plot scatterplots using function plot(). 

In Part II you will be asked to perform the following:
Create a function which calculates the volume-weighted average price (VWAP) of an OHLC time series.
The function should return an xts series with a single column containing the VWAP of the adjusted close prices.
You can use functions Ad(), Vo() and roll_sum() (defined in the lecture slides).
You can also use functions paste0(), strsplit(), and colnames(), to change the column name.
You cannot use for() or sapply() loops of any kind.
Calculate the same VWAP using function VWAP() from package TTR. 
Find which elements are significantly different between the two results (absolute difference is greater than 0.01).
Benchmark the speed of of the two functions using function microbenchmark() from package microbenchmark.
Find the crossing points of VWAP with prices, and create plots with background shading, using functions chart_Series() and add_TA().


benchmark it to function VWAP()
# from package TTR, and create plots.


Performing hypothesis tests and extracting test statistics.
Plotting scatterplots of test statistics. 
Performing apply() and sapply() loops over vectors. 
Plotting xts series using chart_Series() from package quantmod. 
Passing arguments to functions through the dots "..." argument of sapply(). 
Sorting data frames on columns.
Saving data frames to comma-delimited CSV files.
Calculating Median Absolute Deviation over a rolling window.
Lagging and advancing time series.
Identifying bad data in a time series using a Hampel median filter.  
http://www.mathworks.com/help/signal/ref/hampel.html
http://dsp.stackexchange.com/questions/26552/what-is-a-hampel-filter-and-how-does-it-work
Identifying type I and type II errors in hypothesis tests. 
Plotting Receiver Operating Characteristic (ROC) curves. 
http://www.joyofdata.de/blog/illustrated-guide-to-roc-and-auc/
Optimizing filter parameters in-sample, and backtesting their performance out-of-sample. 


Formatting dates into months and years. 
Using anonymous functions with apply(). 
Performing apply() and eapply() loops over matrices, data frames, xts series, and environments. 
Extracting objects from environments using get(). 
Flattening lists using do.call() and rbind() or merge().
Calculating equally spaced end points over OHLC time series. 
Performing interval aggregations over OHLC time series.
Plotting with custom "x" axis using plot() and axis(). 

Coercing integers and strings to "POSIXct" date-time objects. 
Converting dates into days of the week. 
Using functions from package lubridate, 
Converting the date and time to different time zones.

Calculating downside deviations, and Sortino and Calmar ratios. 
Defining objective functions for portfolio optimization. 
Performing portfolio optimizations using optim(). 
Plotting scatterplots of random portfolios. 

Searching in strings for sub-strings using grep() and glob2rx(). 
Extracting columns from OHLC data. 
Extracting data from output of function table.Drawdowns(). 
Assigning objects to environments using assign(). 
Invisibly returning values using invisible(). 
Creating functions that produce side effects. 
Subsetting data frames using logical operators. 
Subsetting xts series to specified dates and endpoints. 
Extracting the time index from xts series. 
Converting dates into days of the week. 
Calculating percentage returns from prices. 
Coercing integers and strings to "POSIXct" date-time objects. 

You will need to use the following functions:
coredata(), unname(), shapiro.test(), jarque.bera.test(), sapply(), na.omit(), t(), plot(), text(), order(), write.csv(), TTR::runMedian(), TTR::runMAD(), rutils::lag_xts()

seq(), as.Date(), Sys.Date(), weekdays(), as.POSIXct(), Sys.timezone(), format(), Sys.setenv()

You will need to use the following functions:
format(), as.POSIXct(), names(), unique(), index(), coredata(), get(), sapply(), eapply(), is.xts(), xts(), unlist(), dim(), rbind(), merge(), do.call(), plot(), axis(), to_period() from package rutils, the %in% operator, and anonymous functions


You will need to use the following functions:
apply(), sapply(), SortinoRatio(), CalmarRatio(), optim(), xts(), chart_Series(), seq(), runif().

Ad(), Vo(), assign(), table.Drawdowns(), invisible(), grep(), and glob2rx()
grep(), glob2rx(), Cl(), 
sum(), is.na(), read.csv(), write.csv(), endpoints(), weekdays(), index(), tail(), log(), diff(), which(), which.max(), which.min().


###

Dear Students,
Please create your personal account on Stack Exchange:
http://stackexchange.com/

Please add Stack Overflow as one of your communities on Stack Exchange.


###

Dear Students,
Please install the following R packages: lubridate, microbenchmark, devtools, xts, quantmod, ggplot2, dygraphs, plotly, TTR, PerformanceAnalytics, PortfolioAnalytics, and RQuantLib.
You can install them from the "Tools" menu in RStudio, or using the R command:

install.packages(c("lubridate", "microbenchmark", "devtools", "xts", "quantmod", ggplot2", "dygraphs", "plotly", "TTR", "PerformanceAnalytics", "PortfolioAnalytics", "RQuantLib"))

Also install Rtools for Windows:
https://cran.r-project.org/bin/windows/Rtools/Rtools33.exe

Or Mac/OSX users install Xcode:
https://developer.apple.com/xcode/

Also install the package factorAnalytics as follows:

install.packages("factorAnalytics", type="source", repos="http://r-forge.r-project.org")

Also install the packages rutils and HighFreq as follows:
devtools::install_github(repo="algoquant/rutils")
devtools::install_github(repo="algoquant/HighFreq")

Also install the packages RcppRoll and HighFreq as follows:
install.packages("RcppRoll")

Please install the following packages:
dplyr
tidyr
latticeExtra
directlabels

install.packages(c("PortfolioAnalytics", "factorAnalytics", "PortfolioAttribution", "FinancialInstrument", "quantstrat", "blotter"), type="source", repos="http://r-forge.r-project.org")

install.packages("xtsExtra", repos='http://r-forge.r-project.org')

install.packages(c("lmtest", "lubridate", "quantmod", "TTR", "PerformanceAnalytics", "Quandl", "ROI", "ROI.plugin.quadprog", "ROI.plugin.glpk", "DEoptim", "NMOF"))


install.packages(c("dplyr", "ggvis", "shiny", "knitr", "rmarkdown", "nycflights13", "babynames", "forecast", "devtools"))

Regards,  Jerzy Pawlowski
NYU Tandon, Finance and Risk Engineering



########################

Resources:

# ECON 424/AMATH 462:  Introduction to Computational Finance and Financial Econometrics
http://faculty.washington.edu/ezivot/econ424/econ424.htm
http://faculty.washington.edu/ezivot/econ424/424syllabus.htm
http://faculty.washington.edu/ezivot/econ424/424notes.htm
http://faculty.washington.edu/ezivot/econ424/R_hints.htm

# Jeff Ryan
quantmod Workshop.pdf

# quantmod and quantstrat
C:\Research\R\Tutorials\Guy Yollin Presentations
Efficient Indexes Factor Models.pdf
quantmod.pdf

# Vinod good cointegration
C:\Research\R\Tutorials\Vinod\Econometrics\exercises3.pdf

# R Examples for the second edition
http://www.pfaffikus.de/springerex2.html


Tsai Skewness Kurtosis Asset Allocation.pdf

Harvey Evaluating Trading Strategies

project ReturnAnalytics (packages  PortfolioAnalytics and PerformanceAnalytics)
C:\Research\R\Packages\PerformanceAnalytics\doc

Meucci Dynamic Allocation Strategies

# Alexios Ghalanos package rugarch
http://unstarched.net/
Review of Risk Parity:
http://unstarched.net/2013/12/17/a-review-of-risk-parity/ 

Bailey Prado Portfolio Optimization Algorithm
Didenko Random Forest Ensemble Learning Portfolio Views
Fossati time series with some R:	C:\Research\R\Tutorials\Fossati\e509

R examples in:
C:\Research\R\Packages\Quantstrat
http://r-forge.r-project.org/projects/returnanalytics/
http://blog.fosstrading.com/2014/03/intro-to-portfolioanalytics.html

Steiner Alpha Misleading Performance Measure
http://systematicinvestor.wordpress.com/2012/02/26/portfolio-optimization-why-do-we-need-a-risk-model/


